"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2683],{77198:function(k,M,e){var x=e(97857),r=e.n(x),A=e(5574),o=e.n(A),d=e(20385),g=e(15245),p=e(89050),S=e(55555),Z=e(55287),K=e(82061),B=e(14361),q=e(73403),U=e(88484),z=e(80527),D=e(35312),P=e(58301),y=e(85418),$=e(93421),R=e(86738),c=e(71577),L=e(98366),m=e(71230),v=e(15746),f=e(85673),i=e(96365),_=e(65419),j=e(62435),l=e(86074),N=function(F){var Y=(0,D.useIntl)(),a=(0,j.useRef)(),ne=(0,j.useState)(),E=o()(ne,2),W=E[0],I=E[1],H={name:"file",action:d.kE,onChange:function(t){if(t.file.status!=="uploading"&&console.log(t.file,t.fileList),t.file.status==="done"){var s;P.ZP.success("".concat(t.file.name," file uploaded successfully")),(s=a.current)===null||s===void 0||s.reload()}else t.file.status==="error"&&P.ZP.error("".concat(t.file.name," file upload failed."))}},X=[{key:"images",name:"Images",icon:(0,l.jsx)(g.Z,{twoToneColor:"#eb2f96"})},{key:"videos",name:"Videos",icon:(0,l.jsx)(p.Z,{})},{key:"text",name:"Documents",icon:(0,l.jsx)(S.Z,{twoToneColor:"#52c41a"})}],b=[{title:"#",valueType:"indexBorder"},{title:"Name",dataIndex:"name"},{title:"Date modified",dataIndex:"modifiedDate"},{title:"Type",dataIndex:"type"},{title:"Size",dataIndex:"size"},{title:"Action",render:function(t,s){return(0,l.jsx)(y.Z,{menu:{items:[{key:1,label:(0,l.jsxs)($.Z,{onClick:function(){return D.history.push("/files/center/".concat(s.id))},children:[(0,l.jsx)(Z.Z,{}),(0,l.jsx)(D.FormattedMessage,{id:"general.preview"})]})},{key:2,label:(0,l.jsx)(R.Z,{title:"Are you sure?",children:(0,l.jsxs)($.Z,{children:[(0,l.jsx)(K.Z,{}),"Delete"]})}),danger:!0}]},children:(0,l.jsx)(c.ZP,{icon:(0,l.jsx)(B.Z,{}),type:"link",size:"small"})})}}];return(0,l.jsxs)(L.Z,{title:"File Explorer",open:F.open,onCancel:function(){return F.onOpenChange()},centered:!0,width:1100,footer:!1,children:[(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsxs)(m.Z,{gutter:16,children:[(0,l.jsx)(v.Z,{span:4}),(0,l.jsx)(v.Z,{span:20,children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)(f.Z,{children:[(0,l.jsx)(f.Z.Item,{href:"",children:(0,l.jsx)(q.Z,{})}),(0,l.jsx)(f.Z.Item,{href:"",children:"Home"})]}),(0,l.jsx)("div",{children:(0,l.jsx)(i.Z.Search,{placeholder:"Search"})})]})})]})}),(0,l.jsxs)(m.Z,{gutter:16,children:[(0,l.jsx)(v.Z,{span:4,style:{borderRight:"1px solid #d1d1d1"},children:X.map(function(O){return(0,l.jsx)("div",{className:"hover-light",children:(0,l.jsx)(c.ZP,{type:"link",icon:O.icon,children:O.name})},O.key)})}),(0,l.jsx)(v.Z,{span:20,children:(0,l.jsx)(z.Z,{rowSelection:{},toolBarRender:function(){return[(0,j.createElement)(_.Z,r()(r()({},H),{},{key:0}),(0,l.jsx)(c.ZP,{icon:(0,l.jsx)(U.Z,{}),type:"primary",children:"Upload"}))]},search:!1,columns:b,request:function(t){return(0,d.V6)(r()({},t),F.type)},pagination:{defaultPageSize:8},actionRef:a})})]})]})};M.Z=N},84697:function(k,M,e){var x=e(12361),r=e(64317),A=e(86074),o=function(g){return(0,A.jsx)(r.Z,{request:x.Z9,label:g.label,name:g.name,initialValue:g.initialValue,rules:[{required:!0}]})};M.Z=o},37097:function(k,M,e){e.d(M,{l:function(){return d}});var x=e(12361),r=e(64317),A=e(86074),o=function(S){return(0,A.jsx)(r.Z,{showSearch:!0,request:x.wu,label:S.label,name:S.name})},d=o,g=e(84697)},26876:function(k,M,e){e.d(M,{Z:function(){return f}});var x=e(15009),r=e.n(x),A=e(99289),o=e.n(A),d=e(5574),g=e.n(d),p=e(12361),S=e(55725),Z=e(34994),K=e(5966),B=e(90672),q=e(63434),U=e(35312),z=e(58301),D=e(71577),P=e(62435),y=e(84697),$=e(77198),R=e(64317),c=e(86074),L=function(_){return(0,c.jsx)(R.Z,{showSearch:!0,request:p.U4,label:_.label,name:_.name,initialValue:_.initialValue})},m=L,v=function(){var _=(0,U.useParams)(),j=_.id,l=(0,P.useRef)(),N=(0,P.useState)(!1),ee=g()(N,2),F=ee[0],Y=ee[1];(0,P.useEffect)(function(){(0,p.R4)(j).then(function(E){var W;(W=l.current)===null||W===void 0||W.setFields([{name:"id",value:E.id},{name:"name",value:E.name},{name:"normalizedName",value:E.normalizedName},{name:"description",value:E.description},{name:"thumbnail",value:E.thumbnail},{name:"type",value:E.type.toString()},{name:"active",value:E.active},{name:"parentId",value:E.parentId}])})},[j]);var a=function(){var E=o()(r()().mark(function W(I){var H;return r()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return I.type=Number(I.type),b.next=3,(0,p.BA)(I);case 3:H=b.sent,H.succeeded&&z.ZP.success("Saved!");case 5:case"end":return b.stop()}},W)}));return function(I){return E.apply(this,arguments)}}(),ne=function(W){var I;(I=l.current)===null||I===void 0||I.setFieldValue("thumbnail",W.url),Y(!1)};return(0,c.jsxs)("div",{children:[(0,c.jsxs)(Z.A,{formRef:l,onFinish:a,children:[(0,c.jsx)(K.Z,{name:"id",hidden:!0}),(0,c.jsx)(K.Z,{name:"name",label:"Name",rules:[{required:!0}]}),(0,c.jsx)(K.Z,{name:"normalizedName",label:"Normalized name",rules:[{required:!0}]}),(0,c.jsx)(B.Z,{name:"description",label:"Description"}),(0,c.jsx)(K.Z,{name:"thumbnail",label:"Thumbnail",width:"lg",addonAfter:(0,c.jsx)(D.ZP,{icon:(0,c.jsx)(S.Z,{}),onClick:function(){return Y(!0)},children:"File explorer"})}),(0,c.jsx)(m,{name:"parentId",label:"Parent"}),(0,c.jsx)(y.Z,{name:"type",label:"Type"}),(0,c.jsx)(q.Z,{name:"active",label:"Active"})]}),(0,c.jsx)($.Z,{open:F,onOpenChange:Y,onSelect:ne})]})},f=v},74653:function(k,M,e){e.d(M,{Z:function(){return X}});var x=e(15009),r=e.n(x),A=e(99289),o=e.n(A),d=e(5574),g=e.n(d),p=e(55287),S=e(43425),Z=e(47389),K=e(3471),B=e(51042),q=e(28199),U=e(37476),z=e(5966),D=e(31199),P=e(62435),y=e(55375),$=e(35312),R=e(12361),c=e(58301),L=e(83062),m=e(32983),v=e(32545),f=e(96074),i=e(26412),_=e(25514),j=e(71577),l=e(93421),N=e(5251),ee=e(37097),F=e(66352),Y=e(66309),a=e(86074),ne=function(){var O=(0,$.useParams)(),t=O.id,s=(0,P.useState)(),u=g()(s,2),n=u[0],T=u[1],le=(0,P.useState)(!1),re=g()(le,2),h=re[0],ae=re[1],ue=function(){(0,R.m_)(t).then(function(w){T(w)})};(0,P.useEffect)(function(){ue()},[]);var ie=function(){var C=o()(r()().mark(function w(G){var Q;return r()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,(0,F.jX)({workId:t,catalogId:G.id,sortOrder:G.sortOrder});case 2:Q=te.sent,Q.succeeded?(c.ZP.success("Saved!"),ae(!1),ue()):c.ZP.error(Q.errors[0].description);case 4:case"end":return te.stop()}},w)}));return function(G){return C.apply(this,arguments)}}(),J=function(){var C=o()(r()().mark(function w(G){var Q,V;return r()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,(0,F.wz)({catalogId:G,workId:t,sortOrder:0});case 2:Q=se.sent,Q.succeeded?(V=n==null?void 0:n.filter(function(oe){return oe.id!==G}),T(V),c.ZP.success("Deleted")):c.ZP.error(Q.errors[0].description);case 4:case"end":return se.stop()}},w)}));return function(G){return C.apply(this,arguments)}}();return(0,a.jsxs)("div",{children:[n==null?void 0:n.map(function(C){return(0,a.jsx)(Y.Z,{closable:!0,onClose:function(){return J(C.id)},children:C.name},C.id)}),(0,a.jsx)(j.ZP,{size:"small",type:"dashed",onClick:function(){return ae(!0)},children:(0,a.jsxs)(l.Z,{children:[(0,a.jsx)(B.Z,{}),(0,a.jsx)($.FormattedMessage,{id:"general.new"})]})}),(0,a.jsxs)(U.Y,{open:h,onOpenChange:ae,onFinish:ie,title:"Th\xEAm m\u1EDBi",children:[(0,a.jsx)(ee.l,{label:"Tag",name:"id"}),(0,a.jsx)(D.Z,{label:"Sort order",name:"sortOrder"})]})]})},E=ne,W=function(){return localStorage.getItem("wf_URL")},I=W(),H=function(){var O=(0,$.useParams)(),t=O.id,s=(0,P.useState)(!1),u=g()(s,2),n=u[0],T=u[1],le=(0,P.useState)(),re=g()(le,2),h=re[0],ae=re[1];(0,P.useEffect)(function(){(0,R.R4)(t).then(function(J){return ae(J)})},[t]);var ue=function(){var J=o()(r()().mark(function C(w){var G;return r()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return w.active=!0,V.next=3,(0,R.BP)(w);case 3:G=V.sent,G.succeeded?(c.ZP.success("Added!"),T(!1)):c.ZP.error(G.errors[0].description);case 5:case"end":return V.stop()}},C)}));return function(w){return J.apply(this,arguments)}}(),ie=function(){var C="leaf";switch(h==null?void 0:h.type){case y.H.Location:C="locations";break;case y.H.Video:C="videos";break}return"".concat(I).concat(C,"/").concat(h==null?void 0:h.normalizedName)};return(0,a.jsxs)(q.Z,{title:"Summary",actions:[(0,a.jsx)(L.Z,{title:"Preview",children:(0,a.jsx)(p.Z,{onClick:function(){return window.open(ie())}})},"view"),(0,a.jsx)(S.Z,{},"setting"),(0,a.jsx)(Z.Z,{},"edit"),(0,a.jsx)(K.Z,{},"ellipsis")],children:[(0,a.jsx)("div",{className:"flex items-center justify-center mt-4",children:h!=null&&h.thumbnail?(0,a.jsx)(v.Z,{src:(0,N.Er)(h==null?void 0:h.thumbnail),height:200,className:"object-fit-cover"}):(0,a.jsx)(m.Z,{})}),(0,a.jsx)(f.Z,{}),(0,a.jsxs)(i.Z,{title:"Information",column:1,children:[(0,a.jsx)(i.Z.Item,{label:"L\u01B0\u1EE3t xem",children:h==null?void 0:h.viewCount}),(0,a.jsx)(i.Z.Item,{label:"Created date",children:(0,N.p6)(h==null?void 0:h.createdDate)}),(0,a.jsx)(i.Z.Item,{label:"Modified date",children:(0,N.p6)(h==null?void 0:h.modifiedDate)})]}),((h==null?void 0:h.type)||y.H.Entry)===y.H.Tag?(0,a.jsx)(P.Fragment,{}):(0,a.jsxs)("div",{children:[(0,a.jsx)(f.Z,{}),(0,a.jsx)(_.Z.Title,{level:5,children:"Tags"}),(0,a.jsx)(E,{}),(0,a.jsx)(f.Z,{dashed:!0}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(j.ZP,{size:"small",type:"dashed",onClick:function(){return T(!0)},children:(0,a.jsxs)(l.Z,{children:[(0,a.jsx)(B.Z,{}),"T\u1EA1o tag"]})})})]}),(0,a.jsxs)(U.Y,{open:n,onOpenChange:T,onFinish:ue,title:"Create tag",children:[(0,a.jsx)(z.Z,{name:"name",rules:[{required:!0}],label:"Name"}),(0,a.jsx)(D.Z,{name:"type",initialValue:y.H.Tag,hidden:!0})]})]})},X=H},12361:function(k,M,e){e.d(M,{A$:function(){return K},BA:function(){return P},BP:function(){return S},M0:function(){return Y},NU:function(){return H},R4:function(){return g},S8:function(){return z},U4:function(){return b},Z9:function(){return _},_V:function(){return c},kn:function(){return W},m_:function(){return l},tD:function(){return ne},wu:function(){return ee}});var x=e(15009),r=e.n(x),A=e(99289),o=e.n(A),d=e(35312);function g(t){return p.apply(this,arguments)}function p(){return p=o()(r()().mark(function t(s){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.request)("catalog/".concat(s)));case 1:case"end":return n.stop()}},t)})),p.apply(this,arguments)}function S(t){return Z.apply(this,arguments)}function Z(){return Z=o()(r()().mark(function t(s){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.request)("catalog/add",{method:"POST",data:s}));case 1:case"end":return n.stop()}},t)})),Z.apply(this,arguments)}function K(t){return B.apply(this,arguments)}function B(){return B=o()(r()().mark(function t(s){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.request)("catalog/list",{method:"GET",params:s}));case 1:case"end":return n.stop()}},t)})),B.apply(this,arguments)}function q(){return U.apply(this,arguments)}function U(){return U=_asyncToGenerator(_regeneratorRuntime().mark(function t(){return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",request("catalog/tree"));case 1:case"end":return u.stop()}},t)})),U.apply(this,arguments)}function z(t){return D.apply(this,arguments)}function D(){return D=o()(r()().mark(function t(s){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.request)("catalog/delete/".concat(s),{method:"POST"}));case 1:case"end":return n.stop()}},t)})),D.apply(this,arguments)}function P(t){return y.apply(this,arguments)}function y(){return y=o()(r()().mark(function t(s){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.request)("catalog/save",{method:"POST",data:s}));case 1:case"end":return n.stop()}},t)})),y.apply(this,arguments)}function $(t){return R.apply(this,arguments)}function R(){return R=_asyncToGenerator(_regeneratorRuntime().mark(function t(s){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("catalog/tree-drop",{method:"POST",data:s}));case 1:case"end":return n.stop()}},t)})),R.apply(this,arguments)}function c(){return L.apply(this,arguments)}function L(){return L=o()(r()().mark(function t(){return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,d.request)("catalog/view-count"));case 1:case"end":return u.stop()}},t)})),L.apply(this,arguments)}function m(t){return v.apply(this,arguments)}function v(){return v=_asyncToGenerator(_regeneratorRuntime().mark(function t(s){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("catalog/active/".concat(s),{method:"POST"}));case 1:case"end":return n.stop()}},t)})),v.apply(this,arguments)}function f(t){return i.apply(this,arguments)}function i(){return i=_asyncToGenerator(_regeneratorRuntime().mark(function t(s){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("catalog/update-thumbnail",{method:"POST",data:s}));case 1:case"end":return n.stop()}},t)})),i.apply(this,arguments)}function _(){return j.apply(this,arguments)}function j(){return j=o()(r()().mark(function t(){return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,d.request)("catalog/types"));case 1:case"end":return u.stop()}},t)})),j.apply(this,arguments)}function l(t){return N.apply(this,arguments)}function N(){return N=o()(r()().mark(function t(s){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.request)("catalog/list-tag/".concat(s)));case 1:case"end":return n.stop()}},t)})),N.apply(this,arguments)}function ee(t){return F.apply(this,arguments)}function F(){return F=o()(r()().mark(function t(s){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.request)("catalog/list-tag-select",{params:s}));case 1:case"end":return n.stop()}},t)})),F.apply(this,arguments)}function Y(t,s){return a.apply(this,arguments)}function a(){return a=o()(r()().mark(function t(s,u){return r()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.abrupt("return",(0,d.request)("catalog/list-by-tag/".concat(s),{params:u}));case 1:case"end":return T.stop()}},t)})),a.apply(this,arguments)}function ne(){return E.apply(this,arguments)}function E(){return E=o()(r()().mark(function t(){return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,d.request)("catalog/pie-chart"));case 1:case"end":return u.stop()}},t)})),E.apply(this,arguments)}function W(t,s){return I.apply(this,arguments)}function I(){return I=o()(r()().mark(function t(s,u){return r()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.abrupt("return",(0,d.request)("/product/image/save",{method:"POST",data:{urls:s,catalogId:u}}));case 1:case"end":return T.stop()}},t)})),I.apply(this,arguments)}function H(t){return X.apply(this,arguments)}function X(){return X=o()(r()().mark(function t(s){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.request)("/product/image/".concat(s)));case 1:case"end":return n.stop()}},t)})),X.apply(this,arguments)}function b(t){return O.apply(this,arguments)}function O(){return O=o()(r()().mark(function t(s){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.request)("/catalog/form-select",{params:s}));case 1:case"end":return n.stop()}},t)})),O.apply(this,arguments)}},20385:function(k,M,e){e.d(M,{Ah:function(){return K},Cq:function(){return z},V6:function(){return S},kE:function(){return $},tg:function(){return c},z3:function(){return P}});var x=e(15009),r=e.n(x),A=e(97857),o=e.n(A),d=e(99289),g=e.n(d),p=e(35312);function S(m,v,f){return Z.apply(this,arguments)}function Z(){return Z=g()(r()().mark(function m(v,f,i){return r()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",(0,p.request)("fileExplorer/list",o()({method:"GET",params:o()({type:Object.keys(f!=null?f:[]).length>0?f==null?void 0:f.join(","):""},v)},i||{})));case 1:case"end":return j.stop()}},m)})),Z.apply(this,arguments)}function K(m){return B.apply(this,arguments)}function B(){return B=g()(r()().mark(function m(v){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,p.request)("fileExplorer/delete-file-content/".concat(v),{method:"POST"}));case 1:case"end":return i.stop()}},m)})),B.apply(this,arguments)}function q(m){return U.apply(this,arguments)}function U(){return U=_asyncToGenerator(_regeneratorRuntime().mark(function m(v){return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",request("fileExplorer/delete-file-item",{method:"POST",data:v}));case 1:case"end":return i.stop()}},m)})),U.apply(this,arguments)}function z(m){return D.apply(this,arguments)}function D(){return D=g()(r()().mark(function m(v){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,p.request)("fileExplorer/".concat(v)));case 1:case"end":return i.stop()}},m)})),D.apply(this,arguments)}function P(m,v){return y.apply(this,arguments)}function y(){return y=g()(r()().mark(function m(v,f){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,p.request)("fileExplorer/file-items/".concat(f.id)));case 1:case"end":return _.stop()}},m)})),y.apply(this,arguments)}function $(m){return R.apply(this,arguments)}function R(){return R=g()(r()().mark(function m(v){var f;return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return f=new FormData,f.append("file",v),_.abrupt("return",(0,p.request)("fileExplorer/upload",{method:"POST",data:f}));case 3:case"end":return _.stop()}},m)})),R.apply(this,arguments)}function c(m){return L.apply(this,arguments)}function L(){return L=g()(r()().mark(function m(v){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,p.request)("fileexplorer/upload-from-url",{method:"POST",data:{url:v}}));case 1:case"end":return i.stop()}},m)})),L.apply(this,arguments)}},5251:function(k,M,e){e.d(M,{Er:function(){return o},p6:function(){return d}});var x=e(27484),r=e.n(x);function A(p){return p.trim()}function o(p){return new URL(p||"",localStorage.getItem("wf_URL")||"").href}function d(p){return p?r()(p).format("DD/MM/YYYY hh:mm:ss"):"-"}var g=function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(Z){setTimeout(function(){Z(!0)},S)})}}}]);
