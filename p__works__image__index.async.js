"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4165],{12873:function(J,C,e){var R=e(97857),l=e.n(R),M=e(20385),j=e(73403),T=e(88484),m=e(13728),f=e(99351),_=e(30029),g=e(22538),y=e(69677),E=e(27790),h=e(75527),n=e(31365),P=e(71577),O=e(62435),a=e(86074),p=y.Z.Search,U=function(t){var o=(0,O.useRef)(),u={name:"file",action:M.kE,onChange:function(r){if(r.file.status!=="uploading"&&console.log(r.file,r.fileList),r.file.status==="done"){var v;E.ZP.success("".concat(r.file.name," file uploaded successfully")),(v=o.current)===null||v===void 0||v.reload()}else r.file.status==="error"&&E.ZP.error("".concat(r.file.name," file upload failed."))}};return(0,a.jsxs)(f.Y,{title:"Select content",open:t.open,onOpenChange:t.onOpenChange,onFinish:t.onFinish,children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)(h.Z,{children:[(0,a.jsx)(h.Z.Item,{href:"",children:(0,a.jsx)(j.Z,{})}),(0,a.jsx)(h.Z.Item,{href:"",children:"Home"})]})}),(0,a.jsxs)(_.Z,{title:"List",extra:(0,a.jsx)(n.Z,l()(l()({},u),{},{children:(0,a.jsx)(P.Z,{icon:(0,a.jsx)(T.Z,{}),type:"primary",children:"Upload"})})),children:[(0,a.jsx)(p,{}),(0,a.jsx)(g.Rs,{request:M.V6,rowSelection:{},metas:{title:{dataIndex:"name",render:function(r,v){return(0,a.jsx)(P.Z,{type:"link",size:"small",onClick:function(){t.onSelect&&(v.url=new URL(v.url,localStorage.getItem("wf_URL")||"").href,t.onSelect(v))},children:r})}},actions:{render:function(){return(0,a.jsx)(P.Z,{icon:(0,a.jsx)(m.Z,{}),type:"link",size:"small"})}}},actionRef:o})]})]})};C.Z=U},99817:function(J,C,e){e.r(C),e.d(C,{default:function(){return ee}});var R=e(15009),l=e.n(R),M=e(99289),j=e.n(M),T=e(5574),m=e.n(T),f=e(30029),_=e(90905),g=e(78613),y=e(32983),E=e(96074),h=e(27511),n=e(86074),P=function(L){var D,N=["image/jpeg","image/png","image/webp"],b=(0,_.useIntl)(),i=L.file,F=function(){L.onChange&&L.onChange()},K=function(){var I;if(N.includes((I=i==null?void 0:i.type)!==null&&I!==void 0?I:"")){var H=new URL((i==null?void 0:i.url)||"",localStorage.getItem("wf_URL")||"").href;return(0,n.jsx)("div",{className:"flex justify-center items-center",style:{minHeight:130},children:(0,n.jsx)(g.Z,{src:H})})}return(0,n.jsx)("div",{onClick:F,children:(0,n.jsx)(y.Z,{})})};return(0,n.jsxs)(f.Z,{title:b.formatMessage({id:"general.preview"}),children:[K(),(0,n.jsx)(E.Z,{}),(0,n.jsxs)(h.Z,{title:"File info",column:1,children:[(0,n.jsx)(h.Z.Item,{label:"Name",children:i==null?void 0:i.name}),(0,n.jsxs)(h.Z.Item,{label:"Size",children:[(((D=i==null?void 0:i.size)!==null&&D!==void 0?D:0)/1024).toFixed(2)," KB"]}),(0,n.jsx)(h.Z.Item,{label:"Type",children:i==null?void 0:i.type})]})]})},O=P,a=e(12873),p=e(66352),U=e(48689),Z=e(82826),t=e(13728),o=e(62884),u=e(97269),s=e(5966),r=e(90672),v=e(31199),A=e(27790),X=e(26713),w=e(86738),z=e(71577),k=e(71230),Y=e(15746),W=e(62435),q=function(){var L=(0,_.useParams)(),D=L.id,N=(0,_.useIntl)(),b=(0,W.useState)(),i=m()(b,2),F=i[0],K=i[1],G=(0,W.useState)(!1),I=m()(G,2),H=I[0],V=I[1],Q=(0,W.useRef)(),re=function(){var d=j()(l()().mark(function c(x){var $;return l()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return x.fileContent=F,B.next=3,(0,p.DB)(x);case 3:$=B.sent,$.succeeded?A.ZP.success("Saved!"):A.ZP.error($.errors[0].description);case 5:case"end":return B.stop()}},c)}));return function(x){return d.apply(this,arguments)}}();(0,W.useEffect)(function(){(0,p.gJ)(D).then(function(d){var c;K(d.fileContent),(c=Q.current)===null||c===void 0||c.setFields([{name:"id",value:D},{name:"height",value:d.height},{name:"width",value:d.width},{name:"title",value:d.title},{name:"description",value:d.description},{name:"className",value:d.className}])})},[]);var te=function(){var d=j()(l()().mark(function c(){var x;return l()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,p.rB)(D);case 2:x=S.sent,x.succeeded?(A.ZP.success(N.formatMessage({id:"general.deleted"})),_.history.back()):A.ZP.error(x.errors[0].description);case 4:case"end":return S.stop()}},c)}));return function(){return d.apply(this,arguments)}}(),se=(0,n.jsxs)(X.Z,{children:[(0,n.jsx)(w.Z,{title:"Are you sure?",onConfirm:te,children:(0,n.jsx)(z.Z,{type:"primary",danger:!0,icon:(0,n.jsx)(U.Z,{}),children:"Delete"})}),(0,n.jsx)(z.Z,{icon:(0,n.jsx)(Z.Z,{}),onClick:function(){return _.history.back()},children:"Back"}),(0,n.jsx)(z.Z,{icon:(0,n.jsx)(t.Z,{})})]}),ae=function(c){K(c),V(!1)};return(0,n.jsxs)(o._z,{title:"Image",extra:se,children:[(0,n.jsxs)(k.Z,{gutter:16,children:[(0,n.jsx)(Y.Z,{span:6,children:(0,n.jsx)(O,{file:F,onChange:function(){return V(!0)}})}),(0,n.jsx)(Y.Z,{span:18,children:(0,n.jsx)(f.Z,{children:(0,n.jsxs)(u.A,{onFinish:re,formRef:Q,children:[(0,n.jsx)(s.Z,{name:"id",hidden:!0}),(0,n.jsx)(s.Z,{name:"title",label:"Title"}),(0,n.jsx)(r.Z,{name:"description",label:"Description"}),(0,n.jsx)(s.Z,{name:"className",label:"Class Name"}),(0,n.jsx)(v.Z,{label:"Width",name:"width"}),(0,n.jsx)(v.Z,{label:"Height",name:"height"})]})})})]}),(0,n.jsx)(a.Z,{open:H,onOpenChange:V,onSelect:ae})]})},ee=q},20385:function(J,C,e){e.d(C,{Ah:function(){return y},Cq:function(){return P},V6:function(){return _},kE:function(){return U},z3:function(){return a}});var R=e(15009),l=e.n(R),M=e(97857),j=e.n(M),T=e(99289),m=e.n(T),f=e(90905);function _(t,o){return g.apply(this,arguments)}function g(){return g=m()(l()().mark(function t(o,u){return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,f.request)("fileExplorer/list",j()({method:"GET",params:j()({},o)},u||{})));case 1:case"end":return r.stop()}},t)})),g.apply(this,arguments)}function y(t){return E.apply(this,arguments)}function E(){return E=m()(l()().mark(function t(o){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,f.request)("fileExplorer/delete-file-content/".concat(o),{method:"POST"}));case 1:case"end":return s.stop()}},t)})),E.apply(this,arguments)}function h(t){return n.apply(this,arguments)}function n(){return n=_asyncToGenerator(_regeneratorRuntime().mark(function t(o){return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",request("fileExplorer/delete-file-item",{method:"POST",data:o}));case 1:case"end":return s.stop()}},t)})),n.apply(this,arguments)}function P(t){return O.apply(this,arguments)}function O(){return O=m()(l()().mark(function t(o){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,f.request)("fileExplorer/".concat(o)));case 1:case"end":return s.stop()}},t)})),O.apply(this,arguments)}function a(t,o){return p.apply(this,arguments)}function p(){return p=m()(l()().mark(function t(o,u){return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,f.request)("fileExplorer/file-items/".concat(u.id)));case 1:case"end":return r.stop()}},t)})),p.apply(this,arguments)}function U(t){return Z.apply(this,arguments)}function Z(){return Z=m()(l()().mark(function t(o){var u;return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u=new FormData,u.append("file",o),r.abrupt("return",(0,f.request)("fileExplorer/upload",{method:"POST",data:u}));case 3:case"end":return r.stop()}},t)})),Z.apply(this,arguments)}}}]);
