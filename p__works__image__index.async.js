"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4165],{12873:function(X,Z,e){var S=e(97857),s=e.n(S),I=e(20385),D=e(73403),A=e(88484),v=e(99611),h=e(48689),R=e(13728),m=e(99351),B=e(22538),E=e(90905),g=e(27790),p=e(75527),j=e(31365),r=e(71577),O=e(26713),P=e(13013),L=e(86738),_=e(62435),n=e(86074),i=function(t){var a=(0,E.useIntl)(),y=(0,_.useRef)(),H={name:"file",action:I.kE,onChange:function(o){if(o.file.status!=="uploading"&&console.log(o.file,o.fileList),o.file.status==="done"){var u;g.ZP.success("".concat(o.file.name," file uploaded successfully")),(u=y.current)===null||u===void 0||u.reload()}else o.file.status==="error"&&g.ZP.error("".concat(o.file.name," file upload failed."))}};return(0,n.jsxs)(m.Y,{title:"Select content",open:t.open,onOpenChange:t.onOpenChange,onFinish:t.onFinish,children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsxs)(p.Z,{children:[(0,n.jsx)(p.Z.Item,{href:"",children:(0,n.jsx)(D.Z,{})}),(0,n.jsx)(p.Z.Item,{href:"",children:"Home"})]})}),(0,n.jsx)(B.Rs,{toolBarRender:function(){return[(0,_.createElement)(j.Z,s()(s()({},H),{},{key:0}),(0,n.jsx)(r.Z,{icon:(0,n.jsx)(A.Z,{}),type:"primary",children:"Upload"}))]},headerTitle:a.formatMessage({id:"menu.fileManager"}),request:I.V6,rowSelection:{},search:{layout:"vertical"},pagination:{pageSize:5},metas:{title:{dataIndex:"name",title:"Name",render:function(o,u){return(0,n.jsx)("a",{onClick:function(){t.onSelect&&(u.url=new URL(u.url,localStorage.getItem("wf_URL")||"").href,t.onSelect(u))},children:o})}},description:{search:!1,render:function(o,u){return(0,n.jsxs)(O.Z,{children:[(0,n.jsx)("span",{children:u.type}),(0,n.jsx)("span",{children:"|"}),(0,n.jsxs)("span",{children:[(u.size/1024).toFixed(2)," KB"]})]})}},actions:{render:function(o,u){return(0,n.jsx)(P.Z,{menu:{items:[{key:1,label:(0,n.jsxs)(O.Z,{onClick:function(){return E.history.push("/files/center/".concat(u.id))},children:[(0,n.jsx)(v.Z,{}),(0,n.jsx)(E.FormattedMessage,{id:"general.preview"})]})},{key:2,label:(0,n.jsx)(L.Z,{title:"Are you sure?",children:(0,n.jsxs)(O.Z,{children:[(0,n.jsx)(h.Z,{}),"Delete"]})}),danger:!0}]},children:(0,n.jsx)(r.Z,{icon:(0,n.jsx)(R.Z,{}),type:"link",size:"small"})})}}},actionRef:y})]})};Z.Z=i},99817:function(X,Z,e){e.r(Z),e.d(Z,{default:function(){return ne}});var S=e(15009),s=e.n(S),I=e(99289),D=e.n(I),A=e(5574),v=e.n(A),h=e(23430),R=e(30029),m=e(90905),B=e(78613),E=e(32983),g=e(71577),p=e(96074),j=e(27511),r=e(86074),O=function(W){var C,N=["image/jpeg","image/png","image/webp"],J=(0,m.useIntl)(),l=W.file,G=function(){W.onChange&&W.onChange()},K=function(){return new URL((l==null?void 0:l.url)||"",localStorage.getItem("wf_URL")||"").href},Y=function(){var F;return N.includes((F=l==null?void 0:l.type)!==null&&F!==void 0?F:"")?(0,r.jsx)("div",{className:"flex justify-center items-center",style:{minHeight:130},children:(0,r.jsx)(B.Z,{src:K()})}):(0,r.jsx)("div",{onClick:G,children:(0,r.jsx)(E.Z,{})})};return(0,r.jsxs)(R.Z,{title:J.formatMessage({id:"general.preview"}),extra:(0,r.jsx)(g.Z,{type:"dashed",icon:(0,r.jsx)(h.Z,{}),onClick:function(){return window.location.href=K()},children:"Download"}),children:[Y(),(0,r.jsx)(p.Z,{}),(0,r.jsxs)(j.Z,{title:"File info",column:1,children:[(0,r.jsx)(j.Z.Item,{label:"Name",children:l==null?void 0:l.name}),(0,r.jsxs)(j.Z.Item,{label:"Size",children:[(((C=l==null?void 0:l.size)!==null&&C!==void 0?C:0)/1024).toFixed(2)," KB"]}),(0,r.jsx)(j.Z.Item,{label:"Type",children:l==null?void 0:l.type})]})]})},P=O,L=e(12873),_=e(66352),n=e(48689),i=e(82826),d=e(13728),t=e(62884),a=e(97269),y=e(5966),H=e(90672),x=e(31199),o=e(27790),u=e(26713),V=e(86738),q=e(71230),w=e(15746),z=e(62435),ee=function(){var W=(0,m.useParams)(),C=W.id,N=(0,m.useIntl)(),J=(0,z.useState)(),l=v()(J,2),G=l[0],K=l[1],Y=(0,z.useState)(!1),T=v()(Y,2),F=T[0],Q=T[1],k=(0,z.useRef)(),te=function(){var c=D()(s()().mark(function f(M){var b;return s()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return M.fileContent=G,$.next=3,(0,_.DB)(M);case 3:b=$.sent,b.succeeded?o.ZP.success("Saved!"):o.ZP.error(b.errors[0].description);case 5:case"end":return $.stop()}},f)}));return function(M){return c.apply(this,arguments)}}();(0,z.useEffect)(function(){(0,_.gJ)(C).then(function(c){var f;K(c.fileContent),(f=k.current)===null||f===void 0||f.setFields([{name:"id",value:C},{name:"height",value:c.height},{name:"width",value:c.width},{name:"title",value:c.title},{name:"description",value:c.description},{name:"className",value:c.className}])})},[]);var se=function(){var c=D()(s()().mark(function f(){var M;return s()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,_.rB)(C);case 2:M=U.sent,M.succeeded?(o.ZP.success(N.formatMessage({id:"general.deleted"})),m.history.back()):o.ZP.error(M.errors[0].description);case 4:case"end":return U.stop()}},f)}));return function(){return c.apply(this,arguments)}}(),ae=(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(V.Z,{title:"Are you sure?",onConfirm:se,children:(0,r.jsx)(g.Z,{type:"primary",danger:!0,icon:(0,r.jsx)(n.Z,{}),children:"Delete"})}),(0,r.jsx)(g.Z,{icon:(0,r.jsx)(i.Z,{}),onClick:function(){return m.history.back()},children:"Back"}),(0,r.jsx)(g.Z,{icon:(0,r.jsx)(d.Z,{})})]}),le=function(f){K(f),Q(!1)};return(0,r.jsxs)(t._z,{title:"Image",extra:ae,children:[(0,r.jsxs)(q.Z,{gutter:16,children:[(0,r.jsx)(w.Z,{span:6,children:(0,r.jsx)(P,{file:G,onChange:function(){return Q(!0)}})}),(0,r.jsx)(w.Z,{span:18,children:(0,r.jsx)(R.Z,{title:N.formatMessage({id:"menu.settings"}),children:(0,r.jsxs)(a.A,{onFinish:te,formRef:k,children:[(0,r.jsx)(y.Z,{name:"id",hidden:!0}),(0,r.jsx)(y.Z,{name:"title",label:"Title"}),(0,r.jsx)(H.Z,{name:"description",label:"Description"}),(0,r.jsx)(y.Z,{name:"className",label:"Class Name"}),(0,r.jsx)(x.Z,{label:"Width",name:"width"}),(0,r.jsx)(x.Z,{label:"Height",name:"height"})]})})})]}),(0,r.jsx)(L.Z,{open:F,onOpenChange:Q,onSelect:le})]})},ne=ee},20385:function(X,Z,e){e.d(Z,{Ah:function(){return B},Cq:function(){return j},V6:function(){return R},kE:function(){return L},z3:function(){return O}});var S=e(15009),s=e.n(S),I=e(97857),D=e.n(I),A=e(99289),v=e.n(A),h=e(90905);function R(n,i){return m.apply(this,arguments)}function m(){return m=v()(s()().mark(function n(i,d){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,h.request)("fileExplorer/list",D()({method:"GET",params:D()({},i)},d||{})));case 1:case"end":return a.stop()}},n)})),m.apply(this,arguments)}function B(n){return E.apply(this,arguments)}function E(){return E=v()(s()().mark(function n(i){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,h.request)("fileExplorer/delete-file-content/".concat(i),{method:"POST"}));case 1:case"end":return t.stop()}},n)})),E.apply(this,arguments)}function g(n){return p.apply(this,arguments)}function p(){return p=_asyncToGenerator(_regeneratorRuntime().mark(function n(i){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("fileExplorer/delete-file-item",{method:"POST",data:i}));case 1:case"end":return t.stop()}},n)})),p.apply(this,arguments)}function j(n){return r.apply(this,arguments)}function r(){return r=v()(s()().mark(function n(i){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,h.request)("fileExplorer/".concat(i)));case 1:case"end":return t.stop()}},n)})),r.apply(this,arguments)}function O(n,i){return P.apply(this,arguments)}function P(){return P=v()(s()().mark(function n(i,d){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,h.request)("fileExplorer/file-items/".concat(d.id)));case 1:case"end":return a.stop()}},n)})),P.apply(this,arguments)}function L(n){return _.apply(this,arguments)}function _(){return _=v()(s()().mark(function n(i){var d;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=new FormData,d.append("file",i),a.abrupt("return",(0,h.request)("fileExplorer/upload",{method:"POST",data:d}));case 3:case"end":return a.stop()}},n)})),_.apply(this,arguments)}}}]);
