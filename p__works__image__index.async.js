"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4165],{12873:function(X,M,e){var S=e(97857),s=e.n(S),Z=e(20385),P=e(73403),U=e(88484),f=e(99611),v=e(48689),_=e(13728),D=e(99351),A=e(22538),h=e(90905),p=e(27790),r=e(75527),B=e(31365),j=e(71577),O=e(26713),E=e(13013),L=e(86738),g=e(62435),n=e(86074),i=function(t){var a=(0,h.useIntl)(),W=(0,g.useRef)(),I={name:"file",action:Z.kE,onChange:function(d){if(d.file.status!=="uploading"&&console.log(d.file,d.fileList),d.file.status==="done"){var o;p.ZP.success("".concat(d.file.name," file uploaded successfully")),(o=W.current)===null||o===void 0||o.reload()}else d.file.status==="error"&&p.ZP.error("".concat(d.file.name," file upload failed."))}};return(0,n.jsxs)(D.Y,{title:"Select content",open:t.open,onOpenChange:t.onOpenChange,onFinish:t.onFinish,children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsxs)(r.Z,{children:[(0,n.jsx)(r.Z.Item,{href:"",children:(0,n.jsx)(P.Z,{})}),(0,n.jsx)(r.Z.Item,{href:"",children:"Home"})]})}),(0,n.jsx)(A.Rs,{toolBarRender:function(){return[(0,g.createElement)(B.Z,s()(s()({},I),{},{key:0}),(0,n.jsx)(j.Z,{icon:(0,n.jsx)(U.Z,{}),type:"primary",children:"Upload"}))]},headerTitle:a.formatMessage({id:"menu.fileManager"}),request:Z.V6,rowSelection:{},search:{layout:"vertical"},pagination:{pageSize:5},metas:{title:{dataIndex:"name",title:"Name",render:function(d,o){return(0,n.jsx)("a",{onClick:function(){t.onSelect&&(o.url=new URL(o.url,localStorage.getItem("wf_URL")||"").href,t.onSelect(o))},children:d})}},description:{search:!1,render:function(d,o){return(0,n.jsxs)(O.Z,{children:[(0,n.jsx)("span",{children:o.type}),(0,n.jsx)("span",{children:"|"}),(0,n.jsxs)("span",{children:[(o.size/1024).toFixed(2)," KB"]})]})}},actions:{render:function(d,o){return(0,n.jsx)(E.Z,{menu:{items:[{key:1,label:(0,n.jsxs)(O.Z,{onClick:function(){return h.history.push("/files/center/".concat(o.id))},children:[(0,n.jsx)(f.Z,{}),(0,n.jsx)(h.FormattedMessage,{id:"general.preview"})]})},{key:2,label:(0,n.jsx)(L.Z,{title:"Are you sure?",children:(0,n.jsxs)(O.Z,{children:[(0,n.jsx)(v.Z,{}),"Delete"]})}),danger:!0}]},children:(0,n.jsx)(j.Z,{icon:(0,n.jsx)(_.Z,{}),type:"link",size:"small"})})}}},actionRef:W})]})};M.Z=i},99817:function(X,M,e){e.r(M),e.d(M,{default:function(){return ee}});var S=e(15009),s=e.n(S),Z=e(99289),P=e.n(Z),U=e(5574),f=e.n(U),v=e(30029),_=e(90905),D=e(78613),A=e(32983),h=e(96074),p=e(27511),r=e(86074),B=function(K){var x,H=["image/jpeg","image/png","image/webp"],V=(0,_.useIntl)(),l=K.file,z=function(){K.onChange&&K.onChange()},N=function(){var T;if(H.includes((T=l==null?void 0:l.type)!==null&&T!==void 0?T:"")){var Y=new URL((l==null?void 0:l.url)||"",localStorage.getItem("wf_URL")||"").href;return(0,r.jsx)("div",{className:"flex justify-center items-center",style:{minHeight:130},children:(0,r.jsx)(D.Z,{src:Y})})}return(0,r.jsx)("div",{onClick:z,children:(0,r.jsx)(A.Z,{})})};return(0,r.jsxs)(v.Z,{title:V.formatMessage({id:"general.preview"}),children:[N(),(0,r.jsx)(h.Z,{}),(0,r.jsxs)(p.Z,{title:"File info",column:1,children:[(0,r.jsx)(p.Z.Item,{label:"Name",children:l==null?void 0:l.name}),(0,r.jsxs)(p.Z.Item,{label:"Size",children:[(((x=l==null?void 0:l.size)!==null&&x!==void 0?x:0)/1024).toFixed(2)," KB"]}),(0,r.jsx)(p.Z.Item,{label:"Type",children:l==null?void 0:l.type})]})]})},j=B,O=e(12873),E=e(66352),L=e(48689),g=e(82826),n=e(13728),i=e(62884),u=e(97269),t=e(5966),a=e(90672),W=e(31199),I=e(27790),R=e(26713),d=e(86738),o=e(71577),b=e(71230),w=e(15746),$=e(62435),q=function(){var K=(0,_.useParams)(),x=K.id,H=(0,_.useIntl)(),V=(0,$.useState)(),l=f()(V,2),z=l[0],N=l[1],J=(0,$.useState)(!1),T=f()(J,2),Y=T[0],Q=T[1],k=(0,$.useRef)(),re=function(){var c=P()(s()().mark(function m(C){var G;return s()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return C.fileContent=z,F.next=3,(0,E.DB)(C);case 3:G=F.sent,G.succeeded?I.ZP.success("Saved!"):I.ZP.error(G.errors[0].description);case 5:case"end":return F.stop()}},m)}));return function(C){return c.apply(this,arguments)}}();(0,$.useEffect)(function(){(0,E.gJ)(x).then(function(c){var m;N(c.fileContent),(m=k.current)===null||m===void 0||m.setFields([{name:"id",value:x},{name:"height",value:c.height},{name:"width",value:c.width},{name:"title",value:c.title},{name:"description",value:c.description},{name:"className",value:c.className}])})},[]);var te=function(){var c=P()(s()().mark(function m(){var C;return s()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,E.rB)(x);case 2:C=y.sent,C.succeeded?(I.ZP.success(H.formatMessage({id:"general.deleted"})),_.history.back()):I.ZP.error(C.errors[0].description);case 4:case"end":return y.stop()}},m)}));return function(){return c.apply(this,arguments)}}(),se=(0,r.jsxs)(R.Z,{children:[(0,r.jsx)(d.Z,{title:"Are you sure?",onConfirm:te,children:(0,r.jsx)(o.Z,{type:"primary",danger:!0,icon:(0,r.jsx)(L.Z,{}),children:"Delete"})}),(0,r.jsx)(o.Z,{icon:(0,r.jsx)(g.Z,{}),onClick:function(){return _.history.back()},children:"Back"}),(0,r.jsx)(o.Z,{icon:(0,r.jsx)(n.Z,{})})]}),ae=function(m){N(m),Q(!1)};return(0,r.jsxs)(i._z,{title:"Image",extra:se,children:[(0,r.jsxs)(b.Z,{gutter:16,children:[(0,r.jsx)(w.Z,{span:6,children:(0,r.jsx)(j,{file:z,onChange:function(){return Q(!0)}})}),(0,r.jsx)(w.Z,{span:18,children:(0,r.jsx)(v.Z,{children:(0,r.jsxs)(u.A,{onFinish:re,formRef:k,children:[(0,r.jsx)(t.Z,{name:"id",hidden:!0}),(0,r.jsx)(t.Z,{name:"title",label:"Title"}),(0,r.jsx)(a.Z,{name:"description",label:"Description"}),(0,r.jsx)(t.Z,{name:"className",label:"Class Name"}),(0,r.jsx)(W.Z,{label:"Width",name:"width"}),(0,r.jsx)(W.Z,{label:"Height",name:"height"})]})})})]}),(0,r.jsx)(O.Z,{open:Y,onOpenChange:Q,onSelect:ae})]})},ee=q},20385:function(X,M,e){e.d(M,{Ah:function(){return A},Cq:function(){return B},V6:function(){return _},kE:function(){return L},z3:function(){return O}});var S=e(15009),s=e.n(S),Z=e(97857),P=e.n(Z),U=e(99289),f=e.n(U),v=e(90905);function _(n,i){return D.apply(this,arguments)}function D(){return D=f()(s()().mark(function n(i,u){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,v.request)("fileExplorer/list",P()({method:"GET",params:P()({},i)},u||{})));case 1:case"end":return a.stop()}},n)})),D.apply(this,arguments)}function A(n){return h.apply(this,arguments)}function h(){return h=f()(s()().mark(function n(i){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,v.request)("fileExplorer/delete-file-content/".concat(i),{method:"POST"}));case 1:case"end":return t.stop()}},n)})),h.apply(this,arguments)}function p(n){return r.apply(this,arguments)}function r(){return r=_asyncToGenerator(_regeneratorRuntime().mark(function n(i){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("fileExplorer/delete-file-item",{method:"POST",data:i}));case 1:case"end":return t.stop()}},n)})),r.apply(this,arguments)}function B(n){return j.apply(this,arguments)}function j(){return j=f()(s()().mark(function n(i){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,v.request)("fileExplorer/".concat(i)));case 1:case"end":return t.stop()}},n)})),j.apply(this,arguments)}function O(n,i){return E.apply(this,arguments)}function E(){return E=f()(s()().mark(function n(i,u){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,v.request)("fileExplorer/file-items/".concat(u.id)));case 1:case"end":return a.stop()}},n)})),E.apply(this,arguments)}function L(n){return g.apply(this,arguments)}function g(){return g=f()(s()().mark(function n(i){var u;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return u=new FormData,u.append("file",i),a.abrupt("return",(0,v.request)("fileExplorer/upload",{method:"POST",data:u}));case 3:case"end":return a.stop()}},n)})),g.apply(this,arguments)}}}]);
