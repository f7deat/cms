"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[165],{12873:function(H,x,e){var S=e(97857),l=e.n(S),M=e(20385),g=e(73403),T=e(88484),f=e(13728),v=e(99351),_=e(30029),j=e(22538),y=e(69677),E=e(27790),h=e(75527),n=e(31365),P=e(71577),D=e(62435),a=e(86074),p=y.Z.Search,U=function(t){var o=(0,D.useRef)(),u={name:"file",action:M.kE,onChange:function(r){if(r.file.status!=="uploading"&&console.log(r.file,r.fileList),r.file.status==="done"){var d;E.ZP.success("".concat(r.file.name," file uploaded successfully")),(d=o.current)===null||d===void 0||d.reload()}else r.file.status==="error"&&E.ZP.error("".concat(r.file.name," file upload failed."))}};return(0,a.jsxs)(v.Y,{title:"Select content",open:t.open,onOpenChange:t.onOpenChange,onFinish:t.onFinish,children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)(h.Z,{children:[(0,a.jsx)(h.Z.Item,{href:"",children:(0,a.jsx)(g.Z,{})}),(0,a.jsx)(h.Z.Item,{href:"",children:"Home"})]})}),(0,a.jsxs)(_.Z,{title:"List",extra:(0,a.jsx)(n.Z,l()(l()({},u),{},{children:(0,a.jsx)(P.Z,{icon:(0,a.jsx)(T.Z,{}),type:"primary",children:"Upload"})})),children:[(0,a.jsx)(p,{}),(0,a.jsx)(j.Rs,{request:M.V6,metas:{title:{dataIndex:"name",render:function(r,d){return(0,a.jsx)(P.Z,{type:"link",size:"small",onClick:function(){t.onSelect&&(d.url=new URL(d.url,localStorage.getItem("wf_URL")||"").href,t.onSelect(d))},children:r})}},actions:{render:function(){return(0,a.jsx)(P.Z,{icon:(0,a.jsx)(f.Z,{}),type:"link",size:"small"})}}},actionRef:o})]})]})};x.Z=U},99817:function(H,x,e){e.r(x),e.d(x,{default:function(){return q}});var S=e(15009),l=e.n(S),M=e(99289),g=e.n(M),T=e(5574),f=e.n(T),v=e(30029),_=e(90905),j=e(78613),y=e(32983),E=e(96074),h=e(27511),n=e(86074),P=function(A){var O,$=["image/jpeg","image/png","image/webp"],b=(0,_.useIntl)(),i=A.file,W=function(){A.onChange&&A.onChange()},F=function(){var I;if($.includes((I=i==null?void 0:i.type)!==null&&I!==void 0?I:"")){var N=new URL((i==null?void 0:i.url)||"",localStorage.getItem("wf_URL")||"").href;return(0,n.jsx)("div",{className:"flex justify-center items-center",style:{minHeight:130},children:(0,n.jsx)(j.Z,{src:N})})}return(0,n.jsx)("div",{onClick:W,children:(0,n.jsx)(y.Z,{})})};return(0,n.jsxs)(v.Z,{title:b.formatMessage({id:"general.preview"}),children:[F(),(0,n.jsx)(E.Z,{}),(0,n.jsxs)(h.Z,{title:"File info",column:1,children:[(0,n.jsx)(h.Z.Item,{label:"Name",children:i==null?void 0:i.name}),(0,n.jsxs)(h.Z.Item,{label:"Size",children:[(((O=i==null?void 0:i.size)!==null&&O!==void 0?O:0)/1024).toFixed(2)," KB"]}),(0,n.jsx)(h.Z.Item,{label:"Type",children:i==null?void 0:i.type})]})]})},D=P,a=e(12873),p=e(66352),U=e(48689),Z=e(82826),t=e(62884),o=e(97269),u=e(5966),s=e(90672),r=e(31199),d=e(27790),V=e(26713),X=e(86738),J=e(71577),w=e(71230),Y=e(15746),B=e(62435),k=function(){var A=(0,_.useParams)(),O=A.id,$=(0,_.useIntl)(),b=(0,B.useState)(),i=f()(b,2),W=i[0],F=i[1],z=(0,B.useState)(!1),I=f()(z,2),N=I[0],G=I[1],Q=(0,B.useRef)(),ne=function(){var c=g()(l()().mark(function m(C){var K;return l()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return C.fileContent=W,L.next=3,(0,p.DB)(C);case 3:K=L.sent,K.succeeded?d.ZP.success("Saved!"):d.ZP.error(K.errors[0].description);case 5:case"end":return L.stop()}},m)}));return function(C){return c.apply(this,arguments)}}();(0,B.useEffect)(function(){(0,p.gJ)(O).then(function(c){var m;F(c.fileContent),(m=Q.current)===null||m===void 0||m.setFields([{name:"id",value:O},{name:"height",value:c.height},{name:"width",value:c.width},{name:"alt",value:c.alt},{name:"className",value:c.className}])})},[]);var re=function(){var c=g()(l()().mark(function m(){var C;return l()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,(0,p.rB)(O);case 2:C=R.sent,C.succeeded?(d.ZP.success($.formatMessage({id:"general.deleted"})),_.history.back()):d.ZP.error(C.errors[0].description);case 4:case"end":return R.stop()}},m)}));return function(){return c.apply(this,arguments)}}(),te=(0,n.jsxs)(V.Z,{children:[(0,n.jsx)(X.Z,{title:"Are you sure?",onConfirm:re,children:(0,n.jsx)(J.Z,{type:"primary",danger:!0,icon:(0,n.jsx)(U.Z,{}),children:"Delete"})}),(0,n.jsx)(J.Z,{icon:(0,n.jsx)(Z.Z,{}),onClick:function(){return _.history.back()},children:"Back"})]}),se=function(m){F(m),G(!1)};return(0,n.jsxs)(t._z,{title:"Image",extra:te,children:[(0,n.jsxs)(w.Z,{gutter:16,children:[(0,n.jsx)(Y.Z,{span:6,children:(0,n.jsx)(D,{file:W,onChange:function(){return G(!0)}})}),(0,n.jsx)(Y.Z,{span:18,children:(0,n.jsx)(v.Z,{children:(0,n.jsxs)(o.A,{onFinish:ne,formRef:Q,children:[(0,n.jsx)(u.Z,{name:"id",hidden:!0}),(0,n.jsx)(u.Z,{name:"alt",label:"Title"}),(0,n.jsx)(s.Z,{name:"description",label:"Description"}),(0,n.jsx)(u.Z,{name:"className",label:"Class Name"}),(0,n.jsx)(r.Z,{label:"Width",name:"width"}),(0,n.jsx)(r.Z,{label:"Height",name:"height"})]})})})]}),(0,n.jsx)(a.Z,{open:N,onOpenChange:G,onSelect:se})]})},q=k},20385:function(H,x,e){e.d(x,{Ah:function(){return y},Cq:function(){return P},V6:function(){return _},kE:function(){return U},z3:function(){return a}});var S=e(15009),l=e.n(S),M=e(97857),g=e.n(M),T=e(99289),f=e.n(T),v=e(90905);function _(t,o){return j.apply(this,arguments)}function j(){return j=f()(l()().mark(function t(o,u){return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,v.request)("fileExplorer/list",g()({method:"GET",params:g()({},o)},u||{})));case 1:case"end":return r.stop()}},t)})),j.apply(this,arguments)}function y(t){return E.apply(this,arguments)}function E(){return E=f()(l()().mark(function t(o){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,v.request)("fileExplorer/delete-file-content/".concat(o),{method:"POST"}));case 1:case"end":return s.stop()}},t)})),E.apply(this,arguments)}function h(t){return n.apply(this,arguments)}function n(){return n=_asyncToGenerator(_regeneratorRuntime().mark(function t(o){return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",request("fileExplorer/delete-file-item",{method:"POST",data:o}));case 1:case"end":return s.stop()}},t)})),n.apply(this,arguments)}function P(t){return D.apply(this,arguments)}function D(){return D=f()(l()().mark(function t(o){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,v.request)("fileExplorer/".concat(o)));case 1:case"end":return s.stop()}},t)})),D.apply(this,arguments)}function a(t,o){return p.apply(this,arguments)}function p(){return p=f()(l()().mark(function t(o,u){return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,v.request)("fileExplorer/file-items/".concat(u.id)));case 1:case"end":return r.stop()}},t)})),p.apply(this,arguments)}function U(t){return Z.apply(this,arguments)}function Z(){return Z=f()(l()().mark(function t(o){var u;return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u=new FormData,u.append("file",o),r.abrupt("return",(0,v.request)("fileExplorer/upload",{method:"POST",data:u}));case 3:case"end":return r.stop()}},t)})),Z.apply(this,arguments)}}}]);
