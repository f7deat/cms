"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4165],{19489:function($,M,e){var g=e(5251),_=e(69753),U=e(28199),f=e(35312),C=e(32545),c=e(32983),i=e(71577),R=e(96074),m=e(26412),d=e(86074),I=function(v){var T,O=["image/jpeg","image/png","image/webp",".svg",".jpg",".png",".jpeg"],j=(0,f.useIntl)(),s=v.file,A=function(){v.onChange&&v.onChange()},p=function(){var o;return O.includes((o=s==null?void 0:s.type)!==null&&o!==void 0?o:"")?(0,d.jsx)("div",{className:"flex justify-center items-center",style:{minHeight:130},children:(0,d.jsx)(C.Z,{src:(0,g.Er)(s==null?void 0:s.url)})}):(0,d.jsx)("div",{onClick:A,children:(0,d.jsx)(c.Z,{})})};return(0,d.jsxs)(U.Z,{title:j.formatMessage({id:"general.preview"}),extra:(0,d.jsx)(i.ZP,{type:"dashed",icon:(0,d.jsx)(_.Z,{}),onClick:function(){return window.location.href=(0,g.Er)(s==null?void 0:s.url)},children:"Download"}),children:[p(),(0,d.jsx)(R.Z,{}),(0,d.jsxs)(m.Z,{title:"File info",column:1,children:[(0,d.jsx)(m.Z.Item,{label:"Name",children:s==null?void 0:s.name}),(0,d.jsxs)(m.Z.Item,{label:"Size",children:[(((T=s==null?void 0:s.size)!==null&&T!==void 0?T:0)/1024).toFixed(2)," KB"]}),(0,d.jsx)(m.Z.Item,{label:"Type",children:s==null?void 0:s.type})]})]})};M.Z=I},99270:function($,M,e){var g=e(97857),_=e.n(g),U=e(15009),f=e.n(U),C=e(99289),c=e.n(C),i=e(20385),R=e(5251),m=e(88484),d=e(34994),I=e(5966),b=e(37476),v=e(16309),T=e(35312),O=e(58301),j=e(65419),s=e(71577),A=e(55241),p=e(32545),D=e(62435),o=e(86074),F=function(B){var W=(0,T.useIntl)(),r=(0,D.useRef)(),n={name:"file",action:i.kE,accept:"image/png, image/jpeg",onChange:function(l){if(l.file.status!=="uploading"&&console.log(l.file,l.fileList),l.file.status==="done"){var P;O.ZP.success("".concat(l.file.name," file uploaded successfully")),(P=r.current)===null||P===void 0||P.reload()}else l.file.status==="error"&&O.ZP.error("".concat(l.file.name," file upload failed."))}},t=function(){var u=c()(f()().mark(function l(P){var G,Z;return f()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,i.tg)(P.url);case 2:G=K.sent,G.succeeded&&(O.ZP.success("Uploaded!"),(Z=r.current)===null||Z===void 0||Z.reload());case 4:case"end":return K.stop()}},l)}));return function(P){return u.apply(this,arguments)}}(),a=(0,o.jsx)(d.A,{onFinish:t,children:(0,o.jsx)(I.Z,{name:"url",rules:[{required:!0}],placeholder:"URL"})});return(0,o.jsx)(b.Y,{open:B.open,onOpenChange:B.onOpenChange,children:(0,o.jsx)(v.Rs,{ghost:!0,toolBarRender:function(){return[(0,D.createElement)(j.Z,_()(_()({},n),{},{key:0}),(0,o.jsx)(s.ZP,{icon:(0,o.jsx)(m.Z,{}),type:"primary",children:"Upload"})),(0,o.jsx)(A.Z,{trigger:"click",content:a,title:"Upload Via URL",children:(0,o.jsx)(s.ZP,{icon:(0,o.jsx)(m.Z,{}),onClick:t,children:"Via URL"})},2)]},headerTitle:W.formatMessage({id:"menu.fileManager"}),request:function(l){return(0,i.V6)(_()({},l),[".png",".jpg",".jpeg","image/jpeg"])},search:{layout:"vertical"},pagination:{pageSize:6},grid:{column:3},onItem:function(l){return{onClick:function(){B.onSelect&&B.onSelect(l)}}},metas:{content:{dataIndex:"name",title:"Name",render:function(l,P){return(0,o.jsx)(p.Z,{src:(0,R.Er)(P.url),height:100,preview:!1})}}},actionRef:r})})};M.Z=F},28301:function($,M,e){e.r(M);var g=e(15009),_=e.n(g),U=e(99289),f=e.n(U),C=e(5574),c=e.n(C),i=e(19489),R=e(99270),m=e(66352),d=e(82061),I=e(82826),b=e(14361),v=e(63386),T=e(28199),O=e(34994),j=e(5966),s=e(90672),A=e(31199),p=e(35312),D=e(58301),o=e(93421),F=e(86738),L=e(71577),B=e(71230),W=e(15746),r=e(62435),n=e(86074),t=function(){var u=(0,p.useParams)(),l=u.id,P=(0,p.useIntl)(),G=(0,r.useState)(),Z=c()(G,2),N=Z[0],K=Z[1],J=(0,r.useState)(!1),Y=c()(J,2),w=Y[0],V=Y[1],H=(0,r.useRef)(),Q=function(){var E=f()(_()().mark(function h(y){var z;return _()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return y.file=N,S.next=3,(0,m.DB)(y);case 3:z=S.sent,z.succeeded?D.ZP.success("Saved!"):D.ZP.error(z.errors[0].description);case 5:case"end":return S.stop()}},h)}));return function(y){return E.apply(this,arguments)}}();(0,r.useEffect)(function(){(0,m.gJ)(l).then(function(E){var h;K(E.file),(h=H.current)===null||h===void 0||h.setFields([{name:"height",value:E.height},{name:"width",value:E.width},{name:"alt",value:E.alt},{name:"description",value:E.description},{name:"className",value:E.className},{name:"wrapper",value:E.wrapper}])})},[]);var X=function(){var E=f()(_()().mark(function h(){var y;return _()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,m.Js)(l);case 2:y=x.sent,y.succeeded?(D.ZP.success(P.formatMessage({id:"general.deleted"})),p.history.back()):D.ZP.error(y.errors[0].description);case 4:case"end":return x.stop()}},h)}));return function(){return E.apply(this,arguments)}}(),k=(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(F.Z,{title:"Are you sure?",onConfirm:X,children:(0,n.jsx)(L.ZP,{type:"primary",danger:!0,icon:(0,n.jsx)(d.Z,{}),children:"Delete"})}),(0,n.jsx)(L.ZP,{icon:(0,n.jsx)(I.Z,{}),onClick:function(){return p.history.back()},children:"Back"}),(0,n.jsx)(L.ZP,{icon:(0,n.jsx)(b.Z,{})})]}),q=function(h){K(h),V(!1)};return(0,n.jsxs)(v._z,{title:"Image",extra:k,children:[(0,n.jsxs)(B.Z,{gutter:16,children:[(0,n.jsx)(W.Z,{span:6,children:(0,n.jsx)(i.Z,{file:N,onChange:function(){return V(!0)}})}),(0,n.jsx)(W.Z,{span:18,children:(0,n.jsx)(T.Z,{title:P.formatMessage({id:"menu.settings"}),children:(0,n.jsxs)(O.A,{onFinish:Q,formRef:H,children:[(0,n.jsx)(j.Z,{name:"id",hidden:!0,initialValue:l}),(0,n.jsx)(j.Z,{name:"alt",label:"Alt"}),(0,n.jsx)(s.Z,{name:"description",label:"Description"}),(0,n.jsx)(j.Z,{name:"className",label:"Class Name"}),(0,n.jsx)(A.Z,{label:"Width",name:"width"}),(0,n.jsx)(A.Z,{label:"Height",name:"height"}),(0,n.jsx)(j.Z,{label:"Wrapper",name:"wrapper"})]})})})]}),(0,n.jsx)(R.Z,{open:w,onOpenChange:V,onSelect:q})]})};M.default=t},20385:function($,M,e){e.d(M,{Ah:function(){return d},Cq:function(){return T},V6:function(){return R},kE:function(){return A},p6:function(){return B},tg:function(){return D},yk:function(){return F},z3:function(){return j}});var g=e(15009),_=e.n(g),U=e(97857),f=e.n(U),C=e(99289),c=e.n(C),i=e(35312);function R(r,n,t){return m.apply(this,arguments)}function m(){return m=c()(_()().mark(function r(n,t,a){return _()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,i.request)("file/list",f()({method:"GET",params:f()({type:Object.keys(t!=null?t:[]).length>0?t==null?void 0:t.join(","):""},n)},a||{})));case 1:case"end":return l.stop()}},r)})),m.apply(this,arguments)}function d(r){return I.apply(this,arguments)}function I(){return I=c()(_()().mark(function r(n){return _()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.request)("file/delete-file-content/".concat(n),{method:"POST"}));case 1:case"end":return a.stop()}},r)})),I.apply(this,arguments)}function b(r){return v.apply(this,arguments)}function v(){return v=_asyncToGenerator(_regeneratorRuntime().mark(function r(n){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("file/delete-file-item",{method:"POST",data:n}));case 1:case"end":return a.stop()}},r)})),v.apply(this,arguments)}function T(r){return O.apply(this,arguments)}function O(){return O=c()(_()().mark(function r(n){return _()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.request)("file/".concat(n)));case 1:case"end":return a.stop()}},r)})),O.apply(this,arguments)}function j(r,n){return s.apply(this,arguments)}function s(){return s=c()(_()().mark(function r(n,t){return _()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,i.request)("file/file-items/".concat(t.id)));case 1:case"end":return u.stop()}},r)})),s.apply(this,arguments)}function A(r){return p.apply(this,arguments)}function p(){return p=c()(_()().mark(function r(n){var t;return _()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=new FormData,t.append("file",n),u.abrupt("return",(0,i.request)("file/upload",{method:"POST",data:t}));case 3:case"end":return u.stop()}},r)})),p.apply(this,arguments)}function D(r){return o.apply(this,arguments)}function o(){return o=c()(_()().mark(function r(n){return _()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.request)("file/upload-from-url",{method:"POST",data:{url:n}}));case 1:case"end":return a.stop()}},r)})),o.apply(this,arguments)}function F(){return L.apply(this,arguments)}function L(){return L=c()(_()().mark(function r(){return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.request)("file/count"));case 1:case"end":return t.stop()}},r)})),L.apply(this,arguments)}function B(){return W.apply(this,arguments)}function W(){return W=c()(_()().mark(function r(){return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.request)("file/total-size"));case 1:case"end":return t.stop()}},r)})),W.apply(this,arguments)}},5251:function($,M,e){e.d(M,{Er:function(){return f},p6:function(){return C}});var g=e(27484),_=e.n(g);function U(i){return i.trim()}function f(i){return new URL(i||"",localStorage.getItem("wf_URL")||"").href}function C(i){return i?_()(i).format("DD/MM/YYYY hh:mm:ss"):"-"}var c=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(m){setTimeout(function(){m(!0)},R)})}}}]);
