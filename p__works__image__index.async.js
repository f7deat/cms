"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4165],{1913:function(k,O,e){var M=e(15009),a=e.n(M),A=e(99289),E=e.n(A),T=e(5574),m=e.n(T),u=e(20385),y=e(64082),f=e(16596),o=e(65419),h=e(58301),S=e(98366),v=e(71577),g=e(96074),_=e(96365),r=e(62435),n=e(86074),W=o.Z.Dragger,x=function(p){var $=(0,r.useState)(""),L=m()($,2),F=L[0],B=L[1];function s(t){var i;try{i=new URL(t)}catch(D){return!1}return i.protocol==="https:"}var d=function(){var t=E()(a()().mark(function i(D){var C;return a()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(s(D)){P.next=3;break}return h.ZP.error("Sorry, URL failed to upload."),P.abrupt("return");case 3:return P.next=5,(0,u.tg)(D);case 5:C=P.sent,C.succeeded&&h.ZP.success("Uploaded!");case 7:case"end":return P.stop()}},i)}));return function(D){return t.apply(this,arguments)}}(),l=function(){var t=E()(a()().mark(function i(){return a()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(s(F)){C.next=3;break}return h.ZP.error("Sorry, URL failed to upload."),C.abrupt("return");case 3:p.onFinish(F),p.onCancel();case 5:case"end":return C.stop()}},i)}));return function(){return t.apply(this,arguments)}}();return(0,n.jsxs)(S.Z,{open:p.open,onCancel:function(){return p.onCancel()},centered:!0,title:"Upload",onOk:l,children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsxs)(W,{children:[(0,n.jsx)("p",{className:"ant-upload-drag-icon",children:(0,n.jsx)(y.Z,{})}),(0,n.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),(0,n.jsx)("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibited from uploading company data or other banned files."})]})}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)(v.ZP,{icon:(0,n.jsx)(f.Z,{}),type:"link",size:"large",children:(0,n.jsx)("b",{children:"Choose from your computer"})})}),(0,n.jsx)(g.Z,{children:"or"}),(0,n.jsx)(_.Z,{placeholder:"Paste image or URL",onChange:function(i){return B(i.currentTarget.value)}})]})};O.Z=x},19489:function(k,O,e){var M=e(5251),a=e(69753),A=e(28199),E=e(35312),T=e(32545),m=e(32983),u=e(71577),y=e(96074),f=e(26412),o=e(86074),h=function(v){var g,_=["image/jpeg","image/png","image/webp",".svg",".jpg",".png",".jpeg"],r=(0,E.useIntl)(),n=v.file,W=function(){v.onChange&&v.onChange()},x=function(){var p;return _.includes((p=n==null?void 0:n.type)!==null&&p!==void 0?p:"")?(0,o.jsx)("div",{className:"flex justify-center items-center",style:{minHeight:130},children:(0,o.jsx)(T.Z,{src:(0,M.Er)(n==null?void 0:n.url)})}):(0,o.jsx)("div",{onClick:W,children:(0,o.jsx)(m.Z,{})})};return(0,o.jsxs)(A.Z,{title:r.formatMessage({id:"general.preview"}),actions:[(0,o.jsx)(u.ZP,{type:"link",onClick:function(){return window.location.href=(0,M.Er)(n==null?void 0:n.url)},icon:(0,o.jsx)(a.Z,{}),children:"Download"},"download")],children:[x(),(0,o.jsx)(y.Z,{}),(0,o.jsxs)(f.Z,{title:"File info",column:1,children:[(0,o.jsx)(f.Z.Item,{label:"Name",children:n==null?void 0:n.name}),(0,o.jsxs)(f.Z.Item,{label:"Size",children:[(((g=n==null?void 0:n.size)!==null&&g!==void 0?g:0)/1024).toFixed(2)," KB"]}),(0,o.jsx)(f.Z.Item,{label:"Type",children:n==null?void 0:n.type})]})]})};O.Z=h},16411:function(k,O,e){e.r(O),e.d(O,{default:function(){return C}});var M=e(15009),a=e.n(M),A=e(99289),E=e.n(A),T=e(5574),m=e.n(T),u=e(1913),y=e(97857),f=e.n(y),o=e(34994),h=e(5966),S=e(64317),v=e(58301),g=e(71577),_=e(62435),r=e(86074),n=function(P){var R=o.A.useFormInstance(),w=(0,_.useRef)(),ee=(0,_.useState)(!0),z=m()(ee,2),Q=z[0],N=z[1],ne=(0,_.useState)(),G=m()(ne,2),H=G[0],Y=G[1];(0,_.useEffect)(function(){var U=R==null?void 0:R.getFieldValue("link");if(U){var Z;(Z=w.current)===null||Z===void 0||Z.setFields([{name:"name",value:U.name},{name:"href",value:U.href},{name:"target",value:U.target}])}},[]);var X=function(){var U=E()(a()().mark(function Z(V){return a()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(P.name){c.next=2;break}return c.abrupt("return",v.ZP.warning("Name missing"));case 2:Y(V),R==null||R.setFields([{name:P.name,value:V}]),N(!0);case 5:case"end":return c.stop()}},Z)}));return function(V){return U.apply(this,arguments)}}();return(0,r.jsxs)(o.A.Item,f()(f()({},P),{},{children:[(0,r.jsxs)("div",{style:{display:"flex",gap:16},children:[(0,r.jsx)("div",{style:{height:32,border:"1px dashed #d1d1d1",flex:1,padding:"4px 11px",borderRadius:4},children:H==null?void 0:H.name}),(0,r.jsx)(g.ZP,{type:"primary",onClick:function(){return N(!Q)},children:"Add link"},"primary")]}),(0,r.jsx)("div",{style:{backgroundColor:"#eee",padding:16,borderRadius:4,marginTop:16},hidden:Q,children:(0,r.jsxs)(o.A,{onFinish:X,formRef:w,children:[(0,r.jsx)(h.Z,{name:"name",label:"Name"}),(0,r.jsx)(h.Z,{name:"href",label:"URL",rules:[{required:!0}]}),(0,r.jsx)(S.Z,{name:"target",label:"Target",allowClear:!0,options:[{value:"_blank",label:"Open in new tab"}]})]})})]}))},W=n,x=e(19489),I=e(66352),p=e(82061),$=e(82826),L=e(14361),F=e(63386),B=e(28199),s=e(35312),d=e(93421),l=e(86738),t=e(71230),i=e(15746),D=function(){var P=(0,s.useParams)(),R=P.id,w=(0,s.useIntl)(),ee=(0,_.useState)(),z=m()(ee,2),Q=z[0],N=z[1],ne=(0,_.useState)(!1),G=m()(ne,2),H=G[0],Y=G[1],X=(0,_.useRef)(),U=function(){var c=E()(a()().mark(function j(b){var q;return a()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,(0,I.iH)(R,b);case 2:q=J.sent,q.succeeded?v.ZP.success("Saved!"):v.ZP.error(q.errors[0].description);case 4:case"end":return J.stop()}},j)}));return function(b){return c.apply(this,arguments)}}();(0,_.useEffect)(function(){(0,I.Tu)(R).then(function(c){var j;N(c.file),(j=X.current)===null||j===void 0||j.setFields([{name:"alt",value:c.alt},{name:"src",value:c.src},{name:"link",value:c.link}])})},[]);var Z=function(){var c=E()(a()().mark(function j(){var b;return a()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,I.Js)(R);case 2:b=K.sent,b.succeeded?(v.ZP.success(w.formatMessage({id:"general.deleted"})),s.history.back()):v.ZP.error(b.errors[0].description);case 4:case"end":return K.stop()}},j)}));return function(){return c.apply(this,arguments)}}(),V=(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(l.Z,{title:"Are you sure?",onConfirm:Z,children:(0,r.jsx)(g.ZP,{type:"primary",danger:!0,icon:(0,r.jsx)(p.Z,{}),children:"Delete"})}),(0,r.jsx)(g.ZP,{icon:(0,r.jsx)($.Z,{}),onClick:function(){return s.history.back()},children:"Back"}),(0,r.jsx)(g.ZP,{icon:(0,r.jsx)(L.Z,{})})]}),te=function(j){N(j),Y(!1)};return(0,r.jsxs)(F._z,{title:"Image",extra:V,children:[(0,r.jsxs)(t.Z,{gutter:16,children:[(0,r.jsx)(i.Z,{span:6,children:(0,r.jsx)(x.Z,{file:Q,onChange:function(){return Y(!0)}})}),(0,r.jsx)(i.Z,{span:18,children:(0,r.jsx)(B.Z,{title:w.formatMessage({id:"menu.settings"}),children:(0,r.jsxs)(o.A,{onFinish:U,formRef:X,children:[(0,r.jsx)(h.Z,{name:"src",label:"Src"}),(0,r.jsx)(W,{name:"link",label:"Link"}),(0,r.jsx)(h.Z,{name:"alt",label:"Alt"})]})})})]}),(0,r.jsx)(u.Z,{open:H,onCancel:Y,onFinish:te})]})},C=D},20385:function(k,O,e){e.d(O,{Ah:function(){return o},Cq:function(){return g},V6:function(){return y},kE:function(){return W},p6:function(){return F},tg:function(){return I},yk:function(){return $},z3:function(){return r}});var M=e(15009),a=e.n(M),A=e(97857),E=e.n(A),T=e(99289),m=e.n(T),u=e(35312);function y(s,d,l){return f.apply(this,arguments)}function f(){return f=m()(a()().mark(function s(d,l,t){return a()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",(0,u.request)("file/list",E()({method:"GET",params:E()({type:Object.keys(l!=null?l:[]).length>0?l==null?void 0:l.join(","):""},d)},t||{})));case 1:case"end":return D.stop()}},s)})),f.apply(this,arguments)}function o(s){return h.apply(this,arguments)}function h(){return h=m()(a()().mark(function s(d){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("file/delete-file-content/".concat(d),{method:"POST"}));case 1:case"end":return t.stop()}},s)})),h.apply(this,arguments)}function S(s){return v.apply(this,arguments)}function v(){return v=_asyncToGenerator(_regeneratorRuntime().mark(function s(d){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("file/delete-file-item",{method:"POST",data:d}));case 1:case"end":return t.stop()}},s)})),v.apply(this,arguments)}function g(s){return _.apply(this,arguments)}function _(){return _=m()(a()().mark(function s(d){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("file/".concat(d)));case 1:case"end":return t.stop()}},s)})),_.apply(this,arguments)}function r(s,d){return n.apply(this,arguments)}function n(){return n=m()(a()().mark(function s(d,l){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,u.request)("file/file-items/".concat(l.id)));case 1:case"end":return i.stop()}},s)})),n.apply(this,arguments)}function W(s){return x.apply(this,arguments)}function x(){return x=m()(a()().mark(function s(d){var l;return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return l=new FormData,l.append("file",d),i.abrupt("return",(0,u.request)("file/upload",{method:"POST",data:l}));case 3:case"end":return i.stop()}},s)})),x.apply(this,arguments)}function I(s){return p.apply(this,arguments)}function p(){return p=m()(a()().mark(function s(d){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("file/upload-from-url",{method:"POST",data:{url:d}}));case 1:case"end":return t.stop()}},s)})),p.apply(this,arguments)}function $(){return L.apply(this,arguments)}function L(){return L=m()(a()().mark(function s(){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,u.request)("file/count"));case 1:case"end":return l.stop()}},s)})),L.apply(this,arguments)}function F(){return B.apply(this,arguments)}function B(){return B=m()(a()().mark(function s(){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,u.request)("file/total-size"));case 1:case"end":return l.stop()}},s)})),B.apply(this,arguments)}},5251:function(k,O,e){e.d(O,{Er:function(){return E},p6:function(){return T}});var M=e(27484),a=e.n(M);function A(u){return u.trim()}function E(u){return new URL(u||"",localStorage.getItem("wf_URL")||"").href}function T(u){return u?a()(u).format("DD/MM/YYYY hh:mm:ss"):"-"}var m=function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(f){setTimeout(function(){f(!0)},y)})}}}]);
