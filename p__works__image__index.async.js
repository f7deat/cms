"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4165],{19489:function(z,p,e){var C=e(5251),s=e(23430),L=e(30029),f=e(90905),g=e(78613),u=e(32983),P=e(71577),K=e(96074),m=e(27511),d=e(86074),R=function(M){var I,T=["image/jpeg","image/png","image/webp",".svg",".jpg",".png"],A=(0,f.useIntl)(),_=M.file,j=function(){M.onChange&&M.onChange()},E=function(){var D;return T.includes((D=_==null?void 0:_.type)!==null&&D!==void 0?D:"")?(0,d.jsx)("div",{className:"flex justify-center items-center",style:{minHeight:130},children:(0,d.jsx)(g.Z,{src:(0,C.Er)(_==null?void 0:_.url)})}):(0,d.jsx)("div",{onClick:j,children:(0,d.jsx)(u.Z,{})})};return(0,d.jsxs)(L.Z,{title:A.formatMessage({id:"general.preview"}),extra:(0,d.jsx)(P.Z,{type:"dashed",icon:(0,d.jsx)(s.Z,{}),onClick:function(){return window.location.href=(0,C.Er)(_==null?void 0:_.url)},children:"Download"}),children:[E(),(0,d.jsx)(K.Z,{}),(0,d.jsxs)(m.Z,{title:"File info",column:1,children:[(0,d.jsx)(m.Z.Item,{label:"Name",children:_==null?void 0:_.name}),(0,d.jsxs)(m.Z.Item,{label:"Size",children:[(((I=_==null?void 0:_.size)!==null&&I!==void 0?I:0)/1024).toFixed(2)," KB"]}),(0,d.jsx)(m.Z.Item,{label:"Type",children:_==null?void 0:_.type})]})]})};p.Z=R},12873:function(z,p,e){var C=e(97857),s=e.n(C),L=e(15009),f=e.n(L),g=e(99289),u=e.n(g),P=e(5574),K=e.n(P),m=e(20385),d=e(73403),R=e(88484),b=e(99611),M=e(48689),I=e(13728),T=e(99351),A=e(22538),_=e(90905),j=e(27790),E=e(75527),v=e(69677),D=e(71577),t=e(31365),a=e(26713),o=e(13013),r=e(86738),i=e(62435),n=e(86074),J=function(W){var F=(0,_.useIntl)(),Z=(0,i.useRef)(),Q=(0,i.useState)(),$=K()(Q,2),G=$[0],Y=$[1],X={name:"file",action:m.kE,onChange:function(l){if(l.file.status!=="uploading"&&console.log(l.file,l.fileList),l.file.status==="done"){var c;j.ZP.success("".concat(l.file.name," file uploaded successfully")),(c=Z.current)===null||c===void 0||c.reload()}else l.file.status==="error"&&j.ZP.error("".concat(l.file.name," file upload failed."))}},H=function(){var U=u()(f()().mark(function l(){var c,x;return f()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(G){B.next=2;break}return B.abrupt("return");case 2:return B.next=4,(0,m.tg)(G);case 4:c=B.sent,c.succeeded&&(j.ZP.success("Uploaded!"),(x=Z.current)===null||x===void 0||x.reload());case 6:case"end":return B.stop()}},l)}));return function(){return U.apply(this,arguments)}}();return(0,n.jsxs)(T.Y,{open:W.open,onOpenChange:W.onOpenChange,onFinish:W.onFinish,submitter:!1,children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsxs)(E.Z,{children:[(0,n.jsx)(E.Z.Item,{href:"",children:(0,n.jsx)(d.Z,{})}),(0,n.jsx)(E.Z.Item,{href:"",children:"Home"})]})}),(0,n.jsxs)(v.Z.Group,{compact:!0,className:"mb-4",children:[(0,n.jsx)(v.Z,{style:{width:"calc(100% - 200px)"},onChange:function(l){return Y(l.currentTarget.value)}}),(0,n.jsx)(D.Z,{type:"primary",onClick:H,children:"Quick add"})]}),(0,n.jsx)(A.Rs,{toolBarRender:function(){return[(0,i.createElement)(t.Z,s()(s()({},X),{},{key:0}),(0,n.jsx)(D.Z,{icon:(0,n.jsx)(R.Z,{}),type:"primary",children:"Upload"}))]},headerTitle:F.formatMessage({id:"menu.fileManager"}),request:function(l){return(0,m.V6)(s()({},l),W.type)},rowSelection:{},search:{layout:"vertical"},pagination:{pageSize:5},metas:{title:{dataIndex:"name",title:"Name",render:function(l,c){return(0,n.jsx)("a",{onClick:function(){W.onSelect&&(c.url=new URL(c.url,localStorage.getItem("wf_URL")||"").href,W.onSelect(c))},children:l})}},description:{search:!1,render:function(l,c){return(0,n.jsxs)(a.Z,{children:[(0,n.jsx)("span",{children:c.type}),(0,n.jsx)("span",{children:"|"}),(0,n.jsxs)("span",{children:[(c.size/1024).toFixed(2)," KB"]})]})}},actions:{render:function(l,c){return(0,n.jsx)(o.Z,{menu:{items:[{key:1,label:(0,n.jsxs)(a.Z,{onClick:function(){return _.history.push("/files/center/".concat(c.id))},children:[(0,n.jsx)(b.Z,{}),(0,n.jsx)(_.FormattedMessage,{id:"general.preview"})]})},{key:2,label:(0,n.jsx)(r.Z,{title:"Are you sure?",children:(0,n.jsxs)(a.Z,{children:[(0,n.jsx)(M.Z,{}),"Delete"]})}),danger:!0}]},children:(0,n.jsx)(D.Z,{icon:(0,n.jsx)(I.Z,{}),type:"link",size:"small"})})}}},actionRef:Z})]})};p.Z=J},28301:function(z,p,e){e.r(p);var C=e(15009),s=e.n(C),L=e(99289),f=e.n(L),g=e(5574),u=e.n(g),P=e(19489),K=e(12873),m=e(66352),d=e(48689),R=e(82826),b=e(13728),M=e(62884),I=e(30029),T=e(97269),A=e(5966),_=e(90672),j=e(31199),E=e(90905),v=e(27790),D=e(26713),t=e(86738),a=e(71577),o=e(71230),r=e(15746),i=e(62435),n=e(86074),J=function(){var W=(0,E.useParams)(),F=W.id,Z=(0,E.useIntl)(),Q=(0,i.useState)(),$=u()(Q,2),G=$[0],Y=$[1],X=(0,i.useState)(!1),H=u()(X,2),U=H[0],l=H[1],c=(0,i.useRef)(),x=function(){var O=f()(s()().mark(function h(S){var V;return s()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return S.fileContent=G,N.next=3,(0,m.DB)(S);case 3:V=N.sent,V.succeeded?v.ZP.success("Saved!"):v.ZP.error(V.errors[0].description);case 5:case"end":return N.stop()}},h)}));return function(S){return O.apply(this,arguments)}}();(0,i.useEffect)(function(){(0,m.gJ)(F).then(function(O){var h;Y(O.fileContent),(h=c.current)===null||h===void 0||h.setFields([{name:"id",value:F},{name:"height",value:O.height},{name:"width",value:O.width},{name:"title",value:O.title},{name:"description",value:O.description},{name:"className",value:O.className}])})},[]);var w=function(){var O=f()(s()().mark(function h(){var S;return s()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,m.rB)(F);case 2:S=y.sent,S.succeeded?(v.ZP.success(Z.formatMessage({id:"general.deleted"})),E.history.back()):v.ZP.error(S.errors[0].description);case 4:case"end":return y.stop()}},h)}));return function(){return O.apply(this,arguments)}}(),B=(0,n.jsxs)(D.Z,{children:[(0,n.jsx)(t.Z,{title:"Are you sure?",onConfirm:w,children:(0,n.jsx)(a.Z,{type:"primary",danger:!0,icon:(0,n.jsx)(d.Z,{}),children:"Delete"})}),(0,n.jsx)(a.Z,{icon:(0,n.jsx)(R.Z,{}),onClick:function(){return E.history.back()},children:"Back"}),(0,n.jsx)(a.Z,{icon:(0,n.jsx)(b.Z,{})})]}),q=function(h){Y(h),l(!1)};return(0,n.jsxs)(M._z,{title:"Image",extra:B,children:[(0,n.jsxs)(o.Z,{gutter:16,children:[(0,n.jsx)(r.Z,{span:6,children:(0,n.jsx)(P.Z,{file:G,onChange:function(){return l(!0)}})}),(0,n.jsx)(r.Z,{span:18,children:(0,n.jsx)(I.Z,{title:Z.formatMessage({id:"menu.settings"}),children:(0,n.jsxs)(T.A,{onFinish:x,formRef:c,children:[(0,n.jsx)(A.Z,{name:"id",hidden:!0}),(0,n.jsx)(A.Z,{name:"title",label:"Title"}),(0,n.jsx)(_.Z,{name:"description",label:"Description"}),(0,n.jsx)(A.Z,{name:"className",label:"Class Name"}),(0,n.jsx)(j.Z,{label:"Width",name:"width"}),(0,n.jsx)(j.Z,{label:"Height",name:"height"})]})})})]}),(0,n.jsx)(K.Z,{open:U,onOpenChange:l,onSelect:q})]})};p.default=J},20385:function(z,p,e){e.d(p,{Ah:function(){return d},Cq:function(){return I},V6:function(){return K},kE:function(){return j},tg:function(){return v},z3:function(){return A}});var C=e(15009),s=e.n(C),L=e(97857),f=e.n(L),g=e(99289),u=e.n(g),P=e(90905);function K(t,a,o){return m.apply(this,arguments)}function m(){return m=u()(s()().mark(function t(a,o,r){return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,P.request)("fileExplorer/list",f()({method:"GET",params:f()({type:Object.keys(o!=null?o:[]).length>0?o==null?void 0:o.join(","):""},a)},r||{})));case 1:case"end":return n.stop()}},t)})),m.apply(this,arguments)}function d(t){return R.apply(this,arguments)}function R(){return R=u()(s()().mark(function t(a){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,P.request)("fileExplorer/delete-file-content/".concat(a),{method:"POST"}));case 1:case"end":return r.stop()}},t)})),R.apply(this,arguments)}function b(t){return M.apply(this,arguments)}function M(){return M=_asyncToGenerator(_regeneratorRuntime().mark(function t(a){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("fileExplorer/delete-file-item",{method:"POST",data:a}));case 1:case"end":return r.stop()}},t)})),M.apply(this,arguments)}function I(t){return T.apply(this,arguments)}function T(){return T=u()(s()().mark(function t(a){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,P.request)("fileExplorer/".concat(a)));case 1:case"end":return r.stop()}},t)})),T.apply(this,arguments)}function A(t,a){return _.apply(this,arguments)}function _(){return _=u()(s()().mark(function t(a,o){return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,P.request)("fileExplorer/file-items/".concat(o.id)));case 1:case"end":return i.stop()}},t)})),_.apply(this,arguments)}function j(t){return E.apply(this,arguments)}function E(){return E=u()(s()().mark(function t(a){var o;return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return o=new FormData,o.append("file",a),i.abrupt("return",(0,P.request)("fileExplorer/upload",{method:"POST",data:o}));case 3:case"end":return i.stop()}},t)})),E.apply(this,arguments)}function v(t){return D.apply(this,arguments)}function D(){return D=u()(s()().mark(function t(a){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,P.request)("fileexplorer/upload-from-url",{method:"POST",data:{url:a}}));case 1:case"end":return r.stop()}},t)})),D.apply(this,arguments)}},5251:function(z,p,e){e.d(p,{Er:function(){return f},p6:function(){return g}});var C=e(27484),s=e.n(C);function L(u){return u.trim()}function f(u){return new URL(u||"",localStorage.getItem("wf_URL")||"").href}function g(u){return u?s()(u).format("DD/MM/YYYY hh:mm:ss"):"-"}}}]);
