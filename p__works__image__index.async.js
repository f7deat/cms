"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4165],{19489:function(z,h,e){var C=e(5251),s=e(23430),L=e(30029),f=e(90905),U=e(78613),o=e(32983),P=e(71577),W=e(96074),c=e(27511),i=e(86074),g=function(p){var R,I=["image/jpeg","image/png","image/webp",".svg",".jpg",".png"],T=(0,f.useIntl)(),_=p.file,j=function(){p.onChange&&p.onChange()},E=function(){var D;return I.includes((D=_==null?void 0:_.type)!==null&&D!==void 0?D:"")?(0,i.jsx)("div",{className:"flex justify-center items-center",style:{minHeight:130},children:(0,i.jsx)(U.Z,{src:(0,C.Er)(_==null?void 0:_.url)})}):(0,i.jsx)("div",{onClick:j,children:(0,i.jsx)(o.Z,{})})};return(0,i.jsxs)(L.Z,{title:T.formatMessage({id:"general.preview"}),extra:(0,i.jsx)(P.Z,{type:"dashed",icon:(0,i.jsx)(s.Z,{}),onClick:function(){return window.location.href=(0,C.Er)(_==null?void 0:_.url)},children:"Download"}),children:[E(),(0,i.jsx)(W.Z,{}),(0,i.jsxs)(c.Z,{title:"File info",column:1,children:[(0,i.jsx)(c.Z.Item,{label:"Name",children:_==null?void 0:_.name}),(0,i.jsxs)(c.Z.Item,{label:"Size",children:[(((R=_==null?void 0:_.size)!==null&&R!==void 0?R:0)/1024).toFixed(2)," KB"]}),(0,i.jsx)(c.Z.Item,{label:"Type",children:_==null?void 0:_.type})]})]})};h.Z=g},12873:function(z,h,e){var C=e(97857),s=e.n(C),L=e(15009),f=e.n(L),U=e(99289),o=e.n(U),P=e(5574),W=e.n(P),c=e(20385),i=e(73403),g=e(88484),b=e(99611),p=e(48689),R=e(13728),I=e(99351),T=e(22538),_=e(90905),j=e(27790),E=e(75527),v=e(69677),D=e(71577),t=e(31365),l=e(26713),m=e(13013),r=e(86738),a=e(62435),n=e(86074),J=function(K){var F=(0,_.useIntl)(),Z=(0,a.useRef)(),Q=(0,a.useState)(),$=W()(Q,2),G=$[0],Y=$[1],X={name:"file",action:c.kE,onChange:function(u){if(u.file.status!=="uploading"&&console.log(u.file,u.fileList),u.file.status==="done"){var d;j.ZP.success("".concat(u.file.name," file uploaded successfully")),(d=Z.current)===null||d===void 0||d.reload()}else u.file.status==="error"&&j.ZP.error("".concat(u.file.name," file upload failed."))}},H=function(){var A=o()(f()().mark(function u(){var d,x;return f()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(G){B.next=2;break}return B.abrupt("return");case 2:return B.next=4,(0,c.tg)(G);case 4:d=B.sent,d.succeeded&&(j.ZP.success("Uploaded!"),(x=Z.current)===null||x===void 0||x.reload());case 6:case"end":return B.stop()}},u)}));return function(){return A.apply(this,arguments)}}();return(0,n.jsxs)(I.Y,{open:K.open,onOpenChange:K.onOpenChange,onFinish:K.onFinish,submitter:!1,children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsxs)(E.Z,{children:[(0,n.jsx)(E.Z.Item,{href:"",children:(0,n.jsx)(i.Z,{})}),(0,n.jsx)(E.Z.Item,{href:"",children:"Home"})]})}),(0,n.jsxs)(v.Z.Group,{compact:!0,className:"mb-4",children:[(0,n.jsx)(v.Z,{style:{width:"calc(100% - 200px)"},onChange:function(u){return Y(u.currentTarget.value)}}),(0,n.jsx)(D.Z,{type:"primary",onClick:H,children:"Quick add"})]}),(0,n.jsx)(T.Rs,{toolBarRender:function(){return[(0,a.createElement)(t.Z,s()(s()({},X),{},{key:0}),(0,n.jsx)(D.Z,{icon:(0,n.jsx)(g.Z,{}),type:"primary",children:"Upload"}))]},headerTitle:F.formatMessage({id:"menu.fileManager"}),request:c.V6,rowSelection:{},search:{layout:"vertical"},pagination:{pageSize:5},metas:{title:{dataIndex:"name",title:"Name",render:function(u,d){return(0,n.jsx)("a",{onClick:function(){K.onSelect&&(d.url=new URL(d.url,localStorage.getItem("wf_URL")||"").href,K.onSelect(d))},children:u})}},description:{search:!1,render:function(u,d){return(0,n.jsxs)(l.Z,{children:[(0,n.jsx)("span",{children:d.type}),(0,n.jsx)("span",{children:"|"}),(0,n.jsxs)("span",{children:[(d.size/1024).toFixed(2)," KB"]})]})}},actions:{render:function(u,d){return(0,n.jsx)(m.Z,{menu:{items:[{key:1,label:(0,n.jsxs)(l.Z,{onClick:function(){return _.history.push("/files/center/".concat(d.id))},children:[(0,n.jsx)(b.Z,{}),(0,n.jsx)(_.FormattedMessage,{id:"general.preview"})]})},{key:2,label:(0,n.jsx)(r.Z,{title:"Are you sure?",children:(0,n.jsxs)(l.Z,{children:[(0,n.jsx)(p.Z,{}),"Delete"]})}),danger:!0}]},children:(0,n.jsx)(D.Z,{icon:(0,n.jsx)(R.Z,{}),type:"link",size:"small"})})}}},actionRef:Z})]})};h.Z=J},28301:function(z,h,e){e.r(h);var C=e(15009),s=e.n(C),L=e(99289),f=e.n(L),U=e(5574),o=e.n(U),P=e(19489),W=e(12873),c=e(66352),i=e(48689),g=e(82826),b=e(13728),p=e(62884),R=e(30029),I=e(97269),T=e(5966),_=e(90672),j=e(31199),E=e(90905),v=e(27790),D=e(26713),t=e(86738),l=e(71577),m=e(71230),r=e(15746),a=e(62435),n=e(86074),J=function(){var K=(0,E.useParams)(),F=K.id,Z=(0,E.useIntl)(),Q=(0,a.useState)(),$=o()(Q,2),G=$[0],Y=$[1],X=(0,a.useState)(!1),H=o()(X,2),A=H[0],u=H[1],d=(0,a.useRef)(),x=function(){var O=f()(s()().mark(function M(S){var V;return s()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return S.fileContent=G,N.next=3,(0,c.DB)(S);case 3:V=N.sent,V.succeeded?v.ZP.success("Saved!"):v.ZP.error(V.errors[0].description);case 5:case"end":return N.stop()}},M)}));return function(S){return O.apply(this,arguments)}}();(0,a.useEffect)(function(){(0,c.gJ)(F).then(function(O){var M;Y(O.fileContent),(M=d.current)===null||M===void 0||M.setFields([{name:"id",value:F},{name:"height",value:O.height},{name:"width",value:O.width},{name:"title",value:O.title},{name:"description",value:O.description},{name:"className",value:O.className}])})},[]);var w=function(){var O=f()(s()().mark(function M(){var S;return s()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,c.rB)(F);case 2:S=y.sent,S.succeeded?(v.ZP.success(Z.formatMessage({id:"general.deleted"})),E.history.back()):v.ZP.error(S.errors[0].description);case 4:case"end":return y.stop()}},M)}));return function(){return O.apply(this,arguments)}}(),B=(0,n.jsxs)(D.Z,{children:[(0,n.jsx)(t.Z,{title:"Are you sure?",onConfirm:w,children:(0,n.jsx)(l.Z,{type:"primary",danger:!0,icon:(0,n.jsx)(i.Z,{}),children:"Delete"})}),(0,n.jsx)(l.Z,{icon:(0,n.jsx)(g.Z,{}),onClick:function(){return E.history.back()},children:"Back"}),(0,n.jsx)(l.Z,{icon:(0,n.jsx)(b.Z,{})})]}),q=function(M){Y(M),u(!1)};return(0,n.jsxs)(p._z,{title:"Image",extra:B,children:[(0,n.jsxs)(m.Z,{gutter:16,children:[(0,n.jsx)(r.Z,{span:6,children:(0,n.jsx)(P.Z,{file:G,onChange:function(){return u(!0)}})}),(0,n.jsx)(r.Z,{span:18,children:(0,n.jsx)(R.Z,{title:Z.formatMessage({id:"menu.settings"}),children:(0,n.jsxs)(I.A,{onFinish:x,formRef:d,children:[(0,n.jsx)(T.Z,{name:"id",hidden:!0}),(0,n.jsx)(T.Z,{name:"title",label:"Title"}),(0,n.jsx)(_.Z,{name:"description",label:"Description"}),(0,n.jsx)(T.Z,{name:"className",label:"Class Name"}),(0,n.jsx)(j.Z,{label:"Width",name:"width"}),(0,n.jsx)(j.Z,{label:"Height",name:"height"})]})})})]}),(0,n.jsx)(W.Z,{open:A,onOpenChange:u,onSelect:q})]})};h.default=J},20385:function(z,h,e){e.d(h,{Ah:function(){return i},Cq:function(){return R},V6:function(){return W},kE:function(){return j},tg:function(){return v},z3:function(){return T}});var C=e(15009),s=e.n(C),L=e(97857),f=e.n(L),U=e(99289),o=e.n(U),P=e(90905);function W(t,l){return c.apply(this,arguments)}function c(){return c=o()(s()().mark(function t(l,m){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,P.request)("fileExplorer/list",f()({method:"GET",params:f()({},l)},m||{})));case 1:case"end":return a.stop()}},t)})),c.apply(this,arguments)}function i(t){return g.apply(this,arguments)}function g(){return g=o()(s()().mark(function t(l){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,P.request)("fileExplorer/delete-file-content/".concat(l),{method:"POST"}));case 1:case"end":return r.stop()}},t)})),g.apply(this,arguments)}function b(t){return p.apply(this,arguments)}function p(){return p=_asyncToGenerator(_regeneratorRuntime().mark(function t(l){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("fileExplorer/delete-file-item",{method:"POST",data:l}));case 1:case"end":return r.stop()}},t)})),p.apply(this,arguments)}function R(t){return I.apply(this,arguments)}function I(){return I=o()(s()().mark(function t(l){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,P.request)("fileExplorer/".concat(l)));case 1:case"end":return r.stop()}},t)})),I.apply(this,arguments)}function T(t,l){return _.apply(this,arguments)}function _(){return _=o()(s()().mark(function t(l,m){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,P.request)("fileExplorer/file-items/".concat(m.id)));case 1:case"end":return a.stop()}},t)})),_.apply(this,arguments)}function j(t){return E.apply(this,arguments)}function E(){return E=o()(s()().mark(function t(l){var m;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return m=new FormData,m.append("file",l),a.abrupt("return",(0,P.request)("fileExplorer/upload",{method:"POST",data:m}));case 3:case"end":return a.stop()}},t)})),E.apply(this,arguments)}function v(t){return D.apply(this,arguments)}function D(){return D=o()(s()().mark(function t(l){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,P.request)("fileexplorer/upload-from-url",{method:"POST",data:{url:l}}));case 1:case"end":return r.stop()}},t)})),D.apply(this,arguments)}},5251:function(z,h,e){e.d(h,{Er:function(){return f},p6:function(){return U}});var C=e(27484),s=e.n(C);function L(o){return o.trim()}function f(o){return new URL(o||"",localStorage.getItem("wf_URL")||"").href}function U(o){return o?s()(o).format("DD/MM/YYYY hh:mm:ss"):"-"}}}]);
