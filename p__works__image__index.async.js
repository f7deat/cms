"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4165],{19489:function(b,C,e){var g=e(5251),t=e(23430),T=e(30029),O=e(90905),U=e(78613),l=e(32983),E=e(71577),W=e(96074),m=e(27511),c=e(86074),R=function(P){var I,M=["image/jpeg","image/png","image/webp",".svg",".jpg",".png"],j=(0,O.useIntl)(),r=P.file,A=function(){P.onChange&&P.onChange()},p=function(){var o;return M.includes((o=r==null?void 0:r.type)!==null&&o!==void 0?o:"")?(0,c.jsx)("div",{className:"flex justify-center items-center",style:{minHeight:130},children:(0,c.jsx)(U.Z,{src:(0,g.Er)(r==null?void 0:r.url)})}):(0,c.jsx)("div",{onClick:A,children:(0,c.jsx)(l.Z,{})})};return(0,c.jsxs)(T.Z,{title:j.formatMessage({id:"general.preview"}),extra:(0,c.jsx)(E.Z,{type:"dashed",icon:(0,c.jsx)(t.Z,{}),onClick:function(){return window.location.href=(0,g.Er)(r==null?void 0:r.url)},children:"Download"}),children:[p(),(0,c.jsx)(W.Z,{}),(0,c.jsxs)(m.Z,{title:"File info",column:1,children:[(0,c.jsx)(m.Z.Item,{label:"Name",children:r==null?void 0:r.name}),(0,c.jsxs)(m.Z.Item,{label:"Size",children:[(((I=r==null?void 0:r.size)!==null&&I!==void 0?I:0)/1024).toFixed(2)," KB"]}),(0,c.jsx)(m.Z.Item,{label:"Type",children:r==null?void 0:r.type})]})]})};C.Z=R},99270:function(b,C,e){var g=e(97857),t=e.n(g),T=e(15009),O=e.n(T),U=e(99289),l=e.n(U),E=e(20385),W=e(5251),m=e(88484),c=e(97269),R=e(5966),Z=e(99351),P=e(22538),I=e(90905),M=e(27790),j=e(31365),r=e(71577),A=e(55241),p=e(78613),f=e(62435),o=e(86074),s=function(a){var _=(0,I.useIntl)(),i=(0,f.useRef)(),n={name:"file",action:E.kE,accept:"image/png, image/jpeg",onChange:function(d){if(d.file.status!=="uploading"&&console.log(d.file,d.fileList),d.file.status==="done"){var v;M.ZP.success("".concat(d.file.name," file uploaded successfully")),(v=i.current)===null||v===void 0||v.reload()}else d.file.status==="error"&&M.ZP.error("".concat(d.file.name," file upload failed."))}},F=function(){var B=l()(O()().mark(function d(v){var $,S;return O()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,(0,E.tg)(v.url);case 2:$=L.sent,$.succeeded&&(M.ZP.success("Uploaded!"),(S=i.current)===null||S===void 0||S.reload());case 4:case"end":return L.stop()}},d)}));return function(v){return B.apply(this,arguments)}}(),V=(0,o.jsx)(c.A,{onFinish:F,children:(0,o.jsx)(R.Z,{name:"url",rules:[{required:!0}],placeholder:"URL"})});return(0,o.jsx)(Z.Y,{open:a.open,onOpenChange:a.onOpenChange,children:(0,o.jsx)(P.Rs,{ghost:!0,toolBarRender:function(){return[(0,f.createElement)(j.Z,t()(t()({},n),{},{key:0}),(0,o.jsx)(r.Z,{icon:(0,o.jsx)(m.Z,{}),type:"primary",children:"Upload"})),(0,o.jsx)(A.Z,{trigger:"click",content:V,title:"Upload Via URL",children:(0,o.jsx)(r.Z,{icon:(0,o.jsx)(m.Z,{}),onClick:F,children:"Via URL"})},2)]},headerTitle:_.formatMessage({id:"menu.fileManager"}),request:function(d){return(0,E.V6)(t()({},d),[".png",".jpg",".jpeg","image/jpeg"])},search:{layout:"vertical"},pagination:{pageSize:6},grid:{column:3},onItem:function(d){return{onClick:function(){a.onSelect(d)}}},metas:{content:{dataIndex:"name",title:"Name",render:function(d,v){return(0,o.jsx)(p.Z,{src:(0,W.Er)(v.url),height:100,preview:!1})}}},actionRef:i})})};C.Z=s},28301:function(b,C,e){e.r(C);var g=e(15009),t=e.n(g),T=e(99289),O=e.n(T),U=e(5574),l=e.n(U),E=e(19489),W=e(99270),m=e(66352),c=e(48689),R=e(82826),Z=e(13728),P=e(62884),I=e(30029),M=e(97269),j=e(5966),r=e(90672),A=e(31199),p=e(90905),f=e(27790),o=e(26713),s=e(86738),u=e(71577),a=e(71230),_=e(15746),i=e(62435),n=e(86074),F=function(){var B=(0,p.useParams)(),d=B.id,v=(0,p.useIntl)(),$=(0,i.useState)(),S=l()($,2),N=S[0],L=S[1],J=(0,i.useState)(!1),Y=l()(J,2),Q=Y[0],z=Y[1],H=(0,i.useRef)(),X=function(){var D=O()(t()().mark(function h(K){var G;return t()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return K.file=N,y.next=3,(0,m.DB)(K);case 3:G=y.sent,G.succeeded?f.ZP.success("Saved!"):f.ZP.error(G.errors[0].description);case 5:case"end":return y.stop()}},h)}));return function(K){return D.apply(this,arguments)}}();(0,i.useEffect)(function(){(0,m.gJ)(d).then(function(D){var h;L(D.file),(h=H.current)===null||h===void 0||h.setFields([{name:"height",value:D.height},{name:"width",value:D.width},{name:"alt",value:D.alt},{name:"description",value:D.description},{name:"className",value:D.className},{name:"wrapper",value:D.wrapper}])})},[]);var w=function(){var D=O()(t()().mark(function h(){var K;return t()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,m.rB)(d);case 2:K=x.sent,K.succeeded?(f.ZP.success(v.formatMessage({id:"general.deleted"})),p.history.back()):f.ZP.error(K.errors[0].description);case 4:case"end":return x.stop()}},h)}));return function(){return D.apply(this,arguments)}}(),k=(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(s.Z,{title:"Are you sure?",onConfirm:w,children:(0,n.jsx)(u.Z,{type:"primary",danger:!0,icon:(0,n.jsx)(c.Z,{}),children:"Delete"})}),(0,n.jsx)(u.Z,{icon:(0,n.jsx)(R.Z,{}),onClick:function(){return p.history.back()},children:"Back"}),(0,n.jsx)(u.Z,{icon:(0,n.jsx)(Z.Z,{})})]}),q=function(h){L(h),z(!1)};return(0,n.jsxs)(P._z,{title:"Image",extra:k,children:[(0,n.jsxs)(a.Z,{gutter:16,children:[(0,n.jsx)(_.Z,{span:6,children:(0,n.jsx)(E.Z,{file:N,onChange:function(){return z(!0)}})}),(0,n.jsx)(_.Z,{span:18,children:(0,n.jsx)(I.Z,{title:v.formatMessage({id:"menu.settings"}),children:(0,n.jsxs)(M.A,{onFinish:X,formRef:H,children:[(0,n.jsx)(j.Z,{name:"id",hidden:!0,initialValue:d}),(0,n.jsx)(j.Z,{name:"alt",label:"Alt"}),(0,n.jsx)(r.Z,{name:"description",label:"Description"}),(0,n.jsx)(j.Z,{name:"className",label:"Class Name"}),(0,n.jsx)(A.Z,{label:"Width",name:"width"}),(0,n.jsx)(A.Z,{label:"Height",name:"height"}),(0,n.jsx)(j.Z,{label:"Wrapper",name:"wrapper"})]})})})]}),(0,n.jsx)(W.Z,{open:Q,onOpenChange:z,onSelect:q})]})};C.default=F},20385:function(b,C,e){e.d(C,{Ah:function(){return c},Cq:function(){return I},V6:function(){return W},kE:function(){return A},tg:function(){return f},z3:function(){return j}});var g=e(15009),t=e.n(g),T=e(97857),O=e.n(T),U=e(99289),l=e.n(U),E=e(90905);function W(s,u,a){return m.apply(this,arguments)}function m(){return m=l()(t()().mark(function s(u,a,_){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,E.request)("fileExplorer/list",O()({method:"GET",params:O()({type:Object.keys(a!=null?a:[]).length>0?a==null?void 0:a.join(","):""},u)},_||{})));case 1:case"end":return n.stop()}},s)})),m.apply(this,arguments)}function c(s){return R.apply(this,arguments)}function R(){return R=l()(t()().mark(function s(u){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,E.request)("fileExplorer/delete-file-content/".concat(u),{method:"POST"}));case 1:case"end":return _.stop()}},s)})),R.apply(this,arguments)}function Z(s){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime().mark(function s(u){return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",request("fileExplorer/delete-file-item",{method:"POST",data:u}));case 1:case"end":return _.stop()}},s)})),P.apply(this,arguments)}function I(s){return M.apply(this,arguments)}function M(){return M=l()(t()().mark(function s(u){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,E.request)("fileExplorer/".concat(u)));case 1:case"end":return _.stop()}},s)})),M.apply(this,arguments)}function j(s,u){return r.apply(this,arguments)}function r(){return r=l()(t()().mark(function s(u,a){return t()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,E.request)("fileExplorer/file-items/".concat(a.id)));case 1:case"end":return i.stop()}},s)})),r.apply(this,arguments)}function A(s){return p.apply(this,arguments)}function p(){return p=l()(t()().mark(function s(u){var a;return t()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return a=new FormData,a.append("file",u),i.abrupt("return",(0,E.request)("fileExplorer/upload",{method:"POST",data:a}));case 3:case"end":return i.stop()}},s)})),p.apply(this,arguments)}function f(s){return o.apply(this,arguments)}function o(){return o=l()(t()().mark(function s(u){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,E.request)("fileexplorer/upload-from-url",{method:"POST",data:{url:u}}));case 1:case"end":return _.stop()}},s)})),o.apply(this,arguments)}},5251:function(b,C,e){e.d(C,{Er:function(){return O},p6:function(){return U}});var g=e(27484),t=e.n(g);function T(l){return l.trim()}function O(l){return new URL(l||"",localStorage.getItem("wf_URL")||"").href}function U(l){return l?t()(l).format("DD/MM/YYYY hh:mm:ss"):"-"}}}]);
