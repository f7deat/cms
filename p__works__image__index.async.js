"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4165],{1913:function(k,M,e){var C=e(15009),a=e.n(C),L=e(99289),P=e.n(L),T=e(5574),d=e.n(T),_=e(20385),f=e(64082),m=e(16596),u=e(65419),h=e(58301),S=e(98366),p=e(71577),D=e(96074),v=e(96365),r=e(62435),n=e(86074),W=u.Z.Dragger,x=function(E){var $=(0,r.useState)(""),A=d()($,2),F=A[0],B=A[1];function s(t){var i;try{i=new URL(t)}catch(j){return!1}return i.protocol==="https:"}var o=function(){var t=P()(a()().mark(function i(j){var y;return a()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(s(j)){g.next=3;break}return h.ZP.error("Sorry, URL failed to upload."),g.abrupt("return");case 3:return g.next=5,(0,_.tg)(j);case 5:y=g.sent,y.succeeded&&h.ZP.success("Uploaded!");case 7:case"end":return g.stop()}},i)}));return function(j){return t.apply(this,arguments)}}(),l=function(){var t=P()(a()().mark(function i(){return a()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(s(F)){y.next=3;break}return h.ZP.error("Sorry, URL failed to upload."),y.abrupt("return");case 3:E.onFinish(F),E.onCancel();case 5:case"end":return y.stop()}},i)}));return function(){return t.apply(this,arguments)}}();return(0,n.jsxs)(S.Z,{open:E.open,onCancel:function(){return E.onCancel()},centered:!0,title:"Upload",onOk:l,children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsxs)(W,{children:[(0,n.jsx)("p",{className:"ant-upload-drag-icon",children:(0,n.jsx)(f.Z,{})}),(0,n.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),(0,n.jsx)("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibited from uploading company data or other banned files."})]})}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)(p.ZP,{icon:(0,n.jsx)(m.Z,{}),type:"link",size:"large",children:(0,n.jsx)("b",{children:"Choose from your computer"})})}),(0,n.jsx)(D.Z,{children:"or"}),(0,n.jsx)(v.Z,{placeholder:"Paste image or URL",onChange:function(i){return B(i.currentTarget.value)}})]})};M.Z=x},19489:function(k,M,e){var C=e(5251),a=e(69753),L=e(28199),P=e(35312),T=e(32545),d=e(32983),_=e(71577),f=e(96074),m=e(26412),u=e(86074),h=function(p){var D,v=["image/jpeg","image/png","image/webp",".svg",".jpg",".png",".jpeg"],r=(0,P.useIntl)(),n=p.file,W=function(){p.onChange&&p.onChange()},x=function(){var E;return v.includes((E=n==null?void 0:n.type)!==null&&E!==void 0?E:"")?(0,u.jsx)("div",{className:"flex justify-center items-center",style:{minHeight:130},children:(0,u.jsx)(T.Z,{src:(0,C.Er)(n==null?void 0:n.url)})}):(0,u.jsx)("div",{onClick:W,children:(0,u.jsx)(d.Z,{})})};return(0,u.jsxs)(L.Z,{title:r.formatMessage({id:"general.preview"}),actions:[(0,u.jsx)(_.ZP,{type:"link",onClick:function(){return window.location.href=(0,C.Er)(n==null?void 0:n.url)},icon:(0,u.jsx)(a.Z,{}),children:"Download"},"download")],children:[x(),(0,u.jsx)(f.Z,{}),(0,u.jsxs)(m.Z,{title:"File info",column:1,children:[(0,u.jsx)(m.Z.Item,{label:"Name",children:n==null?void 0:n.name}),(0,u.jsxs)(m.Z.Item,{label:"Size",children:[(((D=n==null?void 0:n.size)!==null&&D!==void 0?D:0)/1024).toFixed(2)," KB"]}),(0,u.jsx)(m.Z.Item,{label:"Type",children:n==null?void 0:n.type})]})]})};M.Z=h},16411:function(k,M,e){e.r(M),e.d(M,{default:function(){return y}});var C=e(15009),a=e.n(C),L=e(99289),P=e.n(L),T=e(5574),d=e.n(T),_=e(1913),f=e(97857),m=e.n(f),u=e(34994),h=e(5966),S=e(64317),p=e(58301),D=e(71577),v=e(62435),r=e(86074),n=function(g){var R=u.A.useFormInstance(),w=(0,v.useRef)(),ee=(0,v.useState)(!0),z=d()(ee,2),Q=z[0],N=z[1],ne=(0,v.useState)(),G=d()(ne,2),H=G[0],Y=G[1];(0,v.useEffect)(function(){var U=R==null?void 0:R.getFieldValue("link");if(U){var Z;(Z=w.current)===null||Z===void 0||Z.setFields([{name:"name",value:U.name},{name:"href",value:U.href},{name:"target",value:U.target}])}},[]);var X=function(){var U=P()(a()().mark(function Z(V){return a()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(g.name){c.next=2;break}return c.abrupt("return",p.ZP.warning("Name missing"));case 2:Y(V),R==null||R.setFields([{name:g.name,value:V}]),N(!0);case 5:case"end":return c.stop()}},Z)}));return function(V){return U.apply(this,arguments)}}();return(0,r.jsxs)(u.A.Item,m()(m()({},g),{},{children:[(0,r.jsxs)("div",{style:{display:"flex",gap:16},children:[(0,r.jsx)("div",{style:{height:32,border:"1px dashed #d1d1d1",flex:1,padding:"4px 11px",borderRadius:4},children:H==null?void 0:H.name}),(0,r.jsx)(D.ZP,{type:"primary",onClick:function(){return N(!Q)},children:"Add link"},"primary")]}),(0,r.jsx)("div",{style:{backgroundColor:"#eee",padding:16,borderRadius:4,marginTop:16},hidden:Q,children:(0,r.jsxs)(u.A,{onFinish:X,formRef:w,children:[(0,r.jsx)(h.Z,{name:"name",label:"Name"}),(0,r.jsx)(h.Z,{name:"href",label:"URL",rules:[{required:!0}]}),(0,r.jsx)(S.Z,{name:"target",label:"Target",allowClear:!0,options:[{value:"_blank",label:"Open in new tab"}]})]})})]}))},W=n,x=e(19489),I=e(66352),E=e(82061),$=e(82826),A=e(14361),F=e(63386),B=e(28199),s=e(35312),o=e(93421),l=e(86738),t=e(71230),i=e(15746),j=function(){var g=(0,s.useParams)(),R=g.id,w=(0,s.useIntl)(),ee=(0,v.useState)(),z=d()(ee,2),Q=z[0],N=z[1],ne=(0,v.useState)(!1),G=d()(ne,2),H=G[0],Y=G[1],X=(0,v.useRef)(),U=function(){var c=P()(a()().mark(function O(b){var q;return a()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,(0,I.iH)(R,b);case 2:q=J.sent,q.succeeded?p.ZP.success("Saved!"):p.ZP.error(q.errors[0].description);case 4:case"end":return J.stop()}},O)}));return function(b){return c.apply(this,arguments)}}();(0,v.useEffect)(function(){(0,I.Tu)(R).then(function(c){var O;N(c.file),(O=X.current)===null||O===void 0||O.setFields([{name:"alt",value:c.alt},{name:"src",value:c.src},{name:"link",value:c.link}])})},[]);var Z=function(){var c=P()(a()().mark(function O(){var b;return a()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,I.Js)(R);case 2:b=K.sent,b.succeeded?(p.ZP.success(w.formatMessage({id:"general.deleted"})),s.history.back()):p.ZP.error(b.errors[0].description);case 4:case"end":return K.stop()}},O)}));return function(){return c.apply(this,arguments)}}(),V=(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(l.Z,{title:"Are you sure?",onConfirm:Z,children:(0,r.jsx)(D.ZP,{type:"primary",danger:!0,icon:(0,r.jsx)(E.Z,{}),children:"Delete"})}),(0,r.jsx)(D.ZP,{icon:(0,r.jsx)($.Z,{}),onClick:function(){return s.history.back()},children:"Back"}),(0,r.jsx)(D.ZP,{icon:(0,r.jsx)(A.Z,{})})]}),te=function(O){N(O),Y(!1)};return(0,r.jsxs)(F._z,{title:"Image",extra:V,children:[(0,r.jsxs)(t.Z,{gutter:16,children:[(0,r.jsx)(i.Z,{span:6,children:(0,r.jsx)(x.Z,{file:Q,onChange:function(){return Y(!0)}})}),(0,r.jsx)(i.Z,{span:18,children:(0,r.jsx)(B.Z,{title:w.formatMessage({id:"menu.settings"}),children:(0,r.jsxs)(u.A,{onFinish:U,formRef:X,children:[(0,r.jsx)(h.Z,{name:"src",label:"Src"}),(0,r.jsx)(W,{name:"link",label:"Link"}),(0,r.jsx)(h.Z,{name:"alt",label:"Alt"})]})})})]}),(0,r.jsx)(_.Z,{open:H,onCancel:Y,onFinish:te})]})},y=j},20385:function(k,M,e){e.d(M,{Ah:function(){return u},Cq:function(){return D},V6:function(){return f},kE:function(){return W},p6:function(){return F},tg:function(){return I},yk:function(){return $},z3:function(){return r}});var C=e(15009),a=e.n(C),L=e(97857),P=e.n(L),T=e(99289),d=e.n(T),_=e(35312);function f(s,o,l){return m.apply(this,arguments)}function m(){return m=d()(a()().mark(function s(o,l,t){return a()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",(0,_.request)("file/list",P()({method:"GET",params:P()({type:Object.keys(l!=null?l:[]).length>0?l==null?void 0:l.join(","):""},o)},t||{})));case 1:case"end":return j.stop()}},s)})),m.apply(this,arguments)}function u(s){return h.apply(this,arguments)}function h(){return h=d()(a()().mark(function s(o){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.request)("file/delete-file-content/".concat(o),{method:"POST"}));case 1:case"end":return t.stop()}},s)})),h.apply(this,arguments)}function S(s){return p.apply(this,arguments)}function p(){return p=_asyncToGenerator(_regeneratorRuntime().mark(function s(o){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("file/delete-file-item",{method:"POST",data:o}));case 1:case"end":return t.stop()}},s)})),p.apply(this,arguments)}function D(s){return v.apply(this,arguments)}function v(){return v=d()(a()().mark(function s(o){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.request)("file/".concat(o)));case 1:case"end":return t.stop()}},s)})),v.apply(this,arguments)}function r(s,o){return n.apply(this,arguments)}function n(){return n=d()(a()().mark(function s(o,l){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,_.request)("file/file-items/".concat(l.id)));case 1:case"end":return i.stop()}},s)})),n.apply(this,arguments)}function W(s){return x.apply(this,arguments)}function x(){return x=d()(a()().mark(function s(o){var l;return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return l=new FormData,l.append("file",o),i.abrupt("return",(0,_.request)("file/upload",{method:"POST",data:l}));case 3:case"end":return i.stop()}},s)})),x.apply(this,arguments)}function I(s){return E.apply(this,arguments)}function E(){return E=d()(a()().mark(function s(o){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.request)("file/upload-from-url",{method:"POST",data:{url:o}}));case 1:case"end":return t.stop()}},s)})),E.apply(this,arguments)}function $(){return A.apply(this,arguments)}function A(){return A=d()(a()().mark(function s(){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,_.request)("file/count"));case 1:case"end":return l.stop()}},s)})),A.apply(this,arguments)}function F(){return B.apply(this,arguments)}function B(){return B=d()(a()().mark(function s(){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,_.request)("file/total-size"));case 1:case"end":return l.stop()}},s)})),B.apply(this,arguments)}},5251:function(k,M,e){e.d(M,{Er:function(){return P},es:function(){return _},p6:function(){return T}});var C=e(27484),a=e.n(C);function L(f){return f.trim()}function P(f){return new URL(f||"",localStorage.getItem("wf_URL")||"").href}function T(f){return f?a()(f).format("DD/MM/YYYY hh:mm:ss"):"-"}var d=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(u){setTimeout(function(){u(!0)},m)})},_=function(m){return m?m.split("-")[0]:"en"}}}]);
