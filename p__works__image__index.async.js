"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4165],{19489:function(F,g,e){var j=e(5251),t=e(69753),A=e(28199),D=e(35312),R=e(32545),E=e(32983),l=e(71577),I=e(96074),c=e(26412),m=e(86074),T=function(O){var U,M=["image/jpeg","image/png","image/webp",".svg",".jpg",".png",".jpeg"],C=(0,D.useIntl)(),r=O.file,L=function(){O.onChange&&O.onChange()},P=function(){var i;return M.includes((i=r==null?void 0:r.type)!==null&&i!==void 0?i:"")?(0,m.jsx)("div",{className:"flex justify-center items-center",style:{minHeight:130},children:(0,m.jsx)(R.Z,{src:(0,j.Er)(r==null?void 0:r.url)})}):(0,m.jsx)("div",{onClick:L,children:(0,m.jsx)(E.Z,{})})};return(0,m.jsxs)(A.Z,{title:C.formatMessage({id:"general.preview"}),extra:(0,m.jsx)(l.ZP,{type:"dashed",icon:(0,m.jsx)(t.Z,{}),onClick:function(){return window.location.href=(0,j.Er)(r==null?void 0:r.url)},children:"Download"}),children:[P(),(0,m.jsx)(I.Z,{}),(0,m.jsxs)(c.Z,{title:"File info",column:1,children:[(0,m.jsx)(c.Z.Item,{label:"Name",children:r==null?void 0:r.name}),(0,m.jsxs)(c.Z.Item,{label:"Size",children:[(((U=r==null?void 0:r.size)!==null&&U!==void 0?U:0)/1024).toFixed(2)," KB"]}),(0,m.jsx)(c.Z.Item,{label:"Type",children:r==null?void 0:r.type})]})]})};g.Z=T},99270:function(F,g,e){var j=e(97857),t=e.n(j),A=e(15009),D=e.n(A),R=e(99289),E=e.n(R),l=e(20385),I=e(5251),c=e(88484),m=e(34994),T=e(5966),y=e(37476),O=e(16309),U=e(35312),M=e(58301),C=e(65419),r=e(71577),L=e(55241),P=e(32545),p=e(62435),i=e(86074),s=function(a){var _=(0,U.useIntl)(),u=(0,p.useRef)(),n={name:"file",action:l.kE,accept:"image/png, image/jpeg",onChange:function(d){if(d.file.status!=="uploading"&&console.log(d.file,d.fileList),d.file.status==="done"){var v;M.ZP.success("".concat(d.file.name," file uploaded successfully")),(v=u.current)===null||v===void 0||v.reload()}else d.file.status==="error"&&M.ZP.error("".concat(d.file.name," file upload failed."))}},S=function(){var B=E()(D()().mark(function d(v){var $,x;return D()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,(0,l.tg)(v.url);case 2:$=W.sent,$.succeeded&&(M.ZP.success("Uploaded!"),(x=u.current)===null||x===void 0||x.reload());case 4:case"end":return W.stop()}},d)}));return function(v){return B.apply(this,arguments)}}(),V=(0,i.jsx)(m.A,{onFinish:S,children:(0,i.jsx)(T.Z,{name:"url",rules:[{required:!0}],placeholder:"URL"})});return(0,i.jsx)(y.Y,{open:a.open,onOpenChange:a.onOpenChange,children:(0,i.jsx)(O.Rs,{ghost:!0,toolBarRender:function(){return[(0,p.createElement)(C.Z,t()(t()({},n),{},{key:0}),(0,i.jsx)(r.ZP,{icon:(0,i.jsx)(c.Z,{}),type:"primary",children:"Upload"})),(0,i.jsx)(L.Z,{trigger:"click",content:V,title:"Upload Via URL",children:(0,i.jsx)(r.ZP,{icon:(0,i.jsx)(c.Z,{}),onClick:S,children:"Via URL"})},2)]},headerTitle:_.formatMessage({id:"menu.fileManager"}),request:function(d){return(0,l.V6)(t()({},d),[".png",".jpg",".jpeg","image/jpeg"])},search:{layout:"vertical"},pagination:{pageSize:6},grid:{column:3},onItem:function(d){return{onClick:function(){a.onSelect&&a.onSelect(d)}}},metas:{content:{dataIndex:"name",title:"Name",render:function(d,v){return(0,i.jsx)(P.Z,{src:(0,I.Er)(v.url),height:100,preview:!1})}}},actionRef:u})})};g.Z=s},28301:function(F,g,e){e.r(g);var j=e(15009),t=e.n(j),A=e(99289),D=e.n(A),R=e(5574),E=e.n(R),l=e(19489),I=e(99270),c=e(66352),m=e(82061),T=e(82826),y=e(14361),O=e(63386),U=e(28199),M=e(34994),C=e(5966),r=e(90672),L=e(31199),P=e(35312),p=e(58301),i=e(93421),s=e(86738),o=e(71577),a=e(71230),_=e(15746),u=e(62435),n=e(86074),S=function(){var B=(0,P.useParams)(),d=B.id,v=(0,P.useIntl)(),$=(0,u.useState)(),x=E()($,2),N=x[0],W=x[1],J=(0,u.useState)(!1),Y=E()(J,2),Q=Y[0],z=Y[1],H=(0,u.useRef)(),X=function(){var f=D()(t()().mark(function h(K){var G;return t()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return K.file=N,b.next=3,(0,c.DB)(K);case 3:G=b.sent,G.succeeded?p.ZP.success("Saved!"):p.ZP.error(G.errors[0].description);case 5:case"end":return b.stop()}},h)}));return function(K){return f.apply(this,arguments)}}();(0,u.useEffect)(function(){(0,c.gJ)(d).then(function(f){var h;W(f.file),(h=H.current)===null||h===void 0||h.setFields([{name:"height",value:f.height},{name:"width",value:f.width},{name:"alt",value:f.alt},{name:"description",value:f.description},{name:"className",value:f.className},{name:"wrapper",value:f.wrapper}])})},[]);var w=function(){var f=D()(t()().mark(function h(){var K;return t()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,(0,c.Js)(d);case 2:K=Z.sent,K.succeeded?(p.ZP.success(v.formatMessage({id:"general.deleted"})),P.history.back()):p.ZP.error(K.errors[0].description);case 4:case"end":return Z.stop()}},h)}));return function(){return f.apply(this,arguments)}}(),k=(0,n.jsxs)(i.Z,{children:[(0,n.jsx)(s.Z,{title:"Are you sure?",onConfirm:w,children:(0,n.jsx)(o.ZP,{type:"primary",danger:!0,icon:(0,n.jsx)(m.Z,{}),children:"Delete"})}),(0,n.jsx)(o.ZP,{icon:(0,n.jsx)(T.Z,{}),onClick:function(){return P.history.back()},children:"Back"}),(0,n.jsx)(o.ZP,{icon:(0,n.jsx)(y.Z,{})})]}),q=function(h){W(h),z(!1)};return(0,n.jsxs)(O._z,{title:"Image",extra:k,children:[(0,n.jsxs)(a.Z,{gutter:16,children:[(0,n.jsx)(_.Z,{span:6,children:(0,n.jsx)(l.Z,{file:N,onChange:function(){return z(!0)}})}),(0,n.jsx)(_.Z,{span:18,children:(0,n.jsx)(U.Z,{title:v.formatMessage({id:"menu.settings"}),children:(0,n.jsxs)(M.A,{onFinish:X,formRef:H,children:[(0,n.jsx)(C.Z,{name:"id",hidden:!0,initialValue:d}),(0,n.jsx)(C.Z,{name:"alt",label:"Alt"}),(0,n.jsx)(r.Z,{name:"description",label:"Description"}),(0,n.jsx)(C.Z,{name:"className",label:"Class Name"}),(0,n.jsx)(L.Z,{label:"Width",name:"width"}),(0,n.jsx)(L.Z,{label:"Height",name:"height"}),(0,n.jsx)(C.Z,{label:"Wrapper",name:"wrapper"})]})})})]}),(0,n.jsx)(I.Z,{open:Q,onOpenChange:z,onSelect:q})]})};g.default=S},20385:function(F,g,e){e.d(g,{Ah:function(){return m},Cq:function(){return U},V6:function(){return I},kE:function(){return L},tg:function(){return p},z3:function(){return C}});var j=e(15009),t=e.n(j),A=e(97857),D=e.n(A),R=e(99289),E=e.n(R),l=e(35312);function I(s,o,a){return c.apply(this,arguments)}function c(){return c=E()(t()().mark(function s(o,a,_){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("fileExplorer/list",D()({method:"GET",params:D()({type:Object.keys(a!=null?a:[]).length>0?a==null?void 0:a.join(","):""},o)},_||{})));case 1:case"end":return n.stop()}},s)})),c.apply(this,arguments)}function m(s){return T.apply(this,arguments)}function T(){return T=E()(t()().mark(function s(o){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,l.request)("fileExplorer/delete-file-content/".concat(o),{method:"POST"}));case 1:case"end":return _.stop()}},s)})),T.apply(this,arguments)}function y(s){return O.apply(this,arguments)}function O(){return O=_asyncToGenerator(_regeneratorRuntime().mark(function s(o){return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",request("fileExplorer/delete-file-item",{method:"POST",data:o}));case 1:case"end":return _.stop()}},s)})),O.apply(this,arguments)}function U(s){return M.apply(this,arguments)}function M(){return M=E()(t()().mark(function s(o){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,l.request)("fileExplorer/".concat(o)));case 1:case"end":return _.stop()}},s)})),M.apply(this,arguments)}function C(s,o){return r.apply(this,arguments)}function r(){return r=E()(t()().mark(function s(o,a){return t()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,l.request)("fileExplorer/file-items/".concat(a.id)));case 1:case"end":return u.stop()}},s)})),r.apply(this,arguments)}function L(s){return P.apply(this,arguments)}function P(){return P=E()(t()().mark(function s(o){var a;return t()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=new FormData,a.append("file",o),u.abrupt("return",(0,l.request)("fileExplorer/upload",{method:"POST",data:a}));case 3:case"end":return u.stop()}},s)})),P.apply(this,arguments)}function p(s){return i.apply(this,arguments)}function i(){return i=E()(t()().mark(function s(o){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,l.request)("fileexplorer/upload-from-url",{method:"POST",data:{url:o}}));case 1:case"end":return _.stop()}},s)})),i.apply(this,arguments)}},5251:function(F,g,e){e.d(g,{Er:function(){return D},p6:function(){return R}});var j=e(27484),t=e.n(j);function A(l){return l.trim()}function D(l){return new URL(l||"",localStorage.getItem("wf_URL")||"").href}function R(l){return l?t()(l).format("DD/MM/YYYY hh:mm:ss"):"-"}var E=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(c){setTimeout(function(){c(!0)},I)})}}}]);
