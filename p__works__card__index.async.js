"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[587],{90672:function(G,g,e){var O=e(1413),l=e(91),Z=e(86074),P=e(62435),D=e(15790),m=["fieldProps","proFieldProps"],h=function(o,S){var n=o.fieldProps,M=o.proFieldProps,j=(0,l.Z)(o,m);return(0,Z.jsx)(D.Z,(0,O.Z)({ref:S,valueType:"textarea",fieldProps:n,proFieldProps:M},j))};g.Z=P.forwardRef(h)},72234:function(G,g,e){e.r(g),e.d(g,{default:function(){return me}});var O=e(15009),l=e.n(O),Z=e(99289),P=e.n(Z),D=e(5574),m=e.n(D),h=e(48689),F=e(86738),o=e(71577),S=e(22850),n=e(86074),M=function(a){var p=function(){a.onRemove&&a.onRemove(a.src)};return(0,n.jsx)("div",{className:"flex",children:(0,n.jsxs)("div",{style:{padding:".5rem 2rem",backgroundColor:"#efefef",position:"relative",width:200,height:150,display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},children:[(0,n.jsx)(F.Z,{title:"Are you sure?",onConfirm:p,children:(0,n.jsx)(o.Z,{icon:(0,n.jsx)(h.Z,{}),size:"small",type:"link",danger:!0,style:{position:"absolute",right:0,top:0}})}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)("img",{style:{maxHeight:180,maxWidth:100},src:a.src.url,alt:a.src.name,onClick:a.onClick,className:"cursor-pointer"})}),(0,n.jsx)(S.Z.Text,{className:"truncate",children:a.src.name})]})})},j=M,B=e(97857),E=e.n(B),R=e(20385),y=e(73403),U=e(1413),c=e(62435),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},i=r,u=e(84089),t=function(a,p){return c.createElement(u.Z,(0,U.Z)((0,U.Z)({},a),{},{ref:p,icon:i}))};t.displayName="UploadOutlined";var s=c.forwardRef(t),w=e(13728),k=e(37476),A=e(30029),q=e(22538),ee=e(69677),b=e(2453),_=e(75527),ne=e(31365),te=ee.Z.Search,re=function(a){var p=(0,c.useRef)(),C={name:"file",action:R.kE,onChange:function(d){if(d.file.status!=="uploading"&&console.log(d.file,d.fileList),d.file.status==="done"){var f;b.ZP.success("".concat(d.file.name," file uploaded successfully")),(f=p.current)===null||f===void 0||f.reload()}else d.file.status==="error"&&b.ZP.error("".concat(d.file.name," file upload failed."))}};return(0,n.jsxs)(k.Y,{title:"Select content",open:a.visible,onOpenChange:a.onVisibleChange,onFinish:a.onFinish,children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsxs)(_.Z,{children:[(0,n.jsx)(_.Z.Item,{href:"",children:(0,n.jsx)(y.Z,{})}),(0,n.jsx)(_.Z.Item,{href:"",children:"Home"})]})}),(0,n.jsxs)(A.Z,{title:"List",extra:(0,n.jsx)(ne.Z,E()(E()({},C),{},{children:(0,n.jsx)(o.Z,{icon:(0,n.jsx)(s,{}),type:"primary",children:"Upload"})})),children:[(0,n.jsx)(te,{}),(0,n.jsx)(q.Rs,{request:R.V6,metas:{title:{dataIndex:"name",render:function(d,f){return(0,n.jsx)(o.Z,{type:"link",size:"small",onClick:function(){a.onSelect&&(f.url=new URL(f.url,localStorage.getItem("wf_URL")||"").href,a.onSelect(f))},children:d})}},actions:{render:function(){return(0,n.jsx)(o.Z,{icon:(0,n.jsx)(w.Z,{}),type:"link",size:"small"})}}},actionRef:p})]})]})},ae=re,H=e(66352),se=e(62884),le=e(97269),ie=e(15790),oe=e(5966),ue=e(90672),$=e(90905),K=e(32983),ce=e(71230),V=e(15746),de=function(){var a=(0,$.useIntl)(),p=(0,$.useParams)(),C=p.id,I=(0,c.useRef)(),d=(0,c.useState)(!1),f=m()(d,2),Y=f[0],W=f[1],fe=(0,c.useState)(),J=m()(fe,2),N=J[0],Q=J[1];(0,c.useEffect)(function(){(0,H.nO)(C).then(function(x){if(x){var v;(v=I.current)===null||v===void 0||v.setFields([{name:"title",value:x.title},{name:"text",value:x.text}]),Q(x.image)}})},[C]);var ve=function(){var x=P()(l()().mark(function v(L){var X;return l()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return L.id=C,L.image=N,T.next=4,(0,H.z_)(L);case 4:X=T.sent,X.succeeded&&b.ZP.success(a.formatMessage({id:"general.saved"}));case 6:case"end":return T.stop()}},v)}));return function(L){return x.apply(this,arguments)}}(),he=function(v){Q(v),W(!1)},pe=function(){return N?(0,n.jsx)(j,{src:N,onClick:function(){return W(!0)}}):(0,n.jsx)("div",{className:"image-placeholder",onClick:function(){return W(!0)},children:(0,n.jsx)(K.Z,{})})};return(0,n.jsxs)(se._z,{title:a.formatMessage({id:"menu.component.card"}),children:[(0,n.jsxs)(ce.Z,{gutter:16,children:[(0,n.jsx)(V.Z,{span:4,children:(0,n.jsx)(A.Z,{title:"Work contents",children:(0,n.jsx)(K.Z,{})})}),(0,n.jsx)(V.Z,{span:12,children:(0,n.jsx)(A.Z,{title:"Content",children:(0,n.jsxs)(le.A,{onFinish:ve,formRef:I,children:[(0,n.jsx)(ie.Z,{label:"Image",children:pe()}),(0,n.jsx)(oe.Z,{name:"title",label:"Title"}),(0,n.jsx)(ue.Z,{name:"text",label:"Text"})]})})}),(0,n.jsx)(V.Z,{span:8,children:(0,n.jsx)(A.Z,{title:"Preview",children:(0,n.jsx)(K.Z,{})})})]}),(0,n.jsx)(ae,{visible:Y,onVisibleChange:W,onSelect:he})]})},me=de},20385:function(G,g,e){e.d(g,{Ah:function(){return S},Cq:function(){return B},V6:function(){return F},kE:function(){return U},z3:function(){return R}});var O=e(15009),l=e.n(O),Z=e(97857),P=e.n(Z),D=e(99289),m=e.n(D),h=e(90905);function F(r,i){return o.apply(this,arguments)}function o(){return o=m()(l()().mark(function r(i,u){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,h.request)("fileExplorer/list",P()({method:"GET",params:P()({},i)},u||{})));case 1:case"end":return s.stop()}},r)})),o.apply(this,arguments)}function S(r){return n.apply(this,arguments)}function n(){return n=m()(l()().mark(function r(i){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,h.request)("fileExplorer/delete-file-content/".concat(i),{method:"POST"}));case 1:case"end":return t.stop()}},r)})),n.apply(this,arguments)}function M(r){return j.apply(this,arguments)}function j(){return j=_asyncToGenerator(_regeneratorRuntime().mark(function r(i){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("fileExplorer/delete-file-item",{method:"POST",data:i}));case 1:case"end":return t.stop()}},r)})),j.apply(this,arguments)}function B(r){return E.apply(this,arguments)}function E(){return E=m()(l()().mark(function r(i){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,h.request)("fileExplorer/".concat(i)));case 1:case"end":return t.stop()}},r)})),E.apply(this,arguments)}function R(r,i){return y.apply(this,arguments)}function y(){return y=m()(l()().mark(function r(i,u){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,h.request)("fileExplorer/file-items/".concat(u.id)));case 1:case"end":return s.stop()}},r)})),y.apply(this,arguments)}function U(r){return c.apply(this,arguments)}function c(){return c=m()(l()().mark(function r(i){var u;return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return u=new FormData,u.append("file",i),s.abrupt("return",(0,h.request)("fileExplorer/upload",{method:"POST",data:u}));case 3:case"end":return s.stop()}},r)})),c.apply(this,arguments)}}}]);
