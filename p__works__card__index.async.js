"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8587],{88484:function(b,h,e){e.d(h,{Z:function(){return d}});var v=e(1413),t=e(62435),O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},f=O,C=e(84089),_=function(m,E){return t.createElement(C.Z,(0,v.Z)((0,v.Z)({},m),{},{ref:E,icon:f}))};_.displayName="UploadOutlined";var d=t.forwardRef(_)},90672:function(b,h,e){var v=e(1413),t=e(91),O=e(86074),f=e(62435),C=e(25338),_=["fieldProps","proFieldProps"],d=function(m,E){var n=m.fieldProps,p=m.proFieldProps,P=(0,t.Z)(m,_);return(0,O.jsx)(C.Z,(0,v.Z)({ref:E,valueType:"textarea",fieldProps:n,proFieldProps:p},P))};h.Z=f.forwardRef(d)},5966:function(b,h,e){var v=e(1413),t=e(91),O=e(86074),f=e(25338),C=["fieldProps","proFieldProps"],_=["fieldProps","proFieldProps"],d="text",T=function(p){var P=p.fieldProps,U=p.proFieldProps,D=(0,t.Z)(p,C);return(0,O.jsx)(f.Z,(0,v.Z)({valueType:d,fieldProps:P,filedConfig:{valueType:d},proFieldProps:U},D))},m=function(p){var P=p.fieldProps,U=p.proFieldProps,D=(0,t.Z)(p,_);return(0,O.jsx)(f.Z,(0,v.Z)({valueType:"password",fieldProps:P,proFieldProps:U,filedConfig:{valueType:d}},D))},E=T;E.Password=m,E.displayName="ProFormComponent",h.Z=E},12873:function(b,h,e){var v=e(97857),t=e.n(v),O=e(15009),f=e.n(O),C=e(99289),_=e.n(C),d=e(5574),T=e.n(d),m=e(20385),E=e(73403),n=e(88484),p=e(99611),P=e(48689),U=e(13728),D=e(99351),N=e(22538),M=e(90905),W=e(27790),R=e(75527),L=e(69677),I=e(71577),a=e(31365),u=e(26713),l=e(13013),s=e(86738),c=e(62435),r=e(86074),Q=function(S){var j=(0,M.useIntl)(),B=(0,c.useRef)(),F=(0,c.useState)(),z=T()(F,2),V=z[0],$=z[1],Y={name:"file",action:m.kE,onChange:function(o){if(o.file.status!=="uploading"&&console.log(o.file,o.fileList),o.file.status==="done"){var i;W.ZP.success("".concat(o.file.name," file uploaded successfully")),(i=B.current)===null||i===void 0||i.reload()}else o.file.status==="error"&&W.ZP.error("".concat(o.file.name," file upload failed."))}},K=function(){var x=_()(f()().mark(function o(){var i,y;return f()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(V){Z.next=2;break}return Z.abrupt("return");case 2:return Z.next=4,(0,m.tg)(V);case 4:i=Z.sent,i.succeeded&&(W.ZP.success("Uploaded!"),(y=B.current)===null||y===void 0||y.reload());case 6:case"end":return Z.stop()}},o)}));return function(){return x.apply(this,arguments)}}();return(0,r.jsxs)(D.Y,{open:S.open,onOpenChange:S.onOpenChange,onFinish:S.onFinish,submitter:!1,children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsxs)(R.Z,{children:[(0,r.jsx)(R.Z.Item,{href:"",children:(0,r.jsx)(E.Z,{})}),(0,r.jsx)(R.Z.Item,{href:"",children:"Home"})]})}),(0,r.jsxs)(L.Z.Group,{compact:!0,className:"mb-4",children:[(0,r.jsx)(L.Z,{style:{width:"calc(100% - 200px)"},onChange:function(o){return $(o.currentTarget.value)}}),(0,r.jsx)(I.Z,{type:"primary",onClick:K,children:"Quick add"})]}),(0,r.jsx)(N.Rs,{toolBarRender:function(){return[(0,c.createElement)(a.Z,t()(t()({},Y),{},{key:0}),(0,r.jsx)(I.Z,{icon:(0,r.jsx)(n.Z,{}),type:"primary",children:"Upload"}))]},headerTitle:j.formatMessage({id:"menu.fileManager"}),request:function(o){return(0,m.V6)(t()({},o),S.type)},rowSelection:{},search:{layout:"vertical"},pagination:{pageSize:5},metas:{title:{dataIndex:"name",title:"Name",render:function(o,i){return(0,r.jsx)("a",{onClick:function(){S.onSelect&&(i.url=new URL(i.url,localStorage.getItem("wf_URL")||"").href,S.onSelect(i))},children:o})}},description:{search:!1,render:function(o,i){return(0,r.jsxs)(u.Z,{children:[(0,r.jsx)("span",{children:i.type}),(0,r.jsx)("span",{children:"|"}),(0,r.jsxs)("span",{children:[(i.size/1024).toFixed(2)," KB"]})]})}},actions:{render:function(o,i){return(0,r.jsx)(l.Z,{menu:{items:[{key:1,label:(0,r.jsxs)(u.Z,{onClick:function(){return M.history.push("/files/center/".concat(i.id))},children:[(0,r.jsx)(p.Z,{}),(0,r.jsx)(M.FormattedMessage,{id:"general.preview"})]})},{key:2,label:(0,r.jsx)(s.Z,{title:"Are you sure?",children:(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(P.Z,{}),"Delete"]})}),danger:!0}]},children:(0,r.jsx)(I.Z,{icon:(0,r.jsx)(U.Z,{}),type:"link",size:"small"})})}}},actionRef:B})]})};h.Z=Q},67721:function(b,h,e){e.r(h),e.d(h,{default:function(){return J}});var v=e(15009),t=e.n(v),O=e(99289),f=e.n(O),C=e(5574),_=e.n(C),d=e(48689),T=e(86738),m=e(71577),E=e(22850),n=e(86074),p=function(j){var B=function(){j.onRemove&&j.onRemove(j.src)};return(0,n.jsx)("div",{className:"flex",children:(0,n.jsxs)("div",{style:{padding:".5rem 2rem",backgroundColor:"#efefef",position:"relative",width:200,height:150,display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},children:[(0,n.jsx)(T.Z,{title:"Are you sure?",onConfirm:B,children:(0,n.jsx)(m.Z,{icon:(0,n.jsx)(d.Z,{}),size:"small",type:"link",danger:!0,style:{position:"absolute",right:0,top:0}})}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)("img",{style:{maxHeight:180,maxWidth:100},src:j.src.url,alt:j.src.name,onClick:j.onClick,className:"cursor-pointer"})}),(0,n.jsx)(E.Z.Text,{className:"truncate",children:j.src.name})]})})},P=p,U=e(12873),D=e(66352),N=e(62884),M=e(30029),W=e(97269),R=e(25338),L=e(5966),I=e(90672),a=e(90905),u=e(27790),l=e(32983),s=e(71230),c=e(15746),r=e(62435),Q=function(){var j=(0,a.useIntl)(),B=(0,a.useParams)(),F=B.id,z=(0,r.useRef)(),V=(0,r.useState)(!1),$=_()(V,2),Y=$[0],K=$[1],x=(0,r.useState)(),o=_()(x,2),i=o[0],y=o[1];(0,r.useEffect)(function(){(0,D.nO)(F).then(function(A){if(A){var g;(g=z.current)===null||g===void 0||g.setFields([{name:"title",value:A.title},{name:"text",value:A.text}]),y(A.image)}})},[F]);var X=function(){var A=f()(t()().mark(function g(H){var w;return t()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return H.id=F,H.image=i,G.next=4,(0,D.z_)(H);case 4:w=G.sent,w.succeeded&&u.ZP.success(j.formatMessage({id:"general.saved"}));case 6:case"end":return G.stop()}},g)}));return function(H){return A.apply(this,arguments)}}(),Z=function(g){y(g),K(!1)},k=function(){return i?(0,n.jsx)(P,{src:i,onClick:function(){return K(!0)}}):(0,n.jsx)("div",{className:"image-placeholder",onClick:function(){return K(!0)},children:(0,n.jsx)(l.Z,{})})};return(0,n.jsxs)(N._z,{title:j.formatMessage({id:"menu.component.card"}),children:[(0,n.jsxs)(s.Z,{gutter:16,children:[(0,n.jsx)(c.Z,{span:4,children:(0,n.jsx)(M.Z,{title:"Work contents",children:(0,n.jsx)(l.Z,{})})}),(0,n.jsx)(c.Z,{span:12,children:(0,n.jsx)(M.Z,{title:"Content",children:(0,n.jsxs)(W.A,{onFinish:X,formRef:z,children:[(0,n.jsx)(R.Z,{label:"Image",children:k()}),(0,n.jsx)(L.Z,{name:"title",label:"Title"}),(0,n.jsx)(I.Z,{name:"text",label:"Text"})]})})}),(0,n.jsx)(c.Z,{span:8,children:(0,n.jsx)(M.Z,{title:"Preview",children:(0,n.jsx)(l.Z,{})})})]}),(0,n.jsx)(U.Z,{open:Y,onOpenChange:K,onSelect:Z})]})},J=Q},20385:function(b,h,e){e.d(h,{Ah:function(){return E},Cq:function(){return U},V6:function(){return T},kE:function(){return W},tg:function(){return L},z3:function(){return N}});var v=e(15009),t=e.n(v),O=e(97857),f=e.n(O),C=e(99289),_=e.n(C),d=e(90905);function T(a,u,l){return m.apply(this,arguments)}function m(){return m=_()(t()().mark(function a(u,l,s){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.request)("fileExplorer/list",f()({method:"GET",params:f()({type:Object.keys(l!=null?l:[]).length>0?l==null?void 0:l.join(","):""},u)},s||{})));case 1:case"end":return r.stop()}},a)})),m.apply(this,arguments)}function E(a){return n.apply(this,arguments)}function n(){return n=_()(t()().mark(function a(u){return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,d.request)("fileExplorer/delete-file-content/".concat(u),{method:"POST"}));case 1:case"end":return s.stop()}},a)})),n.apply(this,arguments)}function p(a){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime().mark(function a(u){return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",request("fileExplorer/delete-file-item",{method:"POST",data:u}));case 1:case"end":return s.stop()}},a)})),P.apply(this,arguments)}function U(a){return D.apply(this,arguments)}function D(){return D=_()(t()().mark(function a(u){return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,d.request)("fileExplorer/".concat(u)));case 1:case"end":return s.stop()}},a)})),D.apply(this,arguments)}function N(a,u){return M.apply(this,arguments)}function M(){return M=_()(t()().mark(function a(u,l){return t()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,d.request)("fileExplorer/file-items/".concat(l.id)));case 1:case"end":return c.stop()}},a)})),M.apply(this,arguments)}function W(a){return R.apply(this,arguments)}function R(){return R=_()(t()().mark(function a(u){var l;return t()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return l=new FormData,l.append("file",u),c.abrupt("return",(0,d.request)("fileExplorer/upload",{method:"POST",data:l}));case 3:case"end":return c.stop()}},a)})),R.apply(this,arguments)}function L(a){return I.apply(this,arguments)}function I(){return I=_()(t()().mark(function a(u){return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,d.request)("fileexplorer/upload-from-url",{method:"POST",data:{url:u}}));case 1:case"end":return s.stop()}},a)})),I.apply(this,arguments)}}}]);
