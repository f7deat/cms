"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[690],{77171:function(b,_,e){e.d(_,{Z:function(){return c}});var o=e(1413),t=e(62435),m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]},name:"arrow-down",theme:"outlined"},d=m,f=e(84089),i=function(u,v){return t.createElement(f.Z,(0,o.Z)((0,o.Z)({},u),{},{ref:v,icon:d}))};i.displayName="ArrowDownOutlined";var c=t.forwardRef(i)},1912:function(b,_,e){e.d(_,{Z:function(){return c}});var o=e(1413),t=e(62435),m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"},d=m,f=e(84089),i=function(u,v){return t.createElement(f.Z,(0,o.Z)((0,o.Z)({},u),{},{ref:v,icon:d}))};i.displayName="ArrowUpOutlined";var c=t.forwardRef(i)},63434:function(b,_,e){var o=e(1413),t=e(91),m=e(86074),d=e(22270),f=e(32808),i=e(62435),c=e(90789),D=e(15790),u=["options","fieldProps","proFieldProps","valueEnum"],v=i.forwardRef(function(a,r){var h=a.options,O=a.fieldProps,g=a.proFieldProps,p=a.valueEnum,n=(0,t.Z)(a,u);return(0,m.jsx)(D.Z,(0,o.Z)({ref:r,valueType:"checkbox",valueEnum:(0,d.h)(p,void 0),fieldProps:(0,o.Z)({options:h},O),lightProps:(0,o.Z)({labelFormatter:function(){return(0,m.jsx)(D.Z,(0,o.Z)({ref:r,valueType:"checkbox",mode:"read",valueEnum:(0,d.h)(p,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,o.Z)({options:h},O),proFieldProps:g},n))}},n.lightProps),proFieldProps:g},n))}),Z=i.forwardRef(function(a,r){var h=a.fieldProps,O=a.children;return(0,m.jsx)(f.Z,(0,o.Z)((0,o.Z)({ref:r},h),{},{children:O}))}),s=(0,c.G)(Z,{valuePropName:"checked"}),C=s;C.Group=v,_.Z=C},64317:function(b,_,e){var o=e(1413),t=e(91),m=e(86074),d=e(22270),f=e(62435),i=e(66758),c=e(15790),D=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],u=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],v=f.forwardRef(function(r,h){var O=r.fieldProps,g=r.children,p=r.params,n=r.proFieldProps,N=r.mode,Q=r.valueEnum,G=r.request,K=r.showSearch,U=r.options,F=(0,t.Z)(r,D),H=(0,f.useContext)(i.Z);return(0,m.jsx)(c.Z,(0,o.Z)((0,o.Z)({valueEnum:(0,d.h)(Q),request:G,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,o.Z)({options:U,mode:N,showSearch:K,getPopupContainer:H.getPopupContainer},O),ref:h,proFieldProps:n},F),{},{children:g}))}),Z=f.forwardRef(function(r,h){var O=r.fieldProps,g=r.children,p=r.params,n=r.proFieldProps,N=r.mode,Q=r.valueEnum,G=r.request,K=r.options,U=(0,t.Z)(r,u),F=(0,o.Z)({options:K,mode:N||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},O),H=(0,f.useContext)(i.Z);return(0,m.jsx)(c.Z,(0,o.Z)((0,o.Z)({valueEnum:(0,d.h)(Q),request:G,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,o.Z)({getPopupContainer:H.getPopupContainer},F),ref:h,proFieldProps:n},U),{},{children:g}))}),s=v,C=Z,a=s;a.SearchSelect=C,a.displayName="ProFormComponent",_.Z=a},90672:function(b,_,e){var o=e(1413),t=e(91),m=e(86074),d=e(62435),f=e(15790),i=["fieldProps","proFieldProps"],c=function(u,v){var Z=u.fieldProps,s=u.proFieldProps,C=(0,t.Z)(u,i);return(0,m.jsx)(f.Z,(0,o.Z)({ref:v,valueType:"textarea",fieldProps:Z,proFieldProps:s},C))};_.Z=d.forwardRef(c)},5966:function(b,_,e){var o=e(1413),t=e(91),m=e(86074),d=e(15790),f=["fieldProps","proFieldProps"],i=["fieldProps","proFieldProps"],c="text",D=function(s){var C=s.fieldProps,a=s.proFieldProps,r=(0,t.Z)(s,f);return(0,m.jsx)(d.Z,(0,o.Z)({valueType:c,fieldProps:C,filedConfig:{valueType:c},proFieldProps:a},r))},u=function(s){var C=s.fieldProps,a=s.proFieldProps,r=(0,t.Z)(s,i);return(0,m.jsx)(d.Z,(0,o.Z)({valueType:"password",fieldProps:C,proFieldProps:a,filedConfig:{valueType:c}},r))},v=D;v.Password=u,v.displayName="ProFormComponent",_.Z=v},16507:function(b,_,e){e.d(_,{Z:function(){return s}});var o=e(5574),t=e.n(o),m=e(90905);function d(){return(0,m.request)("component/list")}function f(C){return request("component/add",{method:"POST",data:C})}var i=e(99351),c=e(5966),D=e(64317),u=e(62435),v=e(86074),Z=function(a){var r=(0,u.useState)(),h=t()(r,2),O=h[0],g=h[1];return(0,u.useEffect)(function(){d().then(function(p){g(p.map(function(n){return{label:n.name,value:n.id}}))})},[]),(0,v.jsxs)(i.Y,{open:a.visible,title:"Add component",onFinish:a.onFinish,onOpenChange:a.onVisibleChange,children:[(0,v.jsx)(c.Z,{name:"name",label:"Name"}),(0,v.jsx)(D.Z,{showSearch:!0,options:O,name:"componentId",label:"Component"})]})},s=Z},14027:function(b,_,e){var o=e(15009),t=e.n(o),m=e(99289),d=e.n(m),f=e(5574),i=e.n(f),c=e(66352),D=e(24969),u=e(86548),v=e(1912),Z=e(77171),s=e(48689),C=e(22538),a=e(27790),r=e(71577),h=e(86738),O=e(90905),g=e(62435),p=e(16507),n=e(86074),N=function(G){var K=(0,O.useParams)(),U=K.id,F=(0,g.useRef)(),H=(0,g.useState)(!1),ae=i()(H,2),me=ae[0],re=ae[1];(0,g.useEffect)(function(){var x;(x=F.current)===null||x===void 0||x.reload()},[U]);var ve=function(){var x=d()(t()().mark(function M(l){var j,S;return t()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,c.zt)(l,U);case 2:j=E.sent,j.succeeded&&(a.ZP.success("Deleted!"),(S=F.current)===null||S===void 0||S.reload());case 4:case"end":return E.stop()}},M)}));return function(l){return x.apply(this,arguments)}}(),se=function(){var x=d()(t()().mark(function M(l,j){var S,z;return t()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return l.sortOrder=j?l.sortOrder-1:l.sortOrder+1,R.next=3,(0,c.aN)(l.id,l.catalogId,l.sortOrder);case 3:S=R.sent,S.succeeded&&(a.ZP.success("Sorted!"),(z=F.current)===null||z===void 0||z.reload());case 5:case"end":return R.stop()}},M)}));return function(l,j){return x.apply(this,arguments)}}(),le=function(){var x=d()(t()().mark(function M(l){var j,S;return t()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return l.catalogId=U,E.next=3,(0,c.yL)(l);case 3:j=E.sent,j.succeeded&&(a.ZP.success("Added!"),re(!1),(S=F.current)===null||S===void 0||S.reload());case 5:case"end":return E.stop()}},M)}));return function(l){return x.apply(this,arguments)}}();return(0,n.jsxs)("div",{children:[(0,n.jsx)(C.Rs,{toolBarRender:function(){return[(0,n.jsx)(r.Z,{onClick:function(){return re(!0)},type:"primary",icon:(0,n.jsx)(D.Z,{}),children:(0,n.jsx)(O.FormattedMessage,{id:"general.new"})},0)]},rowSelection:{},actionRef:F,request:d()(t()().mark(function x(){return t()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,c.KC)(U,G.child));case 1:case"end":return l.stop()}},x)})),headerTitle:"Work items",metas:{title:{dataIndex:"name"},actions:{render:function(M,l){return[(0,n.jsx)(r.Z,{type:"primary",icon:(0,n.jsx)(u.Z,{}),onClick:function(){O.history.push("/works/".concat(l.normalizedName.toLocaleLowerCase(),"/").concat(l.id))}},1),(0,n.jsx)(r.Z,{icon:(0,n.jsx)(v.Z,{}),onClick:function(){return se(l,!0)}},2),(0,n.jsx)(r.Z,{icon:(0,n.jsx)(Z.Z,{}),onClick:function(){return se(l,!1)}},3),(0,n.jsxs)(h.Z,{title:"Are you sure?",onConfirm:function(){return ve(l.id)},children:[(0,n.jsx)(r.Z,{icon:(0,n.jsx)(s.Z,{}),danger:!0,type:"primary"}),","]},4)]}}}}),(0,n.jsx)(p.Z,{visible:me,onVisibleChange:re,onFinish:le})]})};_.Z=N},93658:function(b,_,e){e.r(_),e.d(_,{default:function(){return S}});var o=e(15009),t=e.n(o),m=e(99289),d=e.n(m),f=e(5574),i=e.n(f),c=e(19632),D=e.n(c),u=e(12361),v=e(24969),Z=e(99351),s=e(5966),C=e(63434),a=e(90905),r=e(69677),h=e(27790),O=e(71577),g=e(39890),p=e(62435),n=e(86074),N=r.Z.Search,Q=function(){var E=(0,p.useRef)(),R=(0,p.useState)([]),$=i()(R,2),X=$[0],A=$[1],I=(0,p.useState)([]),y=i()(I,2),w=y[0],k=y[1],ie=(0,p.useState)(!0),L=i()(ie,2),q=L[0],de=L[1],_e=(0,p.useState)(!1),ee=i()(_e,2),pe=ee[0],Pe=ee[1];(0,p.useEffect)(function(){(0,u.jr)().then(function(Y){A(Y)})},[]);var Oe=function(P){console.log(P);var W=P.node.key,ue=P.dragNode.key,fe=P.node.pos.split("-"),V=P.dropPosition-Number(fe[fe.length-1]),ce=function T(B,ne,Ce){for(var J=0;J<B.length;J++){if(B[J].key===ne)return Ce(B[J],J,B);B[J].children&&T(B[J].children,ne,Ce)}},te=D()(X),oe;if(ce(te,ue,function(T,B,ne){ne.splice(B,1),oe=T}),!P.dropToGap)ce(te,W,function(T){T.children=T.children||[],T.children.unshift(oe)});else if((P.node.props.children||[]).length>0&&P.node.props.expanded&&V===1)ce(te,W,function(T){T.children=T.children||[],T.children.unshift(oe)});else{var he=[],Ee;ce(te,W,function(T,B,ne){he=ne,Ee=B}),V===-1?he.splice(Ee,0,oe):he.splice(Ee+1,0,oe)}var ge={dragNodeKey:P.dragNodesKeys[0],node:P.node.key,dropToGap:P.dropToGap};(0,u.m6)(ge).then(function(T){T.succeeded&&h.ZP.success("Saved!")}),A(te)},De=function(P){k(P),de(!1)},xe=function(P){var W;if(!P||P.length===0){h.ZP.warning("Can de-select");return}(W=E.current)===null||W===void 0||W.setFieldValue("parentId",P[0]),a.history.push("/catalog/".concat(P[0]))},Me=function(){var Y=d()(t()().mark(function P(W){var ue;return t()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,(0,u.BP)(W);case 2:ue=V.sent,ue.succeeded&&(h.ZP.success("Saved!"),Pe(!1));case 4:case"end":return V.stop()}},P)}));return function(W){return Y.apply(this,arguments)}}(),Ze=function(){Pe(!0)};return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(N,{}),(0,n.jsx)(O.Z,{type:"primary",icon:(0,n.jsx)(v.Z,{}),onClick:Ze})]}),(0,n.jsx)("div",{className:"bg-white",children:(0,n.jsx)(g.Z,{showLine:!0,showIcon:!0,treeData:X,expandedKeys:w,onExpand:De,autoExpandParent:q,draggable:!0,onSelect:xe,onDrop:Oe})}),(0,n.jsxs)(Z.Y,{onOpenChange:Pe,open:pe,onFinish:Me,formRef:E,children:[(0,n.jsx)(s.Z,{name:"parentId",label:"Parrent Id",disabled:!0}),(0,n.jsx)(s.Z,{name:"name",label:"Name"}),(0,n.jsx)(s.Z,{name:"normalizedName",label:"Normalized Name"}),(0,n.jsx)(C.Z,{name:"active",label:"Active"})]})]})},G=Q,K=e(55375),U=e(97269),F=e(90672),H=e(64317),ae=e(96074),me=function(){var E=(0,a.useParams)(),R=E.id,$=(0,p.useRef)();(0,p.useEffect)(function(){(0,u.R4)(R).then(function(A){var I;(I=$.current)===null||I===void 0||I.setFields([{name:"id",value:A.id},{name:"name",value:A.name},{name:"normalizedName",value:A.normalizedName},{name:"title",value:A.setting.title},{name:"container",value:A.setting.container},{name:"type",value:A.type}])})},[R]);var X=function(){var A=d()(t()().mark(function I(y){var w,k;return t()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return w={title:y.title,container:y.container},y.setting=w,L.next=4,(0,u.BA)(y);case 4:k=L.sent,k.succeeded&&h.ZP.success("Saved!");case 6:case"end":return L.stop()}},I)}));return function(y){return A.apply(this,arguments)}}();return(0,n.jsxs)(U.A,{formRef:$,onFinish:X,children:[(0,n.jsx)(s.Z,{name:"id",hidden:!0}),(0,n.jsx)(s.Z,{name:"name",label:"Name"}),(0,n.jsx)(s.Z,{name:"normalizedName",label:"Normalized name"}),(0,n.jsx)(F.Z,{name:"description",label:"Description"}),(0,n.jsx)(H.Z,{name:"type",label:"Type",options:[{label:"Page",value:K.H.Default},{label:"Setting",value:K.H.Setting},{label:"Home",value:K.H.Entry}]}),(0,n.jsx)(ae.Z,{}),(0,n.jsx)(s.Z,{name:"title",label:"Title"}),(0,n.jsx)(C.Z,{name:"container",label:"Container"})]})},re=me,ve=e(14027),se=e(62884),le=e(30029),x=e(71230),M=e(15746),l=e(32983),j=function(){var E=(0,a.useIntl)(),R=(0,p.useState)(!1),$=i()(R,2),X=$[0],A=$[1],I=(0,p.useState)("tab1"),y=i()(I,2),w=y[0],k=y[1],ie=function(){var L=d()(t()().mark(function q(de){return t()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:(0,u.BP)(de).then(function(pe){pe.succeeded&&(h.ZP.success("Saved!"),A(!1))});case 1:case"end":return ee.stop()}},q)}));return function(de){return L.apply(this,arguments)}}();return(0,n.jsx)(se._z,{children:(0,n.jsxs)(x.Z,{gutter:16,children:[(0,n.jsx)(M.Z,{span:6,children:(0,n.jsx)(G,{})}),(0,n.jsxs)(M.Z,{span:12,children:[(0,n.jsx)(le.Z,{tabs:{tabPosition:"top",activeKey:w,items:[{label:"Content",key:"tab1",children:(0,n.jsx)(ve.Z,{child:!1})},{label:E.formatMessage({id:"menu.settings"}),key:"tab2",children:(0,n.jsx)(re,{})}],onChange:function(q){k(q)}}}),(0,n.jsxs)(Z.Y,{onFinish:ie,open:X,onOpenChange:A,children:[(0,n.jsx)(s.Z,{name:"name",label:"Name"}),(0,n.jsx)(s.Z,{name:"normalizedName",label:"Normalized Name"})]})]}),(0,n.jsx)(M.Z,{span:6,children:(0,n.jsx)(le.Z,{children:(0,n.jsx)(l.Z,{})})})]})})},S=j}}]);
