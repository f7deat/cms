"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5690],{76131:function(q,b,n){var N=n(37476),r=n(5966),k=n(65675),u=n(86074),T=function(y){return(0,u.jsxs)(N.Y,{open:y.open,title:"Component",onFinish:y.onFinish,onOpenChange:y.onOpenChange,children:[(0,u.jsx)(r.Z,{name:"name",label:"Name"}),(0,u.jsx)(k.Z,{name:"componentId",label:"Component"})]})};b.Z=T},65675:function(q,b,n){var N=n(98364),r=n(64317),k=n(86074),u=function(j){return(0,k.jsx)(r.Z,{showSearch:!0,request:N.Ef,name:j.name,label:j.label})};b.Z=u},60856:function(q,b,n){n.r(b),n.d(b,{default:function(){return Ie}});var N=n(15009),r=n.n(N),k=n(99289),u=n.n(k),T=n(5574),j=n.n(T),y=n(66352),ee=n(47389),U=n(82061),Q=n(1413),d=n(62435),ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},J=ne,re=n(91146),V=function(L,h){return d.createElement(re.Z,(0,Q.Z)((0,Q.Z)({},L),{},{ref:h,icon:J}))};V.displayName="MoreOutlined";var te=d.forwardRef(V),B=n(51042),ae=n(62639),z=n(37476),o=n(5966),P=n(64317),i=n(58301),t=n(71577),M=n(86738),ce=n(85418),R=n(35312),de=n(76131),e=n(86074),me=function(){var L=(0,R.useParams)(),h=L.id,G=(0,d.useState)([]),w=j()(G,2),Y=w[0],I=w[1],A=(0,d.useState)(!1),W=j()(A,2),C=W[0],F=W[1],S=(0,d.useState)(!1),f=j()(S,2),c=f[0],s=f[1],v=(0,d.useState)(),E=j()(v,2),a=E[0],x=E[1],$=function(){(0,y.KC)(h).then(function(m){I(m.data)})};(0,d.useEffect)(function(){h&&$()},[h]);var Z=function(){var O=u()(r()().mark(function m(l){var p;return r()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,y.zt)(l,h);case 2:p=g.sent,p.succeeded?(i.ZP.success("Deleted!"),$()):i.ZP.error(p.errors[0].description);case 4:case"end":return g.stop()}},m)}));return function(l){return O.apply(this,arguments)}}(),H=function(){var O=u()(r()().mark(function m(l){var p;return r()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return l.catalogId=h,g.next=3,(0,y.yL)(l);case 3:p=g.sent,p.succeeded&&(i.ZP.success("Added!"),F(!1),$());case 5:case"end":return g.stop()}},m)}));return function(l){return O.apply(this,arguments)}}(),se=function(){var O=u()(r()().mark(function m(){var l;return r()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,y.x)();case 2:l=D.sent,x(l),s(!0);case 5:case"end":return D.stop()}},m)}));return function(){return O.apply(this,arguments)}}(),Te=function(){var O=u()(r()().mark(function m(l){var p;return r()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,y.jX)(l);case 2:p=g.sent,p.succeeded&&(i.ZP.success("Saved"),s(!1),$());case 4:case"end":return g.stop()}},m)}));return function(l){return O.apply(this,arguments)}}(),Re=[{key:"1",label:"Show / Hide"}],we=function(){var O=u()(r()().mark(function m(l,p){var D;return r()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(l.key!=="1"){X.next=5;break}return X.next=3,(0,y.Wv)(p);case 3:D=X.sent,D.succeeded&&(i.ZP.success("Actived!"),$());case 5:case"end":return X.stop()}},m)}));return function(l,p){return O.apply(this,arguments)}}(),Fe=[{title:"#",dataIndex:"sort",className:"drag-visible"},{title:"Name",dataIndex:"name"},{title:"Status",dataIndex:"active",valueEnum:{false:{text:"Draft",status:"Default"},true:{text:"Active",status:"Processing"}}},{title:"Action",valueType:"option",render:function(m,l){return[(0,e.jsx)(t.ZP,{type:"primary",icon:(0,e.jsx)(ee.Z,{}),onClick:function(){R.history.push("/works/".concat(l.normalizedName.toLocaleLowerCase(),"/").concat(l.id))}},1),(0,e.jsx)(M.Z,{title:"Are you sure?",onConfirm:function(){return Z(l.id)},children:(0,e.jsx)(t.ZP,{icon:(0,e.jsx)(U.Z,{}),danger:!0,type:"primary"})},4),(0,e.jsx)(ce.Z,{menu:{items:Re,onClick:function(D){return we(D,l.id)}},children:(0,e.jsx)(t.ZP,{icon:(0,e.jsx)(te,{}),type:"dashed"})},"more")]}}],Ae=function(m){var l=m.map(function(p){return p.id});(0,y.P0)(l).then(function(p){p.succeeded&&(I(m),i.ZP.success("Saved!"))})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"mb-2 flex justify-end gap-2",children:[(0,e.jsx)(t.ZP,{onClick:function(){return F(!0)},type:"primary",icon:(0,e.jsx)(B.Z,{}),children:(0,e.jsx)("span",{children:(0,e.jsx)(R.FormattedMessage,{id:"general.new"})})},0),(0,e.jsx)(t.ZP,{onClick:se,icon:(0,e.jsx)(B.Z,{}),children:"Ch\u1ECDn"},1)]}),(0,e.jsx)(ae.Z,{search:!1,rowKey:"id",columns:Fe,pagination:!1,dataSource:Y,dragSortKey:"sort",onDragSortEnd:Ae}),(0,e.jsx)(de.Z,{open:C,onOpenChange:F,onFinish:H}),(0,e.jsxs)(z.Y,{open:c,onOpenChange:s,onFinish:Te,children:[(0,e.jsx)(o.Z,{name:"catalogId",initialValue:h,hidden:!0}),(0,e.jsx)(P.Z,{showSearch:!0,name:"workContentId",options:a,label:"Work"})]})]})},pe=me,K=n(12361),fe=n(63386),oe=n(28199),ve=n(71230),ie=n(15746),he=n(26876),ge=n(8811),Ce=n(88608),je=n(32545),Pe=function(){var L=(0,R.useParams)(),h=L.id,G=(0,d.useState)(!1),w=j()(G,2),Y=w[0],I=w[1],A=(0,d.useState)([]),W=j()(A,2),C=W[0],F=W[1];(0,d.useEffect)(function(){(0,K.NU)(h).then(function(s){s&&F(s.images)})},[]);var S=function(){return I(!1)},f=function(){var s=u()(r()().mark(function v(E){var a,x;return r()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return a=C,a.push(E),Z.next=4,(0,K.kn)(a,h);case 4:x=Z.sent,x.succeeded?(F(a),i.ZP.success("Saved!")):i.ZP.error(x.errors[0].description);case 6:case"end":return Z.stop()}},v)}));return function(E){return s.apply(this,arguments)}}(),c=function(){var s=u()(r()().mark(function v(E){var a,x;return r()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return a=C.filter(function(H){return H!==E}),Z.next=3,(0,K.kn)(a,h);case 3:x=Z.sent,x.succeeded?(F(a),i.ZP.success("Saved!")):i.ZP.error(x.errors[0].description);case 5:case"end":return Z.stop()}},v)}));return function(E){return s.apply(this,arguments)}}();return(0,e.jsxs)(oe.Z,{children:[(0,e.jsxs)("div",{className:"flex gap-4",children:[C.map(function(s,v){return(0,e.jsxs)("div",{className:"btn-upload p-2",children:[(0,e.jsx)(je.Z,{src:s,alt:"IMG"}),(0,e.jsx)(t.ZP,{icon:(0,e.jsx)(U.Z,{}),size:"small",danger:!0,onClick:function(){return c(s)},style:{position:"absolute",right:6}})]},v)}),(0,e.jsxs)("button",{type:"button",className:"btn-upload",onClick:function(){return I(!0)},children:[(0,e.jsx)(B.Z,{}),(0,e.jsx)("div",{style:{marginTop:8},children:"Upload"})]})]}),(0,e.jsx)(Ce.Z,{open:Y,onCancel:S,onFinish:f})]})},ye=Pe,ue=n(55375),xe=n(97857),le=n.n(xe),Ze=n(84697),Se=n(16309),Ee=n(90672),Oe=function(){var L=(0,R.useParams)(),h=L.id,G=(0,d.useState)(!1),w=j()(G,2),Y=w[0],I=w[1],A=(0,d.useRef)(),W=function(){var S=u()(r()().mark(function f(c){var s,v;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c.parentId=h,c.type=Number(c.type),a.next=4,(0,K.BP)(c);case 4:s=a.sent,s.succeeded&&(i.ZP.success("Added!"),(v=A.current)===null||v===void 0||v.reload(),I(!1));case 6:case"end":return a.stop()}},f)}));return function(c){return S.apply(this,arguments)}}(),C=function(){var S=u()(r()().mark(function f(c){var s,v;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,K.S8)(c);case 2:s=a.sent,s.succeeded?(i.ZP.success("Deleted"),(v=A.current)===null||v===void 0||v.reload()):i.ZP.error(s.errors[0].description);case 4:case"end":return a.stop()}},f)}));return function(c){return S.apply(this,arguments)}}(),F=function(f){var c;R.history.push("/catalog/".concat(f)),(c=A.current)===null||c===void 0||c.reload()};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Se.Rs,{headerTitle:"Trang con",actionRef:A,toolBarRender:function(){return[(0,e.jsx)(t.ZP,{type:"primary",icon:(0,e.jsx)(B.Z,{}),onClick:function(){return I(!0)},children:(0,e.jsx)("span",{children:(0,e.jsx)(R.FormattedMessage,{id:"general.new"})})},"3")]},metas:{title:{dataIndex:"name"},description:{dataIndex:"id"},actions:{render:function(f,c){return[(0,e.jsx)(t.ZP,{icon:(0,e.jsx)(ee.Z,{}),type:"primary",onClick:function(){return F(c.id)}},1),(0,e.jsx)(M.Z,{title:"Are you sure?",onConfirm:function(){return C(c.id)},children:(0,e.jsx)(t.ZP,{icon:(0,e.jsx)(U.Z,{}),type:"primary",danger:!0})},2)]}}},request:function(f){return(0,K.A$)(le()(le()({},f),{},{parentId:h}))},pagination:{}}),(0,e.jsxs)(z.Y,{open:Y,onOpenChange:I,onFinish:W,title:(0,e.jsx)(R.FormattedMessage,{id:"general.new"}),children:[(0,e.jsx)(o.Z,{name:"name",label:"Name",rules:[{required:!0}]}),(0,e.jsx)(Ze.Z,{label:"Type",name:"type",initialValue:"".concat(ue.H.Default)}),(0,e.jsx)(Ee.Z,{label:"Description",name:"description"})]})]})},De=Oe,Me=function(){var L=(0,R.useParams)(),h=L.id,G=(0,d.useState)(!1),w=j()(G,2),Y=w[0],I=w[1],A=(0,d.useState)(),W=j()(A,2),C=W[0],F=W[1],S=(0,d.useState)("content"),f=j()(S,2),c=f[0],s=f[1];(0,d.useEffect)(function(){(0,K.R4)(h).then(function(a){return F(a)})},[h]);var v=function(){var a=u()(r()().mark(function x($){return r()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:(0,K.BP)($).then(function(se){se.succeeded&&(i.ZP.success("Saved!"),I(!1))});case 1:case"end":return H.stop()}},x)}));return function($){return a.apply(this,arguments)}}(),E=function(x){s(x)};return(0,e.jsx)(fe._z,{title:C==null?void 0:C.name,children:(0,e.jsxs)(ve.Z,{gutter:16,children:[(0,e.jsxs)(ie.Z,{span:18,children:[(0,e.jsx)(oe.Z,{tabs:{tabPosition:"top",activeKey:c,items:[{label:"Content",key:"content",children:(0,e.jsx)(pe,{})},{label:(0,e.jsx)(R.FormattedMessage,{id:"menu.settings"}),key:"setting",children:(0,e.jsx)(he.Z,{})},{label:(0,e.jsx)(R.FormattedMessage,{id:"pages.catalog.productImage"}),key:"product-image",children:(0,e.jsx)(ye,{}),disabled:(C==null?void 0:C.type)!==ue.H.Product}],onChange:E},className:"mb-4"}),!(C!=null&&C.parentId)&&(0,e.jsx)(De,{}),(0,e.jsxs)(z.Y,{onFinish:v,open:Y,onOpenChange:I,children:[(0,e.jsx)(o.Z,{name:"name",label:"Name"}),(0,e.jsx)(o.Z,{name:"normalizedName",label:"Normalized Name"})]})]}),(0,e.jsx)(ie.Z,{span:6,children:(0,e.jsx)(ge.Z,{})})]})})},Ie=Me},98364:function(q,b,n){n.d(b,{CO:function(){return ne},Ef:function(){return ae},KL:function(){return Q},Xr:function(){return j},Z:function(){return re},v7:function(){return te}});var N=n(15009),r=n.n(N),k=n(99289),u=n.n(k),T=n(35312);function j(o){return y.apply(this,arguments)}function y(){return y=u()(r()().mark(function o(P){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,T.request)("component/".concat(P)));case 1:case"end":return t.stop()}},o)})),y.apply(this,arguments)}function ee(o){return U.apply(this,arguments)}function U(){return U=_asyncToGenerator(_regeneratorRuntime().mark(function o(P){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("component/add",{method:"POST",data:P}));case 1:case"end":return t.stop()}},o)})),U.apply(this,arguments)}function Q(o){return d.apply(this,arguments)}function d(){return d=u()(r()().mark(function o(P){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,T.request)("component/update",{method:"POST",data:P}));case 1:case"end":return t.stop()}},o)})),d.apply(this,arguments)}function ne(o){return J.apply(this,arguments)}function J(){return J=u()(r()().mark(function o(P){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,T.request)("component/list",{params:P}));case 1:case"end":return t.stop()}},o)})),J.apply(this,arguments)}function re(o,P){return V.apply(this,arguments)}function V(){return V=u()(r()().mark(function o(P,i){return r()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,T.request)("component/list-work/".concat(i),{params:P}));case 1:case"end":return M.stop()}},o)})),V.apply(this,arguments)}function te(o){return B.apply(this,arguments)}function B(){return B=u()(r()().mark(function o(P){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,T.request)("component/delete/".concat(P),{method:"POST"}));case 1:case"end":return t.stop()}},o)})),B.apply(this,arguments)}function ae(o){return z.apply(this,arguments)}function z(){return z=u()(r()().mark(function o(P){var i;return r()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return i={searchTerm:P.keyWords},M.abrupt("return",(0,T.request)("component/form-select",{params:i}));case 2:case"end":return M.stop()}},o)})),z.apply(this,arguments)}}}]);
