"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[690],{77171:function(N,O,e){e.d(O,{Z:function(){return c}});var o=e(1413),t=e(62435),m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]},name:"arrow-down",theme:"outlined"},d=m,f=e(84089),i=function(u,v){return t.createElement(f.Z,(0,o.Z)((0,o.Z)({},u),{},{ref:v,icon:d}))};i.displayName="ArrowDownOutlined";var c=t.forwardRef(i)},1912:function(N,O,e){e.d(O,{Z:function(){return c}});var o=e(1413),t=e(62435),m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"},d=m,f=e(84089),i=function(u,v){return t.createElement(f.Z,(0,o.Z)((0,o.Z)({},u),{},{ref:v,icon:d}))};i.displayName="ArrowUpOutlined";var c=t.forwardRef(i)},63434:function(N,O,e){var o=e(1413),t=e(91),m=e(86074),d=e(22270),f=e(32808),i=e(62435),c=e(90789),D=e(68507),u=["options","fieldProps","proFieldProps","valueEnum"],v=i.forwardRef(function(a,r){var h=a.options,x=a.fieldProps,j=a.proFieldProps,p=a.valueEnum,n=(0,t.Z)(a,u);return(0,m.jsx)(D.Z,(0,o.Z)({ref:r,valueType:"checkbox",valueEnum:(0,d.h)(p,void 0),fieldProps:(0,o.Z)({options:h},x),lightProps:(0,o.Z)({labelFormatter:function(){return(0,m.jsx)(D.Z,(0,o.Z)({ref:r,valueType:"checkbox",mode:"read",valueEnum:(0,d.h)(p,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,o.Z)({options:h},x),proFieldProps:j},n))}},n.lightProps),proFieldProps:j},n))}),Z=i.forwardRef(function(a,r){var h=a.fieldProps,x=a.children;return(0,m.jsx)(f.Z,(0,o.Z)((0,o.Z)({ref:r},h),{},{children:x}))}),s=(0,c.G)(Z,{valuePropName:"checked"}),C=s;C.Group=v,O.Z=C},64317:function(N,O,e){var o=e(1413),t=e(91),m=e(86074),d=e(22270),f=e(62435),i=e(66758),c=e(68507),D=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],u=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],v=f.forwardRef(function(r,h){var x=r.fieldProps,j=r.children,p=r.params,n=r.proFieldProps,z=r.mode,Q=r.valueEnum,G=r.request,L=r.showSearch,W=r.options,U=(0,t.Z)(r,D),Y=(0,f.useContext)(i.Z);return(0,m.jsx)(c.Z,(0,o.Z)((0,o.Z)({valueEnum:(0,d.h)(Q),request:G,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,o.Z)({options:W,mode:z,showSearch:L,getPopupContainer:Y.getPopupContainer},x),ref:h,proFieldProps:n},U),{},{children:j}))}),Z=f.forwardRef(function(r,h){var x=r.fieldProps,j=r.children,p=r.params,n=r.proFieldProps,z=r.mode,Q=r.valueEnum,G=r.request,L=r.options,W=(0,t.Z)(r,u),U=(0,o.Z)({options:L,mode:z||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},x),Y=(0,f.useContext)(i.Z);return(0,m.jsx)(c.Z,(0,o.Z)((0,o.Z)({valueEnum:(0,d.h)(Q),request:G,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,o.Z)({getPopupContainer:Y.getPopupContainer},U),ref:h,proFieldProps:n},W),{},{children:j}))}),s=v,C=Z,a=s;a.SearchSelect=C,a.displayName="ProFormComponent",O.Z=a},90672:function(N,O,e){var o=e(1413),t=e(91),m=e(86074),d=e(62435),f=e(68507),i=["fieldProps","proFieldProps"],c=function(u,v){var Z=u.fieldProps,s=u.proFieldProps,C=(0,t.Z)(u,i);return(0,m.jsx)(f.Z,(0,o.Z)({ref:v,valueType:"textarea",fieldProps:Z,proFieldProps:s},C))};O.Z=d.forwardRef(c)},5966:function(N,O,e){var o=e(1413),t=e(91),m=e(86074),d=e(68507),f=["fieldProps","proFieldProps"],i=["fieldProps","proFieldProps"],c="text",D=function(s){var C=s.fieldProps,a=s.proFieldProps,r=(0,t.Z)(s,f);return(0,m.jsx)(d.Z,(0,o.Z)({valueType:c,fieldProps:C,filedConfig:{valueType:c},proFieldProps:a},r))},u=function(s){var C=s.fieldProps,a=s.proFieldProps,r=(0,t.Z)(s,i);return(0,m.jsx)(d.Z,(0,o.Z)({valueType:"password",fieldProps:C,proFieldProps:a,filedConfig:{valueType:c}},r))},v=D;v.Password=u,v.displayName="ProFormComponent",O.Z=v},16507:function(N,O,e){e.d(O,{Z:function(){return s}});var o=e(5574),t=e.n(o),m=e(90905);function d(){return(0,m.request)("component/list")}function f(C){return request("component/add",{method:"POST",data:C})}var i=e(47375),c=e(5966),D=e(64317),u=e(62435),v=e(86074),Z=function(a){var r=(0,u.useState)(),h=t()(r,2),x=h[0],j=h[1];return(0,u.useEffect)(function(){d().then(function(p){j(p.map(function(n){return{label:n.name,value:n.id}}))})},[]),(0,v.jsxs)(i.Y,{open:a.visible,title:"Add component",onFinish:a.onFinish,onOpenChange:a.onVisibleChange,children:[(0,v.jsx)(c.Z,{name:"name",label:"Name"}),(0,v.jsx)(D.Z,{showSearch:!0,options:x,name:"componentId",label:"Component"})]})},s=Z},14027:function(N,O,e){var o=e(15009),t=e.n(o),m=e(99289),d=e.n(m),f=e(5574),i=e.n(f),c=e(66352),D=e(24969),u=e(86548),v=e(1912),Z=e(77171),s=e(48689),C=e(48390),a=e(16536),r=e(71577),h=e(65360),x=e(90905),j=e(62435),p=e(16507),n=e(86074),z=function(G){var L=(0,x.useParams)(),W=L.id,U=(0,j.useRef)(),Y=(0,j.useState)(!1),ae=i()(Y,2),me=ae[0],re=ae[1];(0,j.useEffect)(function(){var M;(M=U.current)===null||M===void 0||M.reload()},[W]);var ve=function(){var M=d()(t()().mark(function g(l){var A,T;return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,c.zt)(l,W);case 2:A=_.sent,A.succeeded&&(a.ZP.success("Deleted!"),(T=U.current)===null||T===void 0||T.reload());case 4:case"end":return _.stop()}},g)}));return function(l){return M.apply(this,arguments)}}(),se=function(){var M=d()(t()().mark(function g(l,A){var T,E;return t()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return l.sortOrder=A?l.sortOrder-1:l.sortOrder+1,F.next=3,(0,c.aN)(l.id,l.catalogId,l.sortOrder);case 3:T=F.sent,T.succeeded&&(a.ZP.success("Sorted!"),(E=U.current)===null||E===void 0||E.reload());case 5:case"end":return F.stop()}},g)}));return function(l,A){return M.apply(this,arguments)}}(),le=function(){var M=d()(t()().mark(function g(l){var A,T;return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return l.catalogId=W,_.next=3,(0,c.yL)(l);case 3:A=_.sent,A.succeeded&&(a.ZP.success("Added!"),re(!1),(T=U.current)===null||T===void 0||T.reload());case 5:case"end":return _.stop()}},g)}));return function(l){return M.apply(this,arguments)}}();return(0,n.jsxs)("div",{children:[(0,n.jsx)(r.Z,{onClick:function(){return re(!0)},type:"primary",icon:(0,n.jsx)(D.Z,{}),children:"Add component"}),(0,n.jsx)(C.Rs,{actionRef:U,request:d()(t()().mark(function M(){return t()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,c.KC)(W,G.child));case 1:case"end":return l.stop()}},M)})),header:!1,metas:{title:{dataIndex:"name"},actions:{render:function(g,l){return[(0,n.jsx)(r.Z,{type:"primary",icon:(0,n.jsx)(u.Z,{}),onClick:function(){x.history.push("/works/".concat(l.normalizedName.toLocaleLowerCase(),"/").concat(l.id))}},1),(0,n.jsx)(r.Z,{icon:(0,n.jsx)(v.Z,{}),onClick:function(){return se(l,!0)}},2),(0,n.jsx)(r.Z,{icon:(0,n.jsx)(Z.Z,{}),onClick:function(){return se(l,!1)}},3),(0,n.jsxs)(h.Z,{title:"Are you sure?",onConfirm:function(){return ve(l.id)},children:[(0,n.jsx)(r.Z,{icon:(0,n.jsx)(s.Z,{}),danger:!0,type:"primary"}),","]},4)]}}}}),(0,n.jsx)(p.Z,{visible:me,onVisibleChange:re,onFinish:le})]})};O.Z=z},92701:function(N,O,e){e.r(O),e.d(O,{default:function(){return T}});var o=e(15009),t=e.n(o),m=e(99289),d=e.n(m),f=e(5574),i=e.n(f),c=e(19632),D=e.n(c),u=e(12361),v=e(24969),Z=e(47375),s=e(5966),C=e(63434),a=e(90905),r=e(69677),h=e(16536),x=e(71577),j=e(39890),p=e(62435),n=e(86074),z=r.Z.Search,Q=function(){var _=(0,p.useRef)(),F=(0,p.useState)([]),$=i()(F,2),X=$[0],S=$[1],B=(0,p.useState)([]),I=i()(B,2),w=I[0],k=I[1],ie=(0,p.useState)(!0),y=i()(ie,2),q=y[0],de=y[1],_e=(0,p.useState)(!1),ee=i()(_e,2),pe=ee[0],Pe=ee[1];(0,p.useEffect)(function(){(0,u.jr)().then(function(H){S(H)})},[]);var Ce=function(P){console.log(P);var K=P.node.key,ue=P.dragNode.key,fe=P.node.pos.split("-"),V=P.dropPosition-Number(fe[fe.length-1]),ce=function R(b,ne,Oe){for(var J=0;J<b.length;J++){if(b[J].key===ne)return Oe(b[J],J,b);b[J].children&&R(b[J].children,ne,Oe)}},te=D()(X),oe;if(ce(te,ue,function(R,b,ne){ne.splice(b,1),oe=R}),!P.dropToGap)ce(te,K,function(R){R.children=R.children||[],R.children.unshift(oe)});else if((P.node.props.children||[]).length>0&&P.node.props.expanded&&V===1)ce(te,K,function(R){R.children=R.children||[],R.children.unshift(oe)});else{var he=[],Ee;ce(te,K,function(R,b,ne){he=ne,Ee=b}),V===-1?he.splice(Ee,0,oe):he.splice(Ee+1,0,oe)}var je={dragNodeKey:P.dragNodesKeys[0],node:P.node.key,dropToGap:P.dropToGap};(0,u.m6)(je).then(function(R){R.succeeded&&h.ZP.success("Saved!")}),S(te)},De=function(P){k(P),de(!1)},xe=function(P){var K;if(!P||P.length===0){h.ZP.warning("Can de-select");return}(K=_.current)===null||K===void 0||K.setFieldValue("parentId",P[0]),a.history.push("/catalog/".concat(P[0]))},Me=function(){var H=d()(t()().mark(function P(K){var ue;return t()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,(0,u.BP)(K);case 2:ue=V.sent,ue.succeeded&&(h.ZP.success("Saved!"),Pe(!1));case 4:case"end":return V.stop()}},P)}));return function(K){return H.apply(this,arguments)}}(),Ze=function(){Pe(!0)};return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(z,{}),(0,n.jsx)(x.Z,{type:"primary",icon:(0,n.jsx)(v.Z,{}),onClick:Ze})]}),(0,n.jsx)("div",{className:"bg-white",children:(0,n.jsx)(j.Z,{showLine:!0,showIcon:!0,treeData:X,expandedKeys:w,onExpand:De,autoExpandParent:q,draggable:!0,onSelect:xe,onDrop:Ce})}),(0,n.jsxs)(Z.Y,{onOpenChange:Pe,open:pe,onFinish:Me,formRef:_,children:[(0,n.jsx)(s.Z,{name:"parentId",label:"Parrent Id",disabled:!0}),(0,n.jsx)(s.Z,{name:"name",label:"Name"}),(0,n.jsx)(s.Z,{name:"normalizedName",label:"Normalized Name"}),(0,n.jsx)(C.Z,{name:"active",label:"Active"})]})]})},G=Q,L;(function(E){E[E.Default=0]="Default",E[E.Article=1]="Article",E[E.Shop=2]="Shop",E[E.Setting=3]="Setting",E[E.Entry=4]="Entry"})(L||(L={}));var W=e(97269),U=e(90672),Y=e(64317),ae=e(27049),me=function(){var _=(0,a.useParams)(),F=_.id,$=(0,p.useRef)();(0,p.useEffect)(function(){(0,u.R4)(F).then(function(S){var B;(B=$.current)===null||B===void 0||B.setFields([{name:"id",value:S.id},{name:"name",value:S.name},{name:"normalizedName",value:S.normalizedName},{name:"title",value:S.setting.title},{name:"container",value:S.setting.container},{name:"type",value:S.type}])})},[F]);var X=function(){var S=d()(t()().mark(function B(I){var w,k;return t()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return w={title:I.title,container:I.container},I.setting=w,y.next=4,(0,u.BA)(I);case 4:k=y.sent,k.succeeded&&h.ZP.success("Saved!");case 6:case"end":return y.stop()}},B)}));return function(I){return S.apply(this,arguments)}}();return(0,n.jsxs)(W.A,{formRef:$,onFinish:X,children:[(0,n.jsx)(s.Z,{name:"id",hidden:!0}),(0,n.jsx)(s.Z,{name:"name",label:"Name"}),(0,n.jsx)(s.Z,{name:"normalizedName",label:"Normalized name"}),(0,n.jsx)(U.Z,{name:"description",label:"Description"}),(0,n.jsx)(Y.Z,{name:"type",label:"Type",options:[{label:"Page",value:L.Default},{label:"Setting",value:L.Setting},{label:"Home",value:L.Entry}]}),(0,n.jsx)(ae.Z,{}),(0,n.jsx)(s.Z,{name:"title",label:"Title"}),(0,n.jsx)(C.Z,{name:"container",label:"Container"})]})},re=me,ve=e(14027),se=e(68015),le=e(30029),M=e(71230),g=e(15746),l=e(62986),A=function(){var _=(0,a.useIntl)(),F=(0,p.useState)(!1),$=i()(F,2),X=$[0],S=$[1],B=(0,p.useState)("tab1"),I=i()(B,2),w=I[0],k=I[1],ie=function(){var y=d()(t()().mark(function q(de){return t()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:(0,u.BP)(de).then(function(pe){pe.succeeded&&(h.ZP.success("Saved!"),S(!1))});case 1:case"end":return ee.stop()}},q)}));return function(de){return y.apply(this,arguments)}}();return(0,n.jsx)(se._z,{children:(0,n.jsxs)(M.Z,{gutter:16,children:[(0,n.jsx)(g.Z,{span:6,children:(0,n.jsx)(G,{})}),(0,n.jsxs)(g.Z,{span:12,children:[(0,n.jsx)(le.Z,{tabs:{tabPosition:"top",activeKey:w,items:[{label:"Content",key:"tab1",children:(0,n.jsx)(ve.Z,{child:!1})},{label:_.formatMessage({id:"menu.settings"}),key:"tab2",children:(0,n.jsx)(re,{})}],onChange:function(q){k(q)}}}),(0,n.jsxs)(Z.Y,{onFinish:ie,visible:X,onVisibleChange:S,children:[(0,n.jsx)(s.Z,{name:"name",label:"Name"}),(0,n.jsx)(s.Z,{name:"normalizedName",label:"Normalized Name"})]})]}),(0,n.jsx)(g.Z,{span:6,children:(0,n.jsx)(le.Z,{children:(0,n.jsx)(l.Z,{})})})]})})},T=A}}]);
