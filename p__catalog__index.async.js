"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5690],{18576:function(ie,H,n){n.d(H,{Z:function(){return s}});var J=n(97857),r=n.n(J),q=n(37476),m=n(5966),k=n(98364),P=n(64317),y=n(86074),_=function(N){return(0,y.jsx)(P.Z,{showSearch:!0,request:k.Ef,name:N.name,label:N.label})},K=_,z=function(N){return(0,y.jsxs)(q.Y,r()(r()({},N),{},{title:"Add component",children:[(0,y.jsx)(m.Z,{name:"name",label:"Name"}),(0,y.jsx)(K,{name:"componentId",label:"Component"})]}))},s=z},75316:function(ie,H,n){n.r(H),n.d(H,{default:function(){return ke}});var J=n(15009),r=n.n(J),q=n(99289),m=n.n(q),k=n(5574),P=n.n(k),y=n(66352),_=n(47389),K=n(82061),z=n(1413),s=n(62435),ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},N=ee,ne=n(91146),V=function(I,l){return s.createElement(ne.Z,(0,z.Z)((0,z.Z)({},I),{},{ref:l,icon:N}))};V.displayName="MoreOutlined";var re=s.forwardRef(V),G=n(51042),te=n(62639),U=n(37476),o=n(5966),Z=n(64317),u=n(58301),t=n(71577),$=n(86738),me=n(85418),O=n(35312),fe=n(18576),e=n(86074),pe=function(){var I=(0,O.useParams)(),l=I.id,W=(0,s.useState)([]),M=P()(W,2),S=M[0],v=M[1],F=(0,s.useState)(!1),T=P()(F,2),j=T[0],C=T[1],R=(0,s.useState)(!1),h=P()(R,2),d=h[0],i=h[1],g=(0,s.useState)(),w=P()(g,2),a=w[0],D=w[1],B=function(){(0,y.KC)(l).then(function(f){v(f.data)})};(0,s.useEffect)(function(){l&&B()},[l]);var E=function(){var b=m()(r()().mark(function f(c){var p;return r()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,y.zt)(c,l);case 2:p=x.sent,p.succeeded?(u.ZP.success("Deleted!"),B()):u.ZP.error(p.errors[0].description);case 4:case"end":return x.stop()}},f)}));return function(c){return b.apply(this,arguments)}}(),Y=function(){var b=m()(r()().mark(function f(c){var p;return r()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return c.catalogId=l,x.next=3,(0,y.yL)(c);case 3:p=x.sent,p.succeeded&&(u.ZP.success("Added!"),C(!1),B());case 5:case"end":return x.stop()}},f)}));return function(c){return b.apply(this,arguments)}}(),oe=function(){var b=m()(r()().mark(function f(){var c;return r()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,y.x)();case 2:c=A.sent,D(c),i(!0);case 5:case"end":return A.stop()}},f)}));return function(){return b.apply(this,arguments)}}(),Ne=function(){var b=m()(r()().mark(function f(c){var p;return r()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,y.jX)(c);case 2:p=x.sent,p.succeeded&&(u.ZP.success("Saved"),i(!1),B());case 4:case"end":return x.stop()}},f)}));return function(c){return b.apply(this,arguments)}}(),Le=[{key:"1",label:"Show / Hide"}],We=function(){var b=m()(r()().mark(function f(c,p){var A;return r()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(c.key!=="1"){X.next=5;break}return X.next=3,(0,y.Wv)(p);case 3:A=X.sent,A.succeeded&&(u.ZP.success("Actived!"),B());case 5:case"end":return X.stop()}},f)}));return function(c,p){return b.apply(this,arguments)}}(),Be=[{title:"#",dataIndex:"sort",className:"drag-visible"},{title:"Name",dataIndex:"name"},{title:"Status",dataIndex:"active",valueEnum:{false:{text:"Draft",status:"Default"},true:{text:"Active",status:"Processing"}}},{title:"Action",valueType:"option",render:function(f,c){return[(0,e.jsx)(t.ZP,{type:"primary",disabled:c.autoGenerateField,icon:(0,e.jsx)(_.Z,{}),onClick:function(){O.history.push("/works/".concat(c.normalizedName.toLocaleLowerCase(),"/").concat(c.id))}},1),(0,e.jsx)($.Z,{title:"Are you sure?",onConfirm:function(){return E(c.id)},children:(0,e.jsx)(t.ZP,{icon:(0,e.jsx)(K.Z,{}),danger:!0,type:"primary"})},4),(0,e.jsx)(me.Z,{menu:{items:Le,onClick:function(A){return We(A,c.id)}},children:(0,e.jsx)(t.ZP,{icon:(0,e.jsx)(re,{}),type:"dashed"})},"more")]}}],Ke=function(f){var c=f.map(function(p){return p.id||""});(0,y.P0)(c).then(function(p){p.succeeded&&(v(f),u.ZP.success("Saved!"))})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"mb-2 flex justify-end gap-2",children:[(0,e.jsx)(t.ZP,{onClick:function(){return C(!0)},type:"primary",icon:(0,e.jsx)(G.Z,{}),children:(0,e.jsx)("span",{children:(0,e.jsx)(O.FormattedMessage,{id:"general.new"})})},0),(0,e.jsx)(t.ZP,{onClick:oe,icon:(0,e.jsx)(G.Z,{}),children:"Ch\u1ECDn"},1)]}),(0,e.jsx)(te.Z,{search:!1,rowKey:"id",columns:Be,pagination:!1,dataSource:S,dragSortKey:"sort",onDragSortEnd:Ke}),(0,e.jsx)(fe.Z,{open:j,onOpenChange:C,onFinish:Y}),(0,e.jsxs)(U.Y,{open:d,onOpenChange:i,onFinish:Ne,children:[(0,e.jsx)(o.Z,{name:"catalogId",initialValue:l,hidden:!0}),(0,e.jsx)(Z.Z,{showSearch:!0,name:"workContentId",options:a,label:"Work"})]})]})},ve=pe,L=n(12361),he=n(63386),ae=n(28199),ge=n(71230),ue=n(15746),je=n(35003),xe=n(8811),le=n(37471),Ce=n(97857),ce=n.n(Ce),ye=n(84697),Ze=n(16309),Se=n(90672),Pe=function(){var I=(0,O.useParams)(),l=I.id,W=(0,s.useState)(!1),M=P()(W,2),S=M[0],v=M[1],F=(0,s.useRef)(),T=function(){var R=m()(r()().mark(function h(d){var i,g;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d.parentId=l,d.type=Number(d.type),a.next=4,(0,L.BP)(d);case 4:i=a.sent,i.succeeded&&(u.ZP.success("Added!"),(g=F.current)===null||g===void 0||g.reload(),v(!1));case 6:case"end":return a.stop()}},h)}));return function(d){return R.apply(this,arguments)}}(),j=function(){var R=m()(r()().mark(function h(d){var i,g;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,L.S8)(d);case 2:i=a.sent,i.succeeded?(u.ZP.success("Deleted"),(g=F.current)===null||g===void 0||g.reload()):u.ZP.error(i.errors[0].description);case 4:case"end":return a.stop()}},h)}));return function(d){return R.apply(this,arguments)}}(),C=function(h){var d;O.history.push("/catalog/".concat(h)),(d=F.current)===null||d===void 0||d.reload()};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ze.Rs,{headerTitle:"Trang con",actionRef:F,toolBarRender:function(){return[(0,e.jsx)(t.ZP,{type:"primary",icon:(0,e.jsx)(G.Z,{}),onClick:function(){return v(!0)},children:(0,e.jsx)("span",{children:(0,e.jsx)(O.FormattedMessage,{id:"general.new"})})},"3")]},metas:{title:{dataIndex:"name"},description:{dataIndex:"id"},actions:{render:function(h,d){return[(0,e.jsx)(t.ZP,{icon:(0,e.jsx)(_.Z,{}),type:"primary",onClick:function(){return C(d.id)}},1),(0,e.jsx)($.Z,{title:"Are you sure?",onConfirm:function(){return j(d.id)},children:(0,e.jsx)(t.ZP,{icon:(0,e.jsx)(K.Z,{}),type:"primary",danger:!0})},2)]}}},request:function(h){return(0,L.A$)(ce()(ce()({},h),{},{parentId:l}))},pagination:{}}),(0,e.jsxs)(U.Y,{open:S,onOpenChange:v,onFinish:T,title:(0,e.jsx)(O.FormattedMessage,{id:"general.new"}),children:[(0,e.jsx)(o.Z,{name:"name",label:"Name",rules:[{required:!0}]}),(0,e.jsx)(ye.Z,{label:"Type",name:"type",initialValue:"".concat(le.HQ.Default)}),(0,e.jsx)(Se.Z,{label:"Description",name:"description"})]})]})},Oe=Pe,Fe=n(34994),se=n(31199),De=n(93421),Ee=n(1913),Ie=n(32545),Me=function(){var I=(0,O.useParams)(),l=I.id,W=(0,s.useState)(!1),M=P()(W,2),S=M[0],v=M[1],F=(0,s.useState)([]),T=P()(F,2),j=T[0],C=T[1];(0,s.useEffect)(function(){(0,L.NU)(l).then(function(i){i&&C(i.images)})},[]);var R=function(){return v(!1)},h=function(){var i=m()(r()().mark(function g(w){var a,D;return r()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return a=j,a.push(w),E.next=4,(0,L.kn)(a,l);case 4:D=E.sent,D.succeeded?(C(a),u.ZP.success("Saved!")):u.ZP.error(D.errors[0].description);case 6:case"end":return E.stop()}},g)}));return function(w){return i.apply(this,arguments)}}(),d=function(){var i=m()(r()().mark(function g(w){var a,D;return r()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return a=j.filter(function(Y){return Y!==w}),E.next=3,(0,L.kn)(a,l);case 3:D=E.sent,D.succeeded?(C(a),u.ZP.success("Saved!")):u.ZP.error(D.errors[0].description);case 5:case"end":return E.stop()}},g)}));return function(w){return i.apply(this,arguments)}}();return(0,e.jsxs)(ae.Z,{title:"Gallery",bordered:!0,headerBordered:!0,children:[(0,e.jsxs)("div",{className:"flex gap-4",children:[j.map(function(i,g){return(0,e.jsxs)("div",{className:"btn-upload p-2",children:[(0,e.jsx)(Ie.Z,{src:i,alt:"IMG"}),(0,e.jsx)(t.ZP,{icon:(0,e.jsx)(K.Z,{}),size:"small",danger:!0,onClick:function(){return d(i)},style:{position:"absolute",right:6}})]},g)}),(0,e.jsxs)("button",{type:"button",className:"btn-upload",onClick:function(){return v(!0)},children:[(0,e.jsx)(G.Z,{}),(0,e.jsx)("div",{style:{marginTop:8},children:"Upload"})]})]}),(0,e.jsx)(Ee.Z,{open:S,onCancel:R,onFinish:h})]})},Te=Me,Re=function(){var I=(0,O.useParams)(),l=I.id,W=(0,s.useRef)();(0,s.useEffect)(function(){(0,L.lI)(l).then(function(S){if(S){var v;(v=W.current)===null||v===void 0||v.setFields([{name:"sku",value:S.sku},{name:"price",value:S.price},{name:"salePrice",value:S.salePrice},{name:"unitInStock",value:S.unitInStock}])}})},[]);var M=function(){var S=m()(r()().mark(function v(F){var T;return r()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return F.catalogId=l,C.next=3,(0,L.gg)(F);case 3:T=C.sent,T.succeeded&&u.ZP.success("Saved");case 5:case"end":return C.stop()}},v)}));return function(F){return S.apply(this,arguments)}}();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ae.Z,{title:"Details",headerBordered:!0,bordered:!0,className:"mb-4",children:(0,e.jsx)(Fe.A,{onFinish:M,formRef:W,children:(0,e.jsxs)(De.Z,{children:[(0,e.jsx)(o.Z,{name:"sku",label:"SKU"}),(0,e.jsx)(se.Z,{name:"price",label:"Price"}),(0,e.jsx)(se.Z,{name:"salePrice",label:"Sale price"}),(0,e.jsx)(se.Z,{name:"unitInStock",label:"Stock"})]})})}),(0,e.jsx)(Te,{})]})},we=Re,be=n(26554),de=function(I,l){return s.createElement(ne.Z,(0,z.Z)((0,z.Z)({},I),{},{ref:l,icon:be.Z}))};de.displayName="LeftOutlined";var Ae=s.forwardRef(de),$e=function(){var I=(0,O.useParams)(),l=I.id,W=(0,s.useState)(!1),M=P()(W,2),S=M[0],v=M[1],F=(0,s.useState)(),T=P()(F,2),j=T[0],C=T[1],R=(0,s.useState)("content"),h=P()(R,2),d=h[0],i=h[1];(0,s.useEffect)(function(){(0,L.R4)(l).then(function(a){return C(a)})},[l]);var g=function(){var a=m()(r()().mark(function D(B){return r()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:(0,L.BP)(B).then(function(oe){oe.succeeded&&(u.ZP.success("Saved!"),v(!1))});case 1:case"end":return Y.stop()}},D)}));return function(B){return a.apply(this,arguments)}}(),w=function(D){i(D)};return(0,e.jsx)(he._z,{title:j==null?void 0:j.name,extra:(0,e.jsx)(t.ZP,{icon:(0,e.jsx)(Ae,{}),onClick:function(){return O.history.back()},children:(0,e.jsx)("span",{children:(0,e.jsx)(O.FormattedMessage,{id:"general.back"})})}),children:(0,e.jsxs)(ge.Z,{gutter:16,children:[(0,e.jsxs)(ue.Z,{span:18,children:[(0,e.jsx)(ae.Z,{tabs:{tabPosition:"top",activeKey:d,items:[{label:"Content",key:"content",children:(0,e.jsx)(ve,{})},{label:(0,e.jsx)(O.FormattedMessage,{id:"menu.settings"}),key:"setting",children:(0,e.jsx)(je.Z,{})},{label:(0,e.jsx)(O.FormattedMessage,{id:"pages.catalog.productDetail"}),key:"product-detail",children:(0,e.jsx)(we,{}),disabled:(j==null?void 0:j.type)!==le.HQ.Product}],onChange:w},className:"mb-4"}),!(j!=null&&j.parentId)&&(0,e.jsx)(Oe,{}),(0,e.jsxs)(U.Y,{onFinish:g,open:S,onOpenChange:v,children:[(0,e.jsx)(o.Z,{name:"name",label:"Name"}),(0,e.jsx)(o.Z,{name:"normalizedName",label:"Normalized Name"})]})]}),(0,e.jsx)(ue.Z,{span:6,children:(0,e.jsx)(xe.Z,{})})]})})},ke=$e},98364:function(ie,H,n){n.d(H,{CO:function(){return ee},Ef:function(){return te},KL:function(){return z},Xr:function(){return P},Z:function(){return ne},v7:function(){return re}});var J=n(15009),r=n.n(J),q=n(99289),m=n.n(q),k=n(35312);function P(o){return y.apply(this,arguments)}function y(){return y=m()(r()().mark(function o(Z){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,k.request)("component/".concat(Z)));case 1:case"end":return t.stop()}},o)})),y.apply(this,arguments)}function _(o){return K.apply(this,arguments)}function K(){return K=_asyncToGenerator(_regeneratorRuntime().mark(function o(Z){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("component/add",{method:"POST",data:Z}));case 1:case"end":return t.stop()}},o)})),K.apply(this,arguments)}function z(o){return s.apply(this,arguments)}function s(){return s=m()(r()().mark(function o(Z){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,k.request)("component/update",{method:"POST",data:Z}));case 1:case"end":return t.stop()}},o)})),s.apply(this,arguments)}function ee(o){return N.apply(this,arguments)}function N(){return N=m()(r()().mark(function o(Z){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,k.request)("component/list",{params:Z}));case 1:case"end":return t.stop()}},o)})),N.apply(this,arguments)}function ne(o,Z){return V.apply(this,arguments)}function V(){return V=m()(r()().mark(function o(Z,u){return r()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.abrupt("return",(0,k.request)("component/list-work/".concat(u),{params:Z}));case 1:case"end":return $.stop()}},o)})),V.apply(this,arguments)}function re(o){return G.apply(this,arguments)}function G(){return G=m()(r()().mark(function o(Z){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,k.request)("component/delete/".concat(Z),{method:"POST"}));case 1:case"end":return t.stop()}},o)})),G.apply(this,arguments)}function te(o){return U.apply(this,arguments)}function U(){return U=m()(r()().mark(function o(Z){var u;return r()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return u={searchTerm:Z.keyWords},$.abrupt("return",(0,k.request)("component/form-select",{params:u}));case 2:case"end":return $.stop()}},o)})),U.apply(this,arguments)}}}]);
