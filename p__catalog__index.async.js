"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[690],{77171:function(V,O,e){e.d(O,{Z:function(){return m}});var a=e(1413),t=e(62435),P={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]},name:"arrow-down",theme:"outlined"},d=P,E=e(84089),s=function(i,_){return t.createElement(E.Z,(0,a.Z)((0,a.Z)({},i),{},{ref:_,icon:d}))};s.displayName="ArrowDownOutlined";var m=t.forwardRef(s)},1912:function(V,O,e){e.d(O,{Z:function(){return m}});var a=e(1413),t=e(62435),P={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"},d=P,E=e(84089),s=function(i,_){return t.createElement(E.Z,(0,a.Z)((0,a.Z)({},i),{},{ref:_,icon:d}))};s.displayName="ArrowUpOutlined";var m=t.forwardRef(s)},63434:function(V,O,e){var a=e(1413),t=e(91),P=e(86074),d=e(22270),E=e(32808),s=e(62435),m=e(90789),S=e(15790),i=["options","fieldProps","proFieldProps","valueEnum"],_=s.forwardRef(function(l,r){var p=l.options,C=l.fieldProps,j=l.proFieldProps,u=l.valueEnum,n=(0,t.Z)(l,i);return(0,P.jsx)(S.Z,(0,a.Z)({ref:r,valueType:"checkbox",valueEnum:(0,d.h)(u,void 0),fieldProps:(0,a.Z)({options:p},C),lightProps:(0,a.Z)({labelFormatter:function(){return(0,P.jsx)(S.Z,(0,a.Z)({ref:r,valueType:"checkbox",mode:"read",valueEnum:(0,d.h)(u,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,a.Z)({options:p},C),proFieldProps:j},n))}},n.lightProps),proFieldProps:j},n))}),R=s.forwardRef(function(l,r){var p=l.fieldProps,C=l.children;return(0,P.jsx)(E.Z,(0,a.Z)((0,a.Z)({ref:r},p),{},{children:C}))}),v=(0,m.G)(R,{valuePropName:"checked"}),M=v;M.Group=_,O.Z=M},64317:function(V,O,e){var a=e(1413),t=e(91),P=e(86074),d=e(22270),E=e(62435),s=e(66758),m=e(15790),S=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],i=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],_=E.forwardRef(function(r,p){var C=r.fieldProps,j=r.children,u=r.params,n=r.proFieldProps,N=r.mode,Q=r.valueEnum,G=r.request,L=r.showSearch,B=r.options,U=(0,t.Z)(r,S),Y=(0,E.useContext)(s.Z);return(0,P.jsx)(m.Z,(0,a.Z)((0,a.Z)({valueEnum:(0,d.h)(Q),request:G,params:u,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,a.Z)({options:B,mode:N,showSearch:L,getPopupContainer:Y.getPopupContainer},C),ref:p,proFieldProps:n},U),{},{children:j}))}),R=E.forwardRef(function(r,p){var C=r.fieldProps,j=r.children,u=r.params,n=r.proFieldProps,N=r.mode,Q=r.valueEnum,G=r.request,L=r.options,B=(0,t.Z)(r,i),U=(0,a.Z)({options:L,mode:N||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},C),Y=(0,E.useContext)(s.Z);return(0,P.jsx)(m.Z,(0,a.Z)((0,a.Z)({valueEnum:(0,d.h)(Q),request:G,params:u,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,a.Z)({getPopupContainer:Y.getPopupContainer},U),ref:p,proFieldProps:n},B),{},{children:j}))}),v=_,M=R,l=v;l.SearchSelect=M,l.displayName="ProFormComponent",O.Z=l},90672:function(V,O,e){var a=e(1413),t=e(91),P=e(86074),d=e(62435),E=e(15790),s=["fieldProps","proFieldProps"],m=function(i,_){var R=i.fieldProps,v=i.proFieldProps,M=(0,t.Z)(i,s);return(0,P.jsx)(E.Z,(0,a.Z)({ref:_,valueType:"textarea",fieldProps:R,proFieldProps:v},M))};O.Z=d.forwardRef(m)},16507:function(V,O,e){e.d(O,{Z:function(){return v}});var a=e(5574),t=e.n(a),P=e(90905);function d(){return(0,P.request)("component/list")}function E(M){return request("component/add",{method:"POST",data:M})}var s=e(37476),m=e(5966),S=e(64317),i=e(62435),_=e(86074),R=function(l){var r=(0,i.useState)(),p=t()(r,2),C=p[0],j=p[1];return(0,i.useEffect)(function(){d().then(function(u){j(u.map(function(n){return{label:n.name,value:n.id}}))})},[]),(0,_.jsxs)(s.Y,{open:l.visible,title:"Add component",onFinish:l.onFinish,onOpenChange:l.onVisibleChange,children:[(0,_.jsx)(m.Z,{name:"name",label:"Name"}),(0,_.jsx)(S.Z,{showSearch:!0,options:C,name:"componentId",label:"Component"})]})},v=R},14027:function(V,O,e){var a=e(15009),t=e.n(a),P=e(99289),d=e.n(P),E=e(5574),s=e.n(E),m=e(66352),S=e(24969),i=e(86548),_=e(1912),R=e(77171),v=e(48689),M=e(22538),l=e(2453),r=e(71577),p=e(86738),C=e(90905),j=e(62435),u=e(16507),n=e(86074),N=function(G){var L=(0,C.useParams)(),B=L.id,U=(0,j.useRef)(),Y=(0,j.useState)(!1),oe=s()(Y,2),me=oe[0],re=oe[1];(0,j.useEffect)(function(){var D;(D=U.current)===null||D===void 0||D.reload()},[B]);var ve=function(){var D=d()(t()().mark(function x(o){var Z,T;return t()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,m.zt)(o,B);case 2:Z=h.sent,Z.succeeded&&(l.ZP.success("Deleted!"),(T=U.current)===null||T===void 0||T.reload());case 4:case"end":return h.stop()}},x)}));return function(o){return D.apply(this,arguments)}}(),se=function(){var D=d()(t()().mark(function x(o,Z){var T,f;return t()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return o.sortOrder=Z?o.sortOrder-1:o.sortOrder+1,F.next=3,(0,m.aN)(o.id,o.catalogId,o.sortOrder);case 3:T=F.sent,T.succeeded&&(l.ZP.success("Sorted!"),(f=U.current)===null||f===void 0||f.reload());case 5:case"end":return F.stop()}},x)}));return function(o,Z){return D.apply(this,arguments)}}(),le=function(){var D=d()(t()().mark(function x(o){var Z,T;return t()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return o.catalogId=B,h.next=3,(0,m.yL)(o);case 3:Z=h.sent,Z.succeeded&&(l.ZP.success("Added!"),re(!1),(T=U.current)===null||T===void 0||T.reload());case 5:case"end":return h.stop()}},x)}));return function(o){return D.apply(this,arguments)}}();return(0,n.jsxs)("div",{children:[(0,n.jsx)(M.Rs,{toolBarRender:function(){return[(0,n.jsx)(r.Z,{onClick:function(){return re(!0)},type:"primary",icon:(0,n.jsx)(S.Z,{}),children:(0,n.jsx)(C.FormattedMessage,{id:"general.new"})},0)]},rowSelection:{},actionRef:U,request:d()(t()().mark(function D(){return t()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,m.KC)(B,G.child));case 1:case"end":return o.stop()}},D)})),headerTitle:"Work items",metas:{title:{dataIndex:"name"},actions:{render:function(x,o){return[(0,n.jsx)(r.Z,{type:"primary",icon:(0,n.jsx)(i.Z,{}),onClick:function(){C.history.push("/works/".concat(o.normalizedName.toLocaleLowerCase(),"/").concat(o.id))}},1),(0,n.jsx)(r.Z,{icon:(0,n.jsx)(_.Z,{}),onClick:function(){return se(o,!0)}},2),(0,n.jsx)(r.Z,{icon:(0,n.jsx)(R.Z,{}),onClick:function(){return se(o,!1)}},3),(0,n.jsxs)(p.Z,{title:"Are you sure?",onConfirm:function(){return ve(o.id)},children:[(0,n.jsx)(r.Z,{icon:(0,n.jsx)(v.Z,{}),danger:!0,type:"primary"}),","]},4)]}}}}),(0,n.jsx)(u.Z,{visible:me,onVisibleChange:re,onFinish:le})]})};O.Z=N},92701:function(V,O,e){e.r(O),e.d(O,{default:function(){return T}});var a=e(15009),t=e.n(a),P=e(99289),d=e.n(P),E=e(5574),s=e.n(E),m=e(19632),S=e.n(m),i=e(12361),_=e(24969),R=e(37476),v=e(5966),M=e(63434),l=e(90905),r=e(69677),p=e(2453),C=e(71577),j=e(39890),u=e(62435),n=e(86074),N=r.Z.Search,Q=function(){var h=(0,u.useRef)(),F=(0,u.useState)([]),z=s()(F,2),X=z[0],g=z[1],W=(0,u.useState)([]),I=s()(W,2),w=I[0],k=I[1],ie=(0,u.useState)(!0),y=s()(ie,2),q=y[0],de=y[1],_e=(0,u.useState)(!1),ee=s()(_e,2),pe=ee[0],fe=ee[1];(0,u.useEffect)(function(){(0,i.jr)().then(function(H){g(H)})},[]);var Ce=function(c){console.log(c);var K=c.node.key,ue=c.dragNode.key,he=c.node.pos.split("-"),$=c.dropPosition-Number(he[he.length-1]),ce=function A(b,ne,Oe){for(var J=0;J<b.length;J++){if(b[J].key===ne)return Oe(b[J],J,b);b[J].children&&A(b[J].children,ne,Oe)}},te=S()(X),ae;if(ce(te,ue,function(A,b,ne){ne.splice(b,1),ae=A}),!c.dropToGap)ce(te,K,function(A){A.children=A.children||[],A.children.unshift(ae)});else if((c.node.props.children||[]).length>0&&c.node.props.expanded&&$===1)ce(te,K,function(A){A.children=A.children||[],A.children.unshift(ae)});else{var Pe=[],Ee;ce(te,K,function(A,b,ne){Pe=ne,Ee=b}),$===-1?Pe.splice(Ee,0,ae):Pe.splice(Ee+1,0,ae)}var Ze={dragNodeKey:c.dragNodesKeys[0],node:c.node.key,dropToGap:c.dropToGap};(0,i.m6)(Ze).then(function(A){A.succeeded&&p.ZP.success("Saved!")}),g(te)},De=function(c){k(c),de(!1)},xe=function(c){var K;if(!c||c.length===0){p.ZP.warning("Can de-select");return}(K=h.current)===null||K===void 0||K.setFieldValue("parentId",c[0]),l.history.push("/catalog/".concat(c[0]))},Me=function(){var H=d()(t()().mark(function c(K){var ue;return t()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,(0,i.BP)(K);case 2:ue=$.sent,ue.succeeded&&(p.ZP.success("Saved!"),fe(!1));case 4:case"end":return $.stop()}},c)}));return function(K){return H.apply(this,arguments)}}(),je=function(){fe(!0)};return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(N,{}),(0,n.jsx)(C.Z,{type:"primary",icon:(0,n.jsx)(_.Z,{}),onClick:je})]}),(0,n.jsx)("div",{className:"bg-white",children:(0,n.jsx)(j.Z,{showLine:!0,showIcon:!0,treeData:X,expandedKeys:w,onExpand:De,autoExpandParent:q,draggable:!0,onSelect:xe,onDrop:Ce})}),(0,n.jsxs)(R.Y,{onOpenChange:fe,open:pe,onFinish:Me,formRef:h,children:[(0,n.jsx)(v.Z,{name:"parentId",label:"Parrent Id",disabled:!0}),(0,n.jsx)(v.Z,{name:"name",label:"Name"}),(0,n.jsx)(v.Z,{name:"normalizedName",label:"Normalized Name"}),(0,n.jsx)(M.Z,{name:"active",label:"Active"})]})]})},G=Q,L;(function(f){f[f.Default=0]="Default",f[f.Article=1]="Article",f[f.Shop=2]="Shop",f[f.Setting=3]="Setting",f[f.Entry=4]="Entry"})(L||(L={}));var B=e(97269),U=e(90672),Y=e(64317),oe=e(96074),me=function(){var h=(0,l.useParams)(),F=h.id,z=(0,u.useRef)();(0,u.useEffect)(function(){(0,i.R4)(F).then(function(g){var W;(W=z.current)===null||W===void 0||W.setFields([{name:"id",value:g.id},{name:"name",value:g.name},{name:"normalizedName",value:g.normalizedName},{name:"title",value:g.setting.title},{name:"container",value:g.setting.container},{name:"type",value:g.type}])})},[F]);var X=function(){var g=d()(t()().mark(function W(I){var w,k;return t()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return w={title:I.title,container:I.container},I.setting=w,y.next=4,(0,i.BA)(I);case 4:k=y.sent,k.succeeded&&p.ZP.success("Saved!");case 6:case"end":return y.stop()}},W)}));return function(I){return g.apply(this,arguments)}}();return(0,n.jsxs)(B.A,{formRef:z,onFinish:X,children:[(0,n.jsx)(v.Z,{name:"id",hidden:!0}),(0,n.jsx)(v.Z,{name:"name",label:"Name"}),(0,n.jsx)(v.Z,{name:"normalizedName",label:"Normalized name"}),(0,n.jsx)(U.Z,{name:"description",label:"Description"}),(0,n.jsx)(Y.Z,{name:"type",label:"Type",options:[{label:"Page",value:L.Default},{label:"Setting",value:L.Setting},{label:"Home",value:L.Entry}]}),(0,n.jsx)(oe.Z,{}),(0,n.jsx)(v.Z,{name:"title",label:"Title"}),(0,n.jsx)(M.Z,{name:"container",label:"Container"})]})},re=me,ve=e(14027),se=e(62884),le=e(30029),D=e(71230),x=e(15746),o=e(32983),Z=function(){var h=(0,l.useIntl)(),F=(0,u.useState)(!1),z=s()(F,2),X=z[0],g=z[1],W=(0,u.useState)("tab1"),I=s()(W,2),w=I[0],k=I[1],ie=function(){var y=d()(t()().mark(function q(de){return t()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:(0,i.BP)(de).then(function(pe){pe.succeeded&&(p.ZP.success("Saved!"),g(!1))});case 1:case"end":return ee.stop()}},q)}));return function(de){return y.apply(this,arguments)}}();return(0,n.jsx)(se._z,{children:(0,n.jsxs)(D.Z,{gutter:16,children:[(0,n.jsx)(x.Z,{span:6,children:(0,n.jsx)(G,{})}),(0,n.jsxs)(x.Z,{span:12,children:[(0,n.jsx)(le.Z,{tabs:{tabPosition:"top",activeKey:w,items:[{label:"Content",key:"tab1",children:(0,n.jsx)(ve.Z,{child:!1})},{label:h.formatMessage({id:"menu.settings"}),key:"tab2",children:(0,n.jsx)(re,{})}],onChange:function(q){k(q)}}}),(0,n.jsxs)(R.Y,{onFinish:ie,open:X,onOpenChange:g,children:[(0,n.jsx)(v.Z,{name:"name",label:"Name"}),(0,n.jsx)(v.Z,{name:"normalizedName",label:"Normalized Name"})]})]}),(0,n.jsx)(x.Z,{span:6,children:(0,n.jsx)(le.Z,{children:(0,n.jsx)(o.Z,{})})})]})})},T=Z}}]);
