"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5690],{76131:function(ee,k,n){var _=n(97857),r=n.n(_),z=n(37476),l=n(5966),W=n(65675),v=n(86074),O=function(N){return(0,v.jsxs)(z.Y,r()(r()({},N),{},{title:"Add component",children:[(0,v.jsx)(l.Z,{name:"name",label:"Name"}),(0,v.jsx)(W.Z,{name:"componentId",label:"Component"})]}))};k.Z=O},65675:function(ee,k,n){var _=n(98364),r=n(64317),z=n(86074),l=function(v){return(0,z.jsx)(r.Z,{showSearch:!0,request:_.Ef,name:v.name,label:v.label})};k.Z=l},8812:function(ee,k,n){n.r(k),n.d(k,{default:function(){return Ae}});var _=n(15009),r=n.n(_),z=n(99289),l=n.n(z),W=n(5574),v=n.n(W),O=n(66352),Q=n(47389),N=n(82061),q=n(1413),c=n(62435),ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},X=ne,re=n(91146),H=function(L,d){return c.createElement(re.Z,(0,q.Z)((0,q.Z)({},L),{},{ref:d,icon:X}))};H.displayName="MoreOutlined";var te=c.forwardRef(H),U=n(51042),ae=n(62639),G=n(37476),s=n(5966),y=n(64317),i=n(58301),t=n(71577),A=n(86738),de=n(85418),w=n(35312),me=n(76131),e=n(86074),pe=function(){var L=(0,w.useParams)(),d=L.id,K=(0,c.useState)([]),M=v()(K,2),S=M[0],h=M[1],Z=(0,c.useState)(!1),I=v()(Z,2),C=I[0],x=I[1],T=(0,c.useState)(!1),g=v()(T,2),m=g[0],o=g[1],j=(0,c.useState)(),R=v()(j,2),a=R[0],E=R[1],$=function(){(0,O.KC)(d).then(function(p){h(p.data)})};(0,c.useEffect)(function(){d&&$()},[d]);var D=function(){var F=l()(r()().mark(function p(u){var f;return r()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,O.zt)(u,d);case 2:f=P.sent,f.succeeded?(i.ZP.success("Deleted!"),$()):i.ZP.error(f.errors[0].description);case 4:case"end":return P.stop()}},p)}));return function(u){return F.apply(this,arguments)}}(),Y=function(){var F=l()(r()().mark(function p(u){var f;return r()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return u.catalogId=d,P.next=3,(0,O.yL)(u);case 3:f=P.sent,f.succeeded&&(i.ZP.success("Added!"),x(!1),$());case 5:case"end":return P.stop()}},p)}));return function(u){return F.apply(this,arguments)}}(),ie=function(){var F=l()(r()().mark(function p(){var u;return r()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(0,O.x)();case 2:u=b.sent,E(u),o(!0);case 5:case"end":return b.stop()}},p)}));return function(){return F.apply(this,arguments)}}(),we=function(){var F=l()(r()().mark(function p(u){var f;return r()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,O.jX)(u);case 2:f=P.sent,f.succeeded&&(i.ZP.success("Saved"),o(!1),$());case 4:case"end":return P.stop()}},p)}));return function(u){return F.apply(this,arguments)}}(),We=[{key:"1",label:"Show / Hide"}],Le=function(){var F=l()(r()().mark(function p(u,f){var b;return r()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(u.key!=="1"){V.next=5;break}return V.next=3,(0,O.Wv)(f);case 3:b=V.sent,b.succeeded&&(i.ZP.success("Actived!"),$());case 5:case"end":return V.stop()}},p)}));return function(u,f){return F.apply(this,arguments)}}(),Be=[{title:"#",dataIndex:"sort",className:"drag-visible"},{title:"Name",dataIndex:"name"},{title:"Status",dataIndex:"active",valueEnum:{false:{text:"Draft",status:"Default"},true:{text:"Active",status:"Processing"}}},{title:"Action",valueType:"option",render:function(p,u){return[(0,e.jsx)(t.ZP,{type:"primary",disabled:u.autoGenerateField,icon:(0,e.jsx)(Q.Z,{}),onClick:function(){w.history.push("/works/".concat(u.normalizedName.toLocaleLowerCase(),"/").concat(u.id))}},1),(0,e.jsx)(A.Z,{title:"Are you sure?",onConfirm:function(){return D(u.id)},children:(0,e.jsx)(t.ZP,{icon:(0,e.jsx)(N.Z,{}),danger:!0,type:"primary"})},4),(0,e.jsx)(de.Z,{menu:{items:We,onClick:function(b){return Le(b,u.id)}},children:(0,e.jsx)(t.ZP,{icon:(0,e.jsx)(te,{}),type:"dashed"})},"more")]}}],Ke=function(p){var u=p.map(function(f){return f.id||""});(0,O.P0)(u).then(function(f){f.succeeded&&(h(p),i.ZP.success("Saved!"))})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"mb-2 flex justify-end gap-2",children:[(0,e.jsx)(t.ZP,{onClick:function(){return x(!0)},type:"primary",icon:(0,e.jsx)(U.Z,{}),children:(0,e.jsx)("span",{children:(0,e.jsx)(w.FormattedMessage,{id:"general.new"})})},0),(0,e.jsx)(t.ZP,{onClick:ie,icon:(0,e.jsx)(U.Z,{}),children:"Ch\u1ECDn"},1)]}),(0,e.jsx)(ae.Z,{search:!1,rowKey:"id",columns:Be,pagination:!1,dataSource:S,dragSortKey:"sort",onDragSortEnd:Ke}),(0,e.jsx)(me.Z,{open:C,onOpenChange:x,onFinish:Y}),(0,e.jsxs)(G.Y,{open:m,onOpenChange:o,onFinish:we,children:[(0,e.jsx)(s.Z,{name:"catalogId",initialValue:d,hidden:!0}),(0,e.jsx)(y.Z,{showSearch:!0,name:"workContentId",options:a,label:"Work"})]})]})},fe=pe,B=n(12361),ve=n(63386),se=n(28199),he=n(71230),ue=n(15746),ge=n(35003),je=n(8811),le=n(55375),Ce=n(97857),ce=n.n(Ce),Pe=n(84697),xe=n(16309),ye=n(90672),Se=function(){var L=(0,w.useParams)(),d=L.id,K=(0,c.useState)(!1),M=v()(K,2),S=M[0],h=M[1],Z=(0,c.useRef)(),I=function(){var T=l()(r()().mark(function g(m){var o,j;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return m.parentId=d,m.type=Number(m.type),a.next=4,(0,B.BP)(m);case 4:o=a.sent,o.succeeded&&(i.ZP.success("Added!"),(j=Z.current)===null||j===void 0||j.reload(),h(!1));case 6:case"end":return a.stop()}},g)}));return function(m){return T.apply(this,arguments)}}(),C=function(){var T=l()(r()().mark(function g(m){var o,j;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,B.S8)(m);case 2:o=a.sent,o.succeeded?(i.ZP.success("Deleted"),(j=Z.current)===null||j===void 0||j.reload()):i.ZP.error(o.errors[0].description);case 4:case"end":return a.stop()}},g)}));return function(m){return T.apply(this,arguments)}}(),x=function(g){var m;w.history.push("/catalog/".concat(g)),(m=Z.current)===null||m===void 0||m.reload()};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(xe.Rs,{headerTitle:"Trang con",actionRef:Z,toolBarRender:function(){return[(0,e.jsx)(t.ZP,{type:"primary",icon:(0,e.jsx)(U.Z,{}),onClick:function(){return h(!0)},children:(0,e.jsx)("span",{children:(0,e.jsx)(w.FormattedMessage,{id:"general.new"})})},"3")]},metas:{title:{dataIndex:"name"},description:{dataIndex:"id"},actions:{render:function(g,m){return[(0,e.jsx)(t.ZP,{icon:(0,e.jsx)(Q.Z,{}),type:"primary",onClick:function(){return x(m.id)}},1),(0,e.jsx)(A.Z,{title:"Are you sure?",onConfirm:function(){return C(m.id)},children:(0,e.jsx)(t.ZP,{icon:(0,e.jsx)(N.Z,{}),type:"primary",danger:!0})},2)]}}},request:function(g){return(0,B.A$)(ce()(ce()({},g),{},{parentId:d}))},pagination:{}}),(0,e.jsxs)(G.Y,{open:S,onOpenChange:h,onFinish:I,title:(0,e.jsx)(w.FormattedMessage,{id:"general.new"}),children:[(0,e.jsx)(s.Z,{name:"name",label:"Name",rules:[{required:!0}]}),(0,e.jsx)(Pe.Z,{label:"Type",name:"type",initialValue:"".concat(le.H.Default)}),(0,e.jsx)(ye.Z,{label:"Description",name:"description"})]})]})},Ze=Se,Ee=n(34994),oe=n(31199),De=n(88608),Oe=n(32545),Me=function(){var L=(0,w.useParams)(),d=L.id,K=(0,c.useState)(!1),M=v()(K,2),S=M[0],h=M[1],Z=(0,c.useState)([]),I=v()(Z,2),C=I[0],x=I[1];(0,c.useEffect)(function(){(0,B.NU)(d).then(function(o){o&&x(o.images)})},[]);var T=function(){return h(!1)},g=function(){var o=l()(r()().mark(function j(R){var a,E;return r()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return a=C,a.push(R),D.next=4,(0,B.kn)(a,d);case 4:E=D.sent,E.succeeded?(x(a),i.ZP.success("Saved!")):i.ZP.error(E.errors[0].description);case 6:case"end":return D.stop()}},j)}));return function(R){return o.apply(this,arguments)}}(),m=function(){var o=l()(r()().mark(function j(R){var a,E;return r()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return a=C.filter(function(Y){return Y!==R}),D.next=3,(0,B.kn)(a,d);case 3:E=D.sent,E.succeeded?(x(a),i.ZP.success("Saved!")):i.ZP.error(E.errors[0].description);case 5:case"end":return D.stop()}},j)}));return function(R){return o.apply(this,arguments)}}();return(0,e.jsxs)(se.Z,{title:"Gallery",bordered:!0,headerBordered:!0,children:[(0,e.jsxs)("div",{className:"flex gap-4",children:[C.map(function(o,j){return(0,e.jsxs)("div",{className:"btn-upload p-2",children:[(0,e.jsx)(Oe.Z,{src:o,alt:"IMG"}),(0,e.jsx)(t.ZP,{icon:(0,e.jsx)(N.Z,{}),size:"small",danger:!0,onClick:function(){return m(o)},style:{position:"absolute",right:6}})]},j)}),(0,e.jsxs)("button",{type:"button",className:"btn-upload",onClick:function(){return h(!0)},children:[(0,e.jsx)(U.Z,{}),(0,e.jsx)("div",{style:{marginTop:8},children:"Upload"})]})]}),(0,e.jsx)(De.Z,{open:S,onCancel:T,onFinish:g})]})},Ie=Me,Te=n(93421),Re=function(){var L=(0,w.useParams)(),d=L.id,K=(0,c.useRef)();(0,c.useEffect)(function(){(0,B.lI)(d).then(function(S){if(S){var h;(h=K.current)===null||h===void 0||h.setFields([{name:"sku",value:S.sku},{name:"price",value:S.price},{name:"salePrice",value:S.salePrice},{name:"unitInStock",value:S.unitInStock}])}})},[]);var M=function(){var S=l()(r()().mark(function h(Z){var I;return r()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return Z.catalogId=d,x.next=3,(0,B.gg)(Z);case 3:I=x.sent,I.succeeded&&i.ZP.success("Saved");case 5:case"end":return x.stop()}},h)}));return function(Z){return S.apply(this,arguments)}}();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(se.Z,{title:"Details",headerBordered:!0,bordered:!0,className:"mb-4",children:(0,e.jsx)(Ee.A,{onFinish:M,formRef:K,children:(0,e.jsxs)(Te.Z,{children:[(0,e.jsx)(s.Z,{name:"sku",label:"SKU"}),(0,e.jsx)(oe.Z,{name:"price",label:"Price"}),(0,e.jsx)(oe.Z,{name:"salePrice",label:"Sale price"}),(0,e.jsx)(oe.Z,{name:"unitInStock",label:"Stock"})]})})}),(0,e.jsx)(Ie,{})]})},Fe=Re,be=function(){var L=(0,w.useParams)(),d=L.id,K=(0,c.useState)(!1),M=v()(K,2),S=M[0],h=M[1],Z=(0,c.useState)(),I=v()(Z,2),C=I[0],x=I[1],T=(0,c.useState)("content"),g=v()(T,2),m=g[0],o=g[1];(0,c.useEffect)(function(){(0,B.R4)(d).then(function(a){return x(a)})},[d]);var j=function(){var a=l()(r()().mark(function E($){return r()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:(0,B.BP)($).then(function(ie){ie.succeeded&&(i.ZP.success("Saved!"),h(!1))});case 1:case"end":return Y.stop()}},E)}));return function($){return a.apply(this,arguments)}}(),R=function(E){o(E)};return(0,e.jsx)(ve._z,{title:C==null?void 0:C.name,children:(0,e.jsxs)(he.Z,{gutter:16,children:[(0,e.jsxs)(ue.Z,{span:18,children:[(0,e.jsx)(se.Z,{tabs:{tabPosition:"top",activeKey:m,items:[{label:"Content",key:"content",children:(0,e.jsx)(fe,{})},{label:(0,e.jsx)(w.FormattedMessage,{id:"menu.settings"}),key:"setting",children:(0,e.jsx)(ge.Z,{})},{label:(0,e.jsx)(w.FormattedMessage,{id:"pages.catalog.productDetail"}),key:"product-detail",children:(0,e.jsx)(Fe,{}),disabled:(C==null?void 0:C.type)!==le.H.Product}],onChange:R},className:"mb-4"}),!(C!=null&&C.parentId)&&(0,e.jsx)(Ze,{}),(0,e.jsxs)(G.Y,{onFinish:j,open:S,onOpenChange:h,children:[(0,e.jsx)(s.Z,{name:"name",label:"Name"}),(0,e.jsx)(s.Z,{name:"normalizedName",label:"Normalized Name"})]})]}),(0,e.jsx)(ue.Z,{span:6,children:(0,e.jsx)(je.Z,{})})]})})},Ae=be},98364:function(ee,k,n){n.d(k,{CO:function(){return ne},Ef:function(){return ae},KL:function(){return q},Xr:function(){return v},Z:function(){return re},v7:function(){return te}});var _=n(15009),r=n.n(_),z=n(99289),l=n.n(z),W=n(35312);function v(s){return O.apply(this,arguments)}function O(){return O=l()(r()().mark(function s(y){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,W.request)("component/".concat(y)));case 1:case"end":return t.stop()}},s)})),O.apply(this,arguments)}function Q(s){return N.apply(this,arguments)}function N(){return N=_asyncToGenerator(_regeneratorRuntime().mark(function s(y){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("component/add",{method:"POST",data:y}));case 1:case"end":return t.stop()}},s)})),N.apply(this,arguments)}function q(s){return c.apply(this,arguments)}function c(){return c=l()(r()().mark(function s(y){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,W.request)("component/update",{method:"POST",data:y}));case 1:case"end":return t.stop()}},s)})),c.apply(this,arguments)}function ne(s){return X.apply(this,arguments)}function X(){return X=l()(r()().mark(function s(y){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,W.request)("component/list",{params:y}));case 1:case"end":return t.stop()}},s)})),X.apply(this,arguments)}function re(s,y){return H.apply(this,arguments)}function H(){return H=l()(r()().mark(function s(y,i){return r()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",(0,W.request)("component/list-work/".concat(i),{params:y}));case 1:case"end":return A.stop()}},s)})),H.apply(this,arguments)}function te(s){return U.apply(this,arguments)}function U(){return U=l()(r()().mark(function s(y){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,W.request)("component/delete/".concat(y),{method:"POST"}));case 1:case"end":return t.stop()}},s)})),U.apply(this,arguments)}function ae(s){return G.apply(this,arguments)}function G(){return G=l()(r()().mark(function s(y){var i;return r()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return i={searchTerm:y.keyWords},A.abrupt("return",(0,W.request)("component/form-select",{params:i}));case 2:case"end":return A.stop()}},s)})),G.apply(this,arguments)}}}]);
