"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5690],{37446:function(ae,W,n){n.d(W,{Z:function(){return j}});var z=n(1413),r=n(62435),G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},d=G,E=n(91146),C=function(w,K){return r.createElement(E.Z,(0,z.Z)((0,z.Z)({},w),{},{ref:K,icon:d}))};C.displayName="MoreOutlined";var j=r.forwardRef(C)},18576:function(ae,W,n){n.d(W,{Z:function(){return $}});var z=n(97857),r=n.n(z),G=n(37476),d=n(5966),E=n(98364),C=n(64317),j=n(86074),H=function(T){return(0,j.jsx)(C.Z,{showSearch:!0,request:E.Ef,name:T.name,label:T.label,rules:[{required:!0}]})},w=H,K=function(T){return(0,j.jsxs)(G.Y,r()(r()({},T),{},{title:"Add component",children:[(0,j.jsx)(d.Z,{name:"name",label:"Name"}),(0,j.jsx)(w,{name:"componentId",label:"Component"})]}))},$=K},25840:function(ae,W,n){n.r(W),n.d(W,{default:function(){return Ne}});var z=n(15009),r=n.n(z),G=n(99289),d=n.n(G),E=n(5574),C=n.n(E),j=n(66352),H=n(47389),w=n(82061),K=n(37446),$=n(51042),J=n(62639),T=n(37476),U=n(5966),q=n(64317),Z=n(58301),X=n(86738),M=n(71577),_=n(85418),t=n(35312),a=n(62435),b=n(18576),e=n(86074),A=function(){var N=(0,t.useParams)(),s=N.id,L=(0,a.useState)([]),F=C()(L,2),P=F[0],y=F[1],R=(0,a.useState)(!1),I=C()(R,2),v=I[0],h=I[1],V=(0,a.useState)(!1),B=C()(V,2),Y=B[0],l=B[1],c=(0,a.useState)(),i=C()(c,2),f=i[0],m=i[1],S=function(){(0,j.KC)(s).then(function(u){y(u.data)})};(0,a.useEffect)(function(){s&&S()},[s]);var o=function(){var O=d()(r()().mark(function u(p){var g;return r()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,j.zt)(p,s);case 2:g=x.sent,g.succeeded?(Z.ZP.success("Deleted!"),S()):Z.ZP.error(g.errors[0].description);case 4:case"end":return x.stop()}},u)}));return function(p){return O.apply(this,arguments)}}(),te=function(){var O=d()(r()().mark(function u(p){var g;return r()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return p.catalogId=s,x.next=3,(0,j.yL)(p);case 3:g=x.sent,g.succeeded&&(Z.ZP.success("Added!"),h(!1),S());case 5:case"end":return x.stop()}},u)}));return function(p){return O.apply(this,arguments)}}(),ne=function(){var O=d()(r()().mark(function u(){var p;return r()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,j.x)();case 2:p=D.sent,m(p),l(!0);case 5:case"end":return D.stop()}},u)}));return function(){return O.apply(this,arguments)}}(),ie=function(){var O=d()(r()().mark(function u(p){var g;return r()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,j.jX)(p);case 2:g=x.sent,g.succeeded&&(Z.ZP.success("Saved"),l(!1),S());case 4:case"end":return x.stop()}},u)}));return function(p){return O.apply(this,arguments)}}(),$e=[{key:"1",label:"Show / Hide"},{key:"edit",label:"Edit",icon:(0,e.jsx)(H.Z,{})}],ke=function(){var O=d()(r()().mark(function u(p,g){var D;return r()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(p.key!=="1"){Q.next=5;break}return Q.next=3,(0,j.Wv)(g.id);case 3:D=Q.sent,D.succeeded&&(Z.ZP.success("Actived!"),S());case 5:p.key==="edit"&&Le(g);case 6:case"end":return Q.stop()}},u)}));return function(p,g){return O.apply(this,arguments)}}(),Le=function(u){if(console.log(u),u.normalizedName==="jumbotron"){t.history.push("/works/".concat(u.id));return}t.history.push("/works/".concat(u.normalizedName.toLocaleLowerCase(),"/").concat(u.id))},Be=[{title:"#",dataIndex:"sort",className:"drag-visible",width:50},{title:"Name",dataIndex:"name"},{title:"Status",dataIndex:"active",valueEnum:{false:{text:"Draft",status:"Default"},true:{text:"Active",status:"Processing"}},width:100},{title:"Action",valueType:"option",render:function(u,p){return[(0,e.jsx)(X.Z,{title:"Are you sure?",onConfirm:function(){return o(p.id)},children:(0,e.jsx)(M.ZP,{size:"small",icon:(0,e.jsx)(w.Z,{}),danger:!0,type:"primary"})},4),(0,e.jsx)(_.Z,{menu:{items:$e,onClick:function(D){return ke(D,p)}},children:(0,e.jsx)(M.ZP,{icon:(0,e.jsx)(K.Z,{}),type:"dashed",size:"small"})},"more")]},width:100}],We=function(u){var p=u.map(function(g){return g.id||""});(0,j.P0)(p).then(function(g){g.succeeded&&(y(u),Z.ZP.success("Saved!"))})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"mb-2 flex justify-end gap-2",children:[(0,e.jsx)(M.ZP,{onClick:function(){return h(!0)},type:"primary",icon:(0,e.jsx)($.Z,{}),children:(0,e.jsx)("span",{children:(0,e.jsx)(t.FormattedMessage,{id:"general.new"})})},0),(0,e.jsx)(M.ZP,{onClick:ne,icon:(0,e.jsx)($.Z,{}),children:"Ch\u1ECDn"},1)]}),(0,e.jsx)(J.Z,{search:!1,rowKey:"id",columns:Be,pagination:!1,dataSource:P,dragSortKey:"sort",onDragSortEnd:We}),(0,e.jsx)(b.Z,{open:v,onOpenChange:h,onFinish:te}),(0,e.jsxs)(T.Y,{open:Y,onOpenChange:l,onFinish:ie,children:[(0,e.jsx)(U.Z,{name:"catalogId",initialValue:s,hidden:!0}),(0,e.jsx)(q.Z,{showSearch:!0,name:"workContentId",options:f,label:"Work"})]})]})},me=A,k=n(12361),fe=n(63386),se=n(28199),ue=n(71230),re=n(15746),pe=n(35003),ve=n(8811),he=n(55375),ge=n(97857),le=n.n(ge),je=n(34148),xe=n(84697),Ce=n(16309),Ze=n(90672),ye=function(N){var s=N.parent,L=(0,t.useParams)(),F=L.id,P=(0,t.useIntl)(),y=(0,a.useState)(!1),R=C()(y,2),I=R[0],v=R[1],h=(0,a.useRef)(),V=function(){var l=d()(r()().mark(function c(i){var f,m;return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return i.parentId=F,i.type=Number(i.type),o.next=4,(0,k.BP)(i);case 4:f=o.sent,f.succeeded&&(Z.ZP.success("Added!"),(m=h.current)===null||m===void 0||m.reload(),v(!1));case 6:case"end":return o.stop()}},c)}));return function(i){return l.apply(this,arguments)}}(),B=function(){var l=d()(r()().mark(function c(i){var f,m;return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,k.S8)(i);case 2:f=o.sent,f.succeeded?(Z.ZP.success("Deleted"),(m=h.current)===null||m===void 0||m.reload()):Z.ZP.error(f.errors[0].description);case 4:case"end":return o.stop()}},c)}));return function(i){return l.apply(this,arguments)}}(),Y=function(c){var i;t.history.push("/catalog/".concat(c)),(i=h.current)===null||i===void 0||i.reload()};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ce.Rs,{ghost:!0,headerTitle:"Trang con",actionRef:h,toolBarRender:function(){return[(0,e.jsx)(M.ZP,{type:"primary",icon:(0,e.jsx)($.Z,{}),onClick:function(){return v(!0)},disabled:(s==null?void 0:s.parentId)!=null,children:(0,e.jsx)("span",{children:(0,e.jsx)(t.FormattedMessage,{id:"general.new"})})},"3")]},metas:{title:{dataIndex:"name"},description:{dataIndex:"description"},actions:{render:function(c,i){return[(0,e.jsx)(M.ZP,{icon:(0,e.jsx)(K.Z,{}),type:"dashed"}),(0,e.jsx)(M.ZP,{icon:(0,e.jsx)(H.Z,{}),type:"primary",onClick:function(){return Y(i.id)}},1),(0,e.jsx)(X.Z,{title:"Are you sure?",onConfirm:function(){return B(i.id)},children:(0,e.jsx)(M.ZP,{icon:(0,e.jsx)(w.Z,{}),type:"primary",danger:!0})},2)]}}},request:function(c){return(0,k.A$)(le()(le()({},c),{},{parentId:F,locale:P.locale,type:s==null?void 0:s.type}),{})},pagination:{}}),(0,e.jsxs)(T.Y,{open:I,onOpenChange:v,onFinish:V,title:(0,e.jsx)(t.FormattedMessage,{id:"general.new"}),children:[(0,e.jsx)(U.Z,{name:"name",label:"Name",rules:[{required:!0}]}),(0,e.jsxs)(ue.Z,{gutter:16,children:[(0,e.jsx)(re.Z,{span:12,children:(0,e.jsx)(xe.Z,{label:"Type",name:"type",initialValue:s==null?void 0:s.type.toString(),disabled:!0})}),(0,e.jsx)(re.Z,{span:12,children:(0,e.jsx)(je.Z,{label:"Parent",name:"parentId",initialValue:s==null?void 0:s.id})})]}),(0,e.jsx)(Ze.Z,{label:"Description",name:"description"})]})]})},Se=ye,Pe=n(34994),oe=n(31199),Oe=n(93421),Fe=n(1913),Ie=n(32545),De=function(){var N=(0,t.useParams)(),s=N.id,L=(0,a.useState)(!1),F=C()(L,2),P=F[0],y=F[1],R=(0,a.useState)([]),I=C()(R,2),v=I[0],h=I[1];(0,a.useEffect)(function(){(0,k.NU)(s).then(function(l){l&&h(l.images)})},[]);var V=function(){return y(!1)},B=function(){var l=d()(r()().mark(function c(i){var f,m;return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return f=v,f.push(i),o.next=4,(0,k.kn)(f,s);case 4:m=o.sent,m.succeeded?(h(f),Z.ZP.success("Saved!")):Z.ZP.error(m.errors[0].description);case 6:case"end":return o.stop()}},c)}));return function(i){return l.apply(this,arguments)}}(),Y=function(){var l=d()(r()().mark(function c(i){var f,m;return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return f=v.filter(function(te){return te!==i}),o.next=3,(0,k.kn)(f,s);case 3:m=o.sent,m.succeeded?(h(f),Z.ZP.success("Saved!")):Z.ZP.error(m.errors[0].description);case 5:case"end":return o.stop()}},c)}));return function(i){return l.apply(this,arguments)}}();return(0,e.jsxs)(se.Z,{title:"Gallery",bordered:!0,headerBordered:!0,children:[(0,e.jsxs)("div",{className:"flex gap-4",children:[v.map(function(l,c){return(0,e.jsxs)("div",{className:"btn-upload p-2",children:[(0,e.jsx)(Ie.Z,{src:l,alt:"IMG"}),(0,e.jsx)(M.ZP,{icon:(0,e.jsx)(w.Z,{}),size:"small",danger:!0,onClick:function(){return Y(l)},style:{position:"absolute",right:6}})]},c)}),(0,e.jsxs)("button",{type:"button",className:"btn-upload",onClick:function(){return y(!0)},children:[(0,e.jsx)($.Z,{}),(0,e.jsx)("div",{style:{marginTop:8},children:"Upload"})]})]}),(0,e.jsx)(Fe.Z,{open:P,onCancel:V,onFinish:B})]})},Ee=De,Te=function(){var N=(0,t.useParams)(),s=N.id,L=(0,a.useRef)();(0,a.useEffect)(function(){(0,k.lI)(s).then(function(P){if(P){var y;(y=L.current)===null||y===void 0||y.setFields([{name:"sku",value:P.sku},{name:"price",value:P.price},{name:"salePrice",value:P.salePrice},{name:"unitInStock",value:P.unitInStock}])}})},[]);var F=function(){var P=d()(r()().mark(function y(R){var I;return r()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return R.catalogId=s,h.next=3,(0,k.gg)(R);case 3:I=h.sent,I.succeeded&&Z.ZP.success("Saved");case 5:case"end":return h.stop()}},y)}));return function(R){return P.apply(this,arguments)}}();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(se.Z,{title:"Details",headerBordered:!0,bordered:!0,className:"mb-4",children:(0,e.jsx)(Pe.A,{onFinish:F,formRef:L,children:(0,e.jsxs)(Oe.Z,{children:[(0,e.jsx)(U.Z,{name:"sku",label:"SKU"}),(0,e.jsx)(oe.Z,{name:"price",label:"Price"}),(0,e.jsx)(oe.Z,{name:"salePrice",label:"Sale price"}),(0,e.jsx)(oe.Z,{name:"unitInStock",label:"Stock"})]})})}),(0,e.jsx)(Ee,{})]})},Me=Te,ce=n(1413),Re=n(26554),we=n(91146),de=function(N,s){return a.createElement(we.Z,(0,ce.Z)((0,ce.Z)({},N),{},{ref:s,icon:Re.Z}))};de.displayName="LeftOutlined";var be=a.forwardRef(de),Ae=function(){var N=(0,t.useParams)(),s=N.id,L=(0,a.useState)(!1),F=C()(L,2),P=F[0],y=F[1],R=(0,a.useState)(),I=C()(R,2),v=I[0],h=I[1],V=(0,a.useState)("content"),B=C()(V,2),Y=B[0],l=B[1],c=function(){(0,k.R4)(s).then(function(S){return h(S)})};(0,a.useEffect)(function(){c()},[s]);var i=function(){var m=d()(r()().mark(function S(o){return r()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:(0,k.BP)(o).then(function(ie){ie.succeeded&&(Z.ZP.success("Saved!"),y(!1))});case 1:case"end":return ne.stop()}},S)}));return function(o){return m.apply(this,arguments)}}(),f=function(S){l(S)};return(0,e.jsx)(fe._z,{title:v==null?void 0:v.name,extra:(0,e.jsx)(M.ZP,{icon:(0,e.jsx)(be,{}),onClick:function(){return t.history.back()},children:(0,e.jsx)("span",{children:(0,e.jsx)(t.FormattedMessage,{id:"general.back"})})}),children:(0,e.jsxs)(ue.Z,{gutter:16,children:[(0,e.jsxs)(re.Z,{md:18,children:[(0,e.jsx)(se.Z,{tabs:{tabPosition:"top",activeKey:Y,items:[{label:"Content",key:"content",children:(0,e.jsx)(me,{})},{label:(0,e.jsx)(t.FormattedMessage,{id:"menu.settings"}),key:"setting",children:(0,e.jsx)(pe.Z,{catalog:v,reload:c})},{label:(0,e.jsx)(t.FormattedMessage,{id:"pages.catalog.productDetail"}),key:"product-detail",children:(0,e.jsx)(Me,{}),disabled:(v==null?void 0:v.type)!==he.HQ.Product},{label:"Trang con",key:"childen",children:(0,e.jsx)(Se,{parent:v})}],onChange:f},className:"mb-4"}),(0,e.jsxs)(T.Y,{onFinish:i,open:P,onOpenChange:y,children:[(0,e.jsx)(U.Z,{name:"name",label:"Name"}),(0,e.jsx)(U.Z,{name:"normalizedName",label:"Normalized Name"})]})]}),(0,e.jsx)(re.Z,{md:6,children:(0,e.jsx)(ve.Z,{catalog:v})})]})})},Ne=Ae},98364:function(ae,W,n){n.d(W,{CO:function(){return J},Ef:function(){return M},KL:function(){return K},Xr:function(){return C},Z:function(){return U},v7:function(){return Z}});var z=n(15009),r=n.n(z),G=n(99289),d=n.n(G),E=n(35312);function C(t){return j.apply(this,arguments)}function j(){return j=d()(r()().mark(function t(a){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,E.request)("component/".concat(a)));case 1:case"end":return e.stop()}},t)})),j.apply(this,arguments)}function H(t){return w.apply(this,arguments)}function w(){return w=_asyncToGenerator(_regeneratorRuntime().mark(function t(a){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("component/add",{method:"POST",data:a}));case 1:case"end":return e.stop()}},t)})),w.apply(this,arguments)}function K(t){return $.apply(this,arguments)}function $(){return $=d()(r()().mark(function t(a){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,E.request)("component/update",{method:"POST",data:a}));case 1:case"end":return e.stop()}},t)})),$.apply(this,arguments)}function J(t){return T.apply(this,arguments)}function T(){return T=d()(r()().mark(function t(a){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,E.request)("component/list",{params:a}));case 1:case"end":return e.stop()}},t)})),T.apply(this,arguments)}function U(t,a){return q.apply(this,arguments)}function q(){return q=d()(r()().mark(function t(a,b){return r()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",(0,E.request)("component/list-work/".concat(b),{params:a}));case 1:case"end":return A.stop()}},t)})),q.apply(this,arguments)}function Z(t){return X.apply(this,arguments)}function X(){return X=d()(r()().mark(function t(a){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,E.request)("component/delete/".concat(a),{method:"POST"}));case 1:case"end":return e.stop()}},t)})),X.apply(this,arguments)}function M(t){return _.apply(this,arguments)}function _(){return _=d()(r()().mark(function t(a){var b;return r()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return b={searchTerm:a.keyWords},A.abrupt("return",(0,E.request)("component/form-select",{params:b}));case 2:case"end":return A.stop()}},t)})),_.apply(this,arguments)}}}]);
