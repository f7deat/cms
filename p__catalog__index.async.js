"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5690],{76131:function(te,O,e){var _=e(37476),n=e(5966),Z=e(65675),u=e(86074),m=function(C){return(0,u.jsxs)(_.Y,{open:C.open,title:"Component",onFinish:C.onFinish,onOpenChange:C.onOpenChange,children:[(0,u.jsx)(n.Z,{name:"name",label:"Name"}),(0,u.jsx)(Z.Z,{name:"componentId",label:"Component"})]})};O.Z=m},65675:function(te,O,e){var _=e(98364),n=e(64317),Z=e(86074),u=function(v){return(0,Z.jsx)(n.Z,{showSearch:!0,request:_.Ef,name:v.name,label:v.label})};O.Z=u},38832:function(te,O,e){e.r(O),e.d(O,{default:function(){return _e}});var _=e(15009),n=e.n(_),Z=e(99289),u=e.n(Z),m=e(5574),v=e.n(m),C=e(97857),E=e.n(C),M=e(13769),Y=e.n(M),g=e(66352),V=e(53682),T=e(47389),X=e(82061),I=e(37446),B=e(51042),x=e(37476),K=e(5966),w=e(64317),t=e(58301),i=e(93421),r=e(71577),s=e(86738),f=e(85418),de=e(95840),H=e(35312),D=e(62435),me=e(76131),pe=e(60887),J=e(45587),fe=e(32339),he=e(24285),a=e(86074),ve=["children"],ge=function(F){var S=F.children,R=Y()(F,ve),P=(0,J.nB)({id:R["data-row-key"]}),b=P.attributes,k=P.listeners,N=P.setNodeRef,G=P.setActivatorNodeRef,U=P.transform,W=P.transition,Q=P.isDragging,z=E()(E()({},R.style),{},{transform:he.ux.Transform.toString(U&&E()(E()({},U),{},{scaleY:1})),transition:W},Q?{position:"relative"}:{});return(0,a.jsx)("tr",E()(E()(E()({},R),{},{ref:N,style:z},b),{},{children:D.Children.map(S,function(A){return A.key==="sort"?D.cloneElement(A,{children:(0,a.jsx)(V.Z,E()({ref:G,style:{touchAction:"none",cursor:"move"}},k))}):A})}))},ye=function(){var F=(0,H.useParams)(),S=F.id,R=(0,D.useState)([]),P=v()(R,2),b=P[0],k=P[1],N=(0,D.useState)(!1),G=v()(N,2),U=G[0],W=G[1],Q=(0,D.useState)(!1),z=v()(Q,2),A=z[0],q=z[1],ae=(0,D.useState)(),re=v()(ae,2),se=re[0],L=re[1],j=function(){(0,g.KC)(S).then(function(d){k(d.data)})};(0,D.useEffect)(function(){S&&j()},[S]);var ee=function(){var h=u()(n()().mark(function d(l){var o;return n()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,g.zt)(l,S);case 2:o=c.sent,o.succeeded?(t.ZP.success("Deleted!"),j()):t.ZP.error(o.errors[0].description);case 4:case"end":return c.stop()}},d)}));return function(l){return h.apply(this,arguments)}}(),$=function(){var h=u()(n()().mark(function d(l){var o;return n()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return l.catalogId=S,c.next=3,(0,g.yL)(l);case 3:o=c.sent,o.succeeded&&(t.ZP.success("Added!"),W(!1),j());case 5:case"end":return c.stop()}},d)}));return function(l){return h.apply(this,arguments)}}(),ne=function(){var h=u()(n()().mark(function d(){var l;return n()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,g.x)();case 2:l=p.sent,L(l),q(!0);case 5:case"end":return p.stop()}},d)}));return function(){return h.apply(this,arguments)}}(),ue=function(){var h=u()(n()().mark(function d(l){var o;return n()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,g.jX)(l);case 2:o=c.sent,o.succeeded&&(t.ZP.success("Saved"),q(!1),j());case 4:case"end":return c.stop()}},d)}));return function(l){return h.apply(this,arguments)}}(),Ze=[{key:"1",label:"Show / Hide"}],Me=function(){var h=u()(n()().mark(function d(l,o){var p;return n()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(l.key!=="1"){y.next=5;break}return y.next=3,(0,g.Wv)(o);case 3:p=y.sent,p.succeeded&&(t.ZP.success("Actived!"),j());case 5:case"end":return y.stop()}},d)}));return function(l,o){return h.apply(this,arguments)}}(),Te=function(d,l,o){var p=d.findIndex(function(y){return y.id===l.id}),c=d.findIndex(function(y){return y.id===(o==null?void 0:o.id)});return(0,J.Rp)(d,p,c).map(function(y){return y.id})},Ie=function(d){var l=d.active,o=d.over;if(l.id!==(o==null?void 0:o.id)){k(function(c){var y=c.findIndex(function(oe){return oe.id===l.id}),Re=c.findIndex(function(oe){return oe.id===(o==null?void 0:o.id)});return(0,J.Rp)(c,y,Re)});var p=Te(b,l,o);(0,g.P0)(p).then(function(c){c.succeeded&&t.ZP.success("Saved!")})}},we=[{key:"sort"},{title:"Name",dataIndex:"name"},{title:"Action",render:function(d,l){return(0,a.jsxs)(i.Z,{children:[(0,a.jsx)(r.ZP,{type:"primary",icon:(0,a.jsx)(T.Z,{}),onClick:function(){H.history.push("/works/".concat(l.normalizedName.toLocaleLowerCase(),"/").concat(l.id))}},1),(0,a.jsx)(s.Z,{title:"Are you sure?",onConfirm:function(){return ee(l.id)},children:(0,a.jsx)(r.ZP,{icon:(0,a.jsx)(X.Z,{}),danger:!0,type:"primary"})},4),(0,a.jsx)(f.Z,{menu:{items:Ze,onClick:function(p){return Me(p,l.id)}},children:(0,a.jsx)(r.ZP,{icon:(0,a.jsx)(I.Z,{}),type:"dashed"})},"more")]})}}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-2 flex justify-end gap-2",children:[(0,a.jsx)(r.ZP,{onClick:function(){return W(!0)},type:"primary",icon:(0,a.jsx)(B.Z,{}),children:(0,a.jsx)(H.FormattedMessage,{id:"general.new"})},0),(0,a.jsx)(r.ZP,{onClick:ne,icon:(0,a.jsx)(B.Z,{}),children:"Ch\u1ECDn"},1)]}),(0,a.jsx)(pe.LB,{modifiers:[fe.DL],onDragEnd:Ie,children:(0,a.jsx)(J.Fo,{items:b.map(function(h){return h.id}),strategy:J.qw,children:(0,a.jsx)(de.Z,{components:{body:{row:ge}},columns:we,rowKey:"id",dataSource:b})})}),(0,a.jsx)(me.Z,{open:U,onOpenChange:W,onFinish:$}),(0,a.jsxs)(x.Y,{open:A,onOpenChange:q,onFinish:ue,children:[(0,a.jsx)(K.Z,{name:"catalogId",initialValue:S,hidden:!0}),(0,a.jsx)(w.Z,{showSearch:!0,name:"workContentId",options:se,label:"Work"})]})]})},Ce=ye,je=e(78710),ie=e(12361),Pe=e(63386),Ee=e(28199),De=e(71230),le=e(15746),Oe=e(35003),xe=e(74653),Se=function(){var F=(0,H.useIntl)(),S=(0,H.useParams)(),R=S.id,P=(0,D.useState)(!1),b=v()(P,2),k=b[0],N=b[1],G=(0,D.useState)(),U=v()(G,2),W=U[0],Q=U[1],z=(0,D.useState)("content"),A=v()(z,2),q=A[0],ae=A[1];(0,D.useEffect)(function(){(0,ie.R4)(R).then(function(L){return Q(L)})},[R]);var re=function(){var L=u()(n()().mark(function j(ee){return n()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:(0,ie.BP)(ee).then(function(ue){ue.succeeded&&(t.ZP.success("Saved!"),N(!1))});case 1:case"end":return ne.stop()}},j)}));return function(ee){return L.apply(this,arguments)}}(),se=function(){var L=u()(n()().mark(function j(){return n()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,(0,je.W)(R);case 2:case"end":return $.stop()}},j)}));return function(){return L.apply(this,arguments)}}();return(0,a.jsx)(Pe._z,{title:W==null?void 0:W.name,children:(0,a.jsxs)(De.Z,{gutter:16,children:[(0,a.jsxs)(le.Z,{span:18,children:[(0,a.jsx)(Ee.Z,{tabs:{tabPosition:"top",activeKey:q,items:[{label:"Content",key:"content",children:(0,a.jsx)(Ce,{})},{label:F.formatMessage({id:"menu.settings"}),key:"setting",children:(0,a.jsx)(Oe.Z,{})}],onChange:function(j){ae(j)}},extra:(0,a.jsxs)(i.Z,{children:[(0,a.jsx)(r.ZP,{type:"primary",onClick:se,children:"Export"}),(0,a.jsx)(r.ZP,{type:"primary",danger:!0,children:"Import"})]})}),(0,a.jsxs)(x.Y,{onFinish:re,open:k,onOpenChange:N,children:[(0,a.jsx)(K.Z,{name:"name",label:"Name"}),(0,a.jsx)(K.Z,{name:"normalizedName",label:"Normalized Name"})]})]}),(0,a.jsx)(le.Z,{span:6,children:(0,a.jsx)(xe.Z,{})})]})})},_e=Se},78710:function(te,O,e){e.d(O,{Jx:function(){return V},W:function(){return K},_O:function(){return E},_s:function(){return Y},dk:function(){return B},gn:function(){return X},rZ:function(){return v}});var _=e(15009),n=e.n(_),Z=e(99289),u=e.n(Z),m=e(35312);function v(){return C.apply(this,arguments)}function C(){return C=u()(n()().mark(function t(){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.request)("backup/statistic"));case 1:case"end":return r.stop()}},t)})),C.apply(this,arguments)}function E(){return M.apply(this,arguments)}function M(){return M=u()(n()().mark(function t(){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.request)("backup/export",{method:"POST"}));case 1:case"end":return r.stop()}},t)})),M.apply(this,arguments)}function Y(){return g.apply(this,arguments)}function g(){return g=u()(n()().mark(function t(){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.request)("backup/upgrade",{method:"POST"}));case 1:case"end":return r.stop()}},t)})),g.apply(this,arguments)}function V(){return T.apply(this,arguments)}function T(){return T=u()(n()().mark(function t(){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.request)("backup/upgrade/list"));case 1:case"end":return r.stop()}},t)})),T.apply(this,arguments)}function X(t){return I.apply(this,arguments)}function I(){return I=u()(n()().mark(function t(i){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,m.request)(i,{method:"POST"}));case 1:case"end":return s.stop()}},t)})),I.apply(this,arguments)}function B(t){return x.apply(this,arguments)}function x(){return x=u()(n()().mark(function t(i){var r;return n()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return r=new FormData,r.append("file",i),f.abrupt("return",(0,m.request)("backup/import",{method:"POST",data:r}));case 3:case"end":return f.stop()}},t)})),x.apply(this,arguments)}function K(t){return w.apply(this,arguments)}function w(){return w=u()(n()().mark(function t(i){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,m.request)("backup/export/catalog/".concat(i),{method:"POST"}));case 1:case"end":return s.stop()}},t)})),w.apply(this,arguments)}},98364:function(te,O,e){e.d(O,{CO:function(){return V},Ef:function(){return K},KL:function(){return Y},Xr:function(){return v},Z:function(){return X},v7:function(){return B}});var _=e(15009),n=e.n(_),Z=e(99289),u=e.n(Z),m=e(35312);function v(t){return C.apply(this,arguments)}function C(){return C=u()(n()().mark(function t(i){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,m.request)("component/".concat(i)));case 1:case"end":return s.stop()}},t)})),C.apply(this,arguments)}function E(t){return M.apply(this,arguments)}function M(){return M=_asyncToGenerator(_regeneratorRuntime().mark(function t(i){return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",request("component/add",{method:"POST",data:i}));case 1:case"end":return s.stop()}},t)})),M.apply(this,arguments)}function Y(t){return g.apply(this,arguments)}function g(){return g=u()(n()().mark(function t(i){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,m.request)("component/update",{method:"POST",data:i}));case 1:case"end":return s.stop()}},t)})),g.apply(this,arguments)}function V(t){return T.apply(this,arguments)}function T(){return T=u()(n()().mark(function t(i){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,m.request)("component/list",{params:i}));case 1:case"end":return s.stop()}},t)})),T.apply(this,arguments)}function X(t,i){return I.apply(this,arguments)}function I(){return I=u()(n()().mark(function t(i,r){return n()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,m.request)("component/list-work/".concat(r),{params:i}));case 1:case"end":return f.stop()}},t)})),I.apply(this,arguments)}function B(t){return x.apply(this,arguments)}function x(){return x=u()(n()().mark(function t(i){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,m.request)("component/delete/".concat(i),{method:"POST"}));case 1:case"end":return s.stop()}},t)})),x.apply(this,arguments)}function K(t){return w.apply(this,arguments)}function w(){return w=u()(n()().mark(function t(i){var r;return n()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return r={searchTerm:i.keyWords},f.abrupt("return",(0,m.request)("component/form-select",{params:r}));case 2:case"end":return f.stop()}},t)})),w.apply(this,arguments)}}}]);
