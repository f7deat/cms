"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5690],{77171:function(W,E,e){e.d(E,{Z:function(){return c}});var o=e(1413),r=e(62435),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]},name:"arrow-down",theme:"outlined"},s=f,d=e(84089),u=function(i,_){return r.createElement(d.Z,(0,o.Z)((0,o.Z)({},i),{},{ref:_,icon:s}))};u.displayName="ArrowDownOutlined";var c=r.forwardRef(u)},82826:function(W,E,e){e.d(E,{Z:function(){return c}});var o=e(1413),r=e(62435),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},s=f,d=e(84089),u=function(i,_){return r.createElement(d.Z,(0,o.Z)((0,o.Z)({},i),{},{ref:_,icon:s}))};u.displayName="ArrowLeftOutlined";var c=r.forwardRef(u)},1912:function(W,E,e){e.d(E,{Z:function(){return c}});var o=e(1413),r=e(62435),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"},s=f,d=e(84089),u=function(i,_){return r.createElement(d.Z,(0,o.Z)((0,o.Z)({},i),{},{ref:_,icon:s}))};u.displayName="ArrowUpOutlined";var c=r.forwardRef(u)},63434:function(W,E,e){var o=e(1413),r=e(91),f=e(86074),s=e(22270),d=e(32808),u=e(62435),c=e(90789),j=e(15790),i=["options","fieldProps","proFieldProps","valueEnum"],_=u.forwardRef(function(l,a){var M=l.options,g=l.fieldProps,Z=l.proFieldProps,h=l.valueEnum,n=(0,r.Z)(l,i);return(0,f.jsx)(j.Z,(0,o.Z)({ref:a,valueType:"checkbox",valueEnum:(0,s.h)(h,void 0),fieldProps:(0,o.Z)({options:M},g),lightProps:(0,o.Z)({labelFormatter:function(){return(0,f.jsx)(j.Z,(0,o.Z)({ref:a,valueType:"checkbox",mode:"read",valueEnum:(0,s.h)(h,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,o.Z)({options:M},g),proFieldProps:Z},n))}},n.lightProps),proFieldProps:Z},n))}),x=u.forwardRef(function(l,a){var M=l.fieldProps,g=l.children;return(0,f.jsx)(d.Z,(0,o.Z)((0,o.Z)({ref:a},M),{},{children:g}))}),m=(0,c.G)(x,{valuePropName:"checked"}),O=m;O.Group=_,E.Z=O},64317:function(W,E,e){var o=e(1413),r=e(91),f=e(86074),s=e(22270),d=e(62435),u=e(66758),c=e(15790),j=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],i=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],_=d.forwardRef(function(a,M){var g=a.fieldProps,Z=a.children,h=a.params,n=a.proFieldProps,F=a.mode,p=a.valueEnum,C=a.request,P=a.showSearch,t=a.options,V=(0,r.Z)(a,j),w=(0,d.useContext)(u.Z);return(0,f.jsx)(c.Z,(0,o.Z)((0,o.Z)({valueEnum:(0,s.h)(p),request:C,params:h,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,o.Z)({options:t,mode:F,showSearch:P,getPopupContainer:w.getPopupContainer},g),ref:M,proFieldProps:n},V),{},{children:Z}))}),x=d.forwardRef(function(a,M){var g=a.fieldProps,Z=a.children,h=a.params,n=a.proFieldProps,F=a.mode,p=a.valueEnum,C=a.request,P=a.options,t=(0,r.Z)(a,i),V=(0,o.Z)({options:P,mode:F||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},g),w=(0,d.useContext)(u.Z);return(0,f.jsx)(c.Z,(0,o.Z)((0,o.Z)({valueEnum:(0,s.h)(p),request:C,params:h,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,o.Z)({getPopupContainer:w.getPopupContainer},V),ref:M,proFieldProps:n},t),{},{children:Z}))}),m=_,O=x,l=m;l.SearchSelect=O,l.displayName="ProFormComponent",E.Z=l},90672:function(W,E,e){var o=e(1413),r=e(91),f=e(86074),s=e(62435),d=e(15790),u=["fieldProps","proFieldProps"],c=function(i,_){var x=i.fieldProps,m=i.proFieldProps,O=(0,r.Z)(i,u);return(0,f.jsx)(d.Z,(0,o.Z)({ref:_,valueType:"textarea",fieldProps:x,proFieldProps:m},O))};E.Z=s.forwardRef(c)},5966:function(W,E,e){var o=e(1413),r=e(91),f=e(86074),s=e(15790),d=["fieldProps","proFieldProps"],u=["fieldProps","proFieldProps"],c="text",j=function(m){var O=m.fieldProps,l=m.proFieldProps,a=(0,r.Z)(m,d);return(0,f.jsx)(s.Z,(0,o.Z)({valueType:c,fieldProps:O,filedConfig:{valueType:c},proFieldProps:l},a))},i=function(m){var O=m.fieldProps,l=m.proFieldProps,a=(0,r.Z)(m,u);return(0,f.jsx)(s.Z,(0,o.Z)({valueType:"password",fieldProps:O,proFieldProps:l,filedConfig:{valueType:c}},a))},_=j;_.Password=i,_.displayName="ProFormComponent",E.Z=_},16507:function(W,E,e){e.d(E,{Z:function(){return m}});var o=e(5574),r=e.n(o),f=e(90905);function s(){return(0,f.request)("component/list")}function d(O){return request("component/add",{method:"POST",data:O})}var u=e(99351),c=e(5966),j=e(64317),i=e(62435),_=e(86074),x=function(l){var a=(0,i.useState)(),M=r()(a,2),g=M[0],Z=M[1];return(0,i.useEffect)(function(){s().then(function(h){Z(h.map(function(n){return{label:n.name,value:n.id}}))})},[]),(0,_.jsxs)(u.Y,{open:l.visible,title:"Add component",onFinish:l.onFinish,onOpenChange:l.onVisibleChange,children:[(0,_.jsx)(c.Z,{name:"name",label:"Name"}),(0,_.jsx)(j.Z,{showSearch:!0,options:g,name:"componentId",label:"Component"})]})},m=x},14027:function(W,E,e){var o=e(15009),r=e.n(o),f=e(99289),s=e.n(f),d=e(5574),u=e.n(d),c=e(66352),j=e(24969),i=e(86548),_=e(1912),x=e(77171),m=e(48689),O=e(22538),l=e(27790),a=e(71577),M=e(86738),g=e(90905),Z=e(62435),h=e(16507),n=e(86074),F=function(){var C=(0,g.useParams)(),P=C.id,t=(0,Z.useRef)(),V=(0,Z.useState)(!1),w=u()(V,2),me=w[0],ae=w[1];(0,Z.useEffect)(function(){var T;(T=t.current)===null||T===void 0||T.reload()},[P]);var pe=function(){var T=s()(r()().mark(function S(v){var A,U;return r()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,c.zt)(v,P);case 2:A=y.sent,A.succeeded&&(l.ZP.success("Deleted!"),(U=t.current)===null||U===void 0||U.reload());case 4:case"end":return y.stop()}},S)}));return function(v){return T.apply(this,arguments)}}(),le=function(){var T=s()(r()().mark(function S(v,A){var U,H;return r()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return v.sortOrder=A?v.sortOrder-1:v.sortOrder+1,$.next=3,(0,c.aN)(v.id,v.catalogId,v.sortOrder);case 3:U=$.sent,U.succeeded&&(l.ZP.success("Sorted!"),(H=t.current)===null||H===void 0||H.reload());case 5:case"end":return $.stop()}},S)}));return function(v,A){return T.apply(this,arguments)}}(),ve=function(){var T=s()(r()().mark(function S(v){var A,U;return r()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return v.catalogId=P,y.next=3,(0,c.yL)(v);case 3:A=y.sent,A.succeeded&&(l.ZP.success("Added!"),ae(!1),(U=t.current)===null||U===void 0||U.reload());case 5:case"end":return y.stop()}},S)}));return function(v){return T.apply(this,arguments)}}();return(0,n.jsxs)("div",{children:[(0,n.jsx)(O.Rs,{toolBarRender:function(){return[(0,n.jsx)(a.Z,{onClick:function(){return ae(!0)},type:"primary",icon:(0,n.jsx)(j.Z,{}),children:(0,n.jsx)(g.FormattedMessage,{id:"general.new"})},0)]},rowSelection:{},actionRef:t,request:s()(r()().mark(function T(){return r()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,c.KC)(P));case 1:case"end":return v.stop()}},T)})),headerTitle:"Work items",metas:{title:{dataIndex:"name"},actions:{render:function(S,v){return[(0,n.jsx)(a.Z,{type:"primary",icon:(0,n.jsx)(i.Z,{}),onClick:function(){g.history.push("/works/".concat(v.normalizedName.toLocaleLowerCase(),"/").concat(v.id))}},1),(0,n.jsx)(a.Z,{icon:(0,n.jsx)(_.Z,{}),onClick:function(){return le(v,!0)}},2),(0,n.jsx)(a.Z,{icon:(0,n.jsx)(x.Z,{}),onClick:function(){return le(v,!1)}},3),(0,n.jsxs)(M.Z,{title:"Are you sure?",onConfirm:function(){return pe(v.id)},children:[(0,n.jsx)(a.Z,{icon:(0,n.jsx)(m.Z,{}),danger:!0,type:"primary"}),","]},4)]}}}}),(0,n.jsx)(h.Z,{visible:me,onVisibleChange:ae,onFinish:ve})]})};E.Z=F},93658:function(W,E,e){e.r(E),e.d(E,{default:function(){return y}});var o=e(15009),r=e.n(o),f=e(99289),s=e.n(f),d=e(5574),u=e.n(d),c=e(19632),j=e.n(c),i=e(61614),_=e(24969),x=e(99351),m=e(5966),O=e(63434),l=e(90905),a=e(69677),M=e(27790),g=e(71577),Z=e(39890),h=e(62435),n=e(86074),F=a.Z.Search,p=function(){var Q=(0,h.useRef)(),X=(0,h.useState)([]),z=u()(X,2),k=z[0],R=z[1],b=(0,h.useState)([]),B=u()(b,2),q=B[0],ee=B[1],ue=(0,h.useState)(!0),I=u()(ue,2),ne=I[0],ie=I[1],Oe=(0,h.useState)(!1),re=u()(Oe,2),fe=re[0],_e=re[1];(0,h.useEffect)(function(){(0,i.jr)().then(function(Y){R(Y)})},[]);var ge=function(D){console.log(D);var K=D.node.key,de=D.dragNode.key,he=D.node.pos.split("-"),G=D.dropPosition-Number(he[he.length-1]),ce=function L(N,te,Ce){for(var J=0;J<N.length;J++){if(N[J].key===te)return Ce(N[J],J,N);N[J].children&&L(N[J].children,te,Ce)}},oe=j()(k),se;if(ce(oe,de,function(L,N,te){te.splice(N,1),se=L}),!D.dropToGap)ce(oe,K,function(L){L.children=L.children||[],L.children.unshift(se)});else if((D.node.props.children||[]).length>0&&D.node.props.expanded&&G===1)ce(oe,K,function(L){L.children=L.children||[],L.children.unshift(se)});else{var Pe=[],Ee;ce(oe,K,function(L,N,te){Pe=te,Ee=N}),G===-1?Pe.splice(Ee,0,se):Pe.splice(Ee+1,0,se)}var Ze={dragNodeKey:D.dragNodesKeys[0],node:D.node.key,dropToGap:D.dropToGap};(0,i.m6)(Ze).then(function(L){L.succeeded&&M.ZP.success("Saved!")}),R(oe)},De=function(D){ee(D),ie(!1)},Me=function(D){var K;if(!D||D.length===0){M.ZP.warning("Can de-select");return}(K=Q.current)===null||K===void 0||K.setFieldValue("parentId",D[0]),l.history.push("/catalog/".concat(D[0]))},je=function(){var Y=s()(r()().mark(function D(K){var de;return r()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,(0,i.BP)(K);case 2:de=G.sent,de.succeeded&&(M.ZP.success("Saved!"),_e(!1));case 4:case"end":return G.stop()}},D)}));return function(K){return Y.apply(this,arguments)}}(),xe=function(){_e(!0)};return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(F,{}),(0,n.jsx)(g.Z,{type:"primary",icon:(0,n.jsx)(_.Z,{}),onClick:xe})]}),(0,n.jsx)("div",{className:"bg-white",children:(0,n.jsx)(Z.Z,{showLine:!0,showIcon:!0,treeData:k,expandedKeys:q,onExpand:De,autoExpandParent:ne,draggable:!0,onSelect:Me,onDrop:ge})}),(0,n.jsxs)(x.Y,{onOpenChange:_e,open:fe,onFinish:je,formRef:Q,children:[(0,n.jsx)(m.Z,{name:"parentId",label:"Parrent Id",disabled:!0}),(0,n.jsx)(m.Z,{name:"name",label:"Name"}),(0,n.jsx)(m.Z,{name:"normalizedName",label:"Normalized Name"}),(0,n.jsx)(O.Z,{name:"active",label:"Active"})]})]})},C=p,P=e(55375),t=e(97269),V=e(90672),w=e(64317),me=e(96074),ae=function(){var Q=(0,l.useParams)(),X=Q.id,z=(0,h.useRef)();(0,h.useEffect)(function(){(0,i.R4)(X).then(function(R){var b;(b=z.current)===null||b===void 0||b.setFields([{name:"id",value:R.id},{name:"name",value:R.name},{name:"normalizedName",value:R.normalizedName},{name:"title",value:R.setting.title},{name:"container",value:R.setting.container},{name:"type",value:R.type}])})},[X]);var k=function(){var R=s()(r()().mark(function b(B){var q,ee;return r()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return q={title:B.title,container:B.container},B.setting=q,I.next=4,(0,i.BA)(B);case 4:ee=I.sent,ee.succeeded&&M.ZP.success("Saved!");case 6:case"end":return I.stop()}},b)}));return function(B){return R.apply(this,arguments)}}();return(0,n.jsxs)(t.A,{formRef:z,onFinish:k,children:[(0,n.jsx)(m.Z,{name:"id",hidden:!0}),(0,n.jsx)(m.Z,{name:"name",label:"Name"}),(0,n.jsx)(m.Z,{name:"normalizedName",label:"Normalized name"}),(0,n.jsx)(V.Z,{name:"description",label:"Description"}),(0,n.jsx)(w.Z,{name:"type",label:"Type",options:[{label:"Page",value:P.H.Default},{label:"Setting",value:P.H.Setting},{label:"Home",value:P.H.Entry}]}),(0,n.jsx)(me.Z,{}),(0,n.jsx)(m.Z,{name:"title",label:"Title"}),(0,n.jsx)(O.Z,{name:"container",label:"Container"})]})},pe=ae,le=e(14027),ve=e(82826),T=e(62884),S=e(30029),v=e(71230),A=e(15746),U=e(32983),H=function(){var Q=(0,l.useIntl)(),X=(0,h.useState)(!1),z=u()(X,2),k=z[0],R=z[1],b=(0,h.useState)("tab1"),B=u()(b,2),q=B[0],ee=B[1],ue=function(){var I=s()(r()().mark(function ne(ie){return r()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:(0,i.BP)(ie).then(function(fe){fe.succeeded&&(M.ZP.success("Saved!"),R(!1))});case 1:case"end":return re.stop()}},ne)}));return function(ie){return I.apply(this,arguments)}}();return(0,n.jsx)(T._z,{extra:(0,n.jsx)(g.Z,{icon:(0,n.jsx)(ve.Z,{}),onClick:function(){return l.history.back()},children:(0,n.jsx)(l.FormattedMessage,{id:"general.back"})}),children:(0,n.jsxs)(v.Z,{gutter:16,children:[(0,n.jsx)(A.Z,{span:6,children:(0,n.jsx)(C,{})}),(0,n.jsxs)(A.Z,{span:12,children:[(0,n.jsx)(S.Z,{tabs:{tabPosition:"top",activeKey:q,items:[{label:"Content",key:"tab1",children:(0,n.jsx)(le.Z,{})},{label:Q.formatMessage({id:"menu.settings"}),key:"tab2",children:(0,n.jsx)(pe,{})}],onChange:function(ne){ee(ne)}}}),(0,n.jsxs)(x.Y,{onFinish:ue,open:k,onOpenChange:R,children:[(0,n.jsx)(m.Z,{name:"name",label:"Name"}),(0,n.jsx)(m.Z,{name:"normalizedName",label:"Normalized Name"})]})]}),(0,n.jsx)(A.Z,{span:6,children:(0,n.jsx)(S.Z,{children:(0,n.jsx)(U.Z,{})})})]})})},y=H},61614:function(W,E,e){e.d(E,{A$:function(){return m},BA:function(){return Z},BP:function(){return _},R4:function(){return j},j7:function(){return u},jr:function(){return l},m6:function(){return n}});var o=e(15009),r=e.n(o),f=e(99289),s=e.n(f),d=e(90905);function u(p){return c.apply(this,arguments)}function c(){return c=s()(r()().mark(function p(C){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.request)("catalog/entry/".concat(C)));case 1:case"end":return t.stop()}},p)})),c.apply(this,arguments)}function j(p){return i.apply(this,arguments)}function i(){return i=s()(r()().mark(function p(C){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.request)("catalog/".concat(C)));case 1:case"end":return t.stop()}},p)})),i.apply(this,arguments)}function _(p){return x.apply(this,arguments)}function x(){return x=s()(r()().mark(function p(C){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.request)("catalog/add",{method:"POST",data:C}));case 1:case"end":return t.stop()}},p)})),x.apply(this,arguments)}function m(p){return O.apply(this,arguments)}function O(){return O=s()(r()().mark(function p(C){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.request)("catalog/list",{method:"GET",params:C}));case 1:case"end":return t.stop()}},p)})),O.apply(this,arguments)}function l(){return a.apply(this,arguments)}function a(){return a=s()(r()().mark(function p(){return r()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,d.request)("catalog/tree"));case 1:case"end":return P.stop()}},p)})),a.apply(this,arguments)}function M(p){return g.apply(this,arguments)}function g(){return g=_asyncToGenerator(_regeneratorRuntime().mark(function p(C){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("catalog/delete/".concat(C),{method:"POST"}));case 1:case"end":return t.stop()}},p)})),g.apply(this,arguments)}function Z(p){return h.apply(this,arguments)}function h(){return h=s()(r()().mark(function p(C){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.request)("catalog/save",{method:"POST",data:C}));case 1:case"end":return t.stop()}},p)})),h.apply(this,arguments)}function n(p){return F.apply(this,arguments)}function F(){return F=s()(r()().mark(function p(C){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.request)("catalog/tree-drop",{method:"POST",data:C}));case 1:case"end":return t.stop()}},p)})),F.apply(this,arguments)}}}]);
