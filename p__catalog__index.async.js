"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5690],{77171:function(w,E,e){e.d(E,{Z:function(){return m}});var s=e(1413),r=e(62435),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]},name:"arrow-down",theme:"outlined"},o=_,u=e(84089),d=function(c,h){return r.createElement(u.Z,(0,s.Z)((0,s.Z)({},c),{},{ref:h,icon:o}))};d.displayName="ArrowDownOutlined";var m=r.forwardRef(d)},82826:function(w,E,e){e.d(E,{Z:function(){return m}});var s=e(1413),r=e(62435),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},o=_,u=e(84089),d=function(c,h){return r.createElement(u.Z,(0,s.Z)((0,s.Z)({},c),{},{ref:h,icon:o}))};d.displayName="ArrowLeftOutlined";var m=r.forwardRef(d)},1912:function(w,E,e){e.d(E,{Z:function(){return m}});var s=e(1413),r=e(62435),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"},o=_,u=e(84089),d=function(c,h){return r.createElement(u.Z,(0,s.Z)((0,s.Z)({},c),{},{ref:h,icon:o}))};d.displayName="ArrowUpOutlined";var m=r.forwardRef(d)},63434:function(w,E,e){var s=e(1413),r=e(91),_=e(86074),o=e(22270),u=e(32808),d=e(62435),m=e(90789),j=e(15790),c=["options","fieldProps","proFieldProps","valueEnum"],h=d.forwardRef(function(i,a){var g=i.options,C=i.fieldProps,Z=i.proFieldProps,P=i.valueEnum,n=(0,r.Z)(i,c);return(0,_.jsx)(j.Z,(0,s.Z)({ref:a,valueType:"checkbox",valueEnum:(0,o.h)(P,void 0),fieldProps:(0,s.Z)({options:g},C),lightProps:(0,s.Z)({labelFormatter:function(){return(0,_.jsx)(j.Z,(0,s.Z)({ref:a,valueType:"checkbox",mode:"read",valueEnum:(0,o.h)(P,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,s.Z)({options:g},C),proFieldProps:Z},n))}},n.lightProps),proFieldProps:Z},n))}),x=d.forwardRef(function(i,a){var g=i.fieldProps,C=i.children;return(0,_.jsx)(u.Z,(0,s.Z)((0,s.Z)({ref:a},g),{},{children:C}))}),p=(0,m.G)(x,{valuePropName:"checked"}),O=p;O.Group=h,E.Z=O},64317:function(w,E,e){var s=e(1413),r=e(91),_=e(86074),o=e(22270),u=e(62435),d=e(66758),m=e(15790),j=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],c=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],h=u.forwardRef(function(a,g){var C=a.fieldProps,Z=a.children,P=a.params,n=a.proFieldProps,I=a.mode,G=a.valueEnum,K=a.request,y=a.showSearch,T=a.options,l=(0,r.Z)(a,j),f=(0,u.useContext)(d.Z);return(0,_.jsx)(m.Z,(0,s.Z)((0,s.Z)({valueEnum:(0,o.h)(G),request:K,params:P,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,s.Z)({options:T,mode:I,showSearch:y,getPopupContainer:f.getPopupContainer},C),ref:g,proFieldProps:n},l),{},{children:Z}))}),x=u.forwardRef(function(a,g){var C=a.fieldProps,Z=a.children,P=a.params,n=a.proFieldProps,I=a.mode,G=a.valueEnum,K=a.request,y=a.options,T=(0,r.Z)(a,c),l=(0,s.Z)({options:y,mode:I||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},C),f=(0,u.useContext)(d.Z);return(0,_.jsx)(m.Z,(0,s.Z)((0,s.Z)({valueEnum:(0,o.h)(G),request:K,params:P,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,s.Z)({getPopupContainer:f.getPopupContainer},l),ref:g,proFieldProps:n},T),{},{children:Z}))}),p=h,O=x,i=p;i.SearchSelect=O,i.displayName="ProFormComponent",E.Z=i},90672:function(w,E,e){var s=e(1413),r=e(91),_=e(86074),o=e(62435),u=e(15790),d=["fieldProps","proFieldProps"],m=function(c,h){var x=c.fieldProps,p=c.proFieldProps,O=(0,r.Z)(c,d);return(0,_.jsx)(u.Z,(0,s.Z)({ref:h,valueType:"textarea",fieldProps:x,proFieldProps:p},O))};E.Z=o.forwardRef(m)},5966:function(w,E,e){var s=e(1413),r=e(91),_=e(86074),o=e(15790),u=["fieldProps","proFieldProps"],d=["fieldProps","proFieldProps"],m="text",j=function(p){var O=p.fieldProps,i=p.proFieldProps,a=(0,r.Z)(p,u);return(0,_.jsx)(o.Z,(0,s.Z)({valueType:m,fieldProps:O,filedConfig:{valueType:m},proFieldProps:i},a))},c=function(p){var O=p.fieldProps,i=p.proFieldProps,a=(0,r.Z)(p,d);return(0,_.jsx)(o.Z,(0,s.Z)({valueType:"password",fieldProps:O,proFieldProps:i,filedConfig:{valueType:m}},a))},h=j;h.Password=c,h.displayName="ProFormComponent",E.Z=h},16507:function(w,E,e){e.d(E,{Z:function(){return p}});var s=e(5574),r=e.n(s),_=e(90905);function o(){return(0,_.request)("component/list-all")}function u(O){return request("component/add",{method:"POST",data:O})}var d=e(99351),m=e(5966),j=e(64317),c=e(62435),h=e(86074),x=function(i){var a=(0,c.useState)(),g=r()(a,2),C=g[0],Z=g[1];return(0,c.useEffect)(function(){o().then(function(P){Z(P.map(function(n){return{label:n.name,value:n.id}}))})},[]),(0,h.jsxs)(d.Y,{open:i.open,title:"Add component",onFinish:i.onFinish,onOpenChange:i.onOpenChange,children:[(0,h.jsx)(m.Z,{name:"name",label:"Name"}),(0,h.jsx)(j.Z,{showSearch:!0,options:C,name:"componentId",label:"Component"})]})},p=x},14027:function(w,E,e){var s=e(15009),r=e.n(s),_=e(99289),o=e.n(_),u=e(5574),d=e.n(u),m=e(66352),j=e(24969),c=e(86548),h=e(1912),x=e(77171),p=e(48689),O=e(22538),i=e(27790),a=e(71577),g=e(86738),C=e(90905),Z=e(62435),P=e(16507),n=e(86074),I=function(){var K=(0,C.useParams)(),y=K.id,T=(0,Z.useRef)(),l=(0,Z.useState)(!1),f=d()(l,2),D=f[0],t=f[1];(0,Z.useEffect)(function(){var S;(S=T.current)===null||S===void 0||S.reload()},[y]);var pe=function(){var S=o()(r()().mark(function R(v){var A,B;return r()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,(0,m.zt)(v,y);case 2:A=L.sent,A.succeeded&&(i.ZP.success("Deleted!"),(B=T.current)===null||B===void 0||B.reload());case 4:case"end":return L.stop()}},R)}));return function(v){return S.apply(this,arguments)}}(),ue=function(){var S=o()(r()().mark(function R(v,A){var B,J;return r()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return v.sortOrder=A?v.sortOrder-1:v.sortOrder+1,V.next=3,(0,m.aN)(v.id,v.catalogId,v.sortOrder);case 3:B=V.sent,B.succeeded&&(i.ZP.success("Sorted!"),(J=T.current)===null||J===void 0||J.reload());case 5:case"end":return V.stop()}},R)}));return function(v,A){return S.apply(this,arguments)}}(),ve=function(){var S=o()(r()().mark(function R(v){var A,B;return r()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return v.catalogId=y,L.next=3,(0,m.yL)(v);case 3:A=L.sent,A.succeeded&&(i.ZP.success("Added!"),t(!1),(B=T.current)===null||B===void 0||B.reload());case 5:case"end":return L.stop()}},R)}));return function(v){return S.apply(this,arguments)}}();return(0,n.jsxs)("div",{children:[(0,n.jsx)(O.Rs,{toolBarRender:function(){return[(0,n.jsx)(a.Z,{onClick:function(){return t(!0)},type:"primary",icon:(0,n.jsx)(j.Z,{}),children:(0,n.jsx)(C.FormattedMessage,{id:"general.new"})},0)]},rowSelection:{},actionRef:T,request:o()(r()().mark(function S(){return r()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,m.KC)(y));case 1:case"end":return v.stop()}},S)})),headerTitle:"Work items",metas:{title:{dataIndex:"name"},actions:{render:function(R,v){return[(0,n.jsx)(a.Z,{type:"primary",icon:(0,n.jsx)(c.Z,{}),onClick:function(){C.history.push("/works/".concat(v.normalizedName.toLocaleLowerCase(),"/").concat(v.id))}},1),(0,n.jsx)(a.Z,{icon:(0,n.jsx)(h.Z,{}),onClick:function(){return ue(v,!0)}},2),(0,n.jsx)(a.Z,{icon:(0,n.jsx)(x.Z,{}),onClick:function(){return ue(v,!1)}},3),(0,n.jsxs)(g.Z,{title:"Are you sure?",onConfirm:function(){return pe(v.id)},children:[(0,n.jsx)(a.Z,{icon:(0,n.jsx)(p.Z,{}),danger:!0,type:"primary"}),","]},4)]}}}}),(0,n.jsx)(P.Z,{open:D,onOpenChange:t,onFinish:ve})]})};E.Z=I},93658:function(w,E,e){e.r(E),e.d(E,{default:function(){return L}});var s=e(15009),r=e.n(s),_=e(99289),o=e.n(_),u=e(5574),d=e.n(u),m=e(19632),j=e.n(m),c=e(61614),h=e(24969),x=e(99351),p=e(5966),O=e(63434),i=e(90905),a=e(69677),g=e(27790),C=e(71577),Z=e(39890),P=e(62435),n=e(86074),I=a.Z.Search,G=function(){var k=(0,P.useRef)(),q=(0,P.useState)([]),H=d()(q,2),ee=H[0],F=H[1],N=(0,P.useState)([]),b=d()(N,2),ne=b[0],re=b[1],ie=(0,P.useState)(!0),W=d()(ie,2),te=W[0],de=W[1],Oe=(0,P.useState)(!1),ae=d()(Oe,2),fe=ae[0],_e=ae[1];(0,P.useEffect)(function(){(0,c.jr)().then(function(Q){F(Q)})},[]);var Ce=function(M){console.log(M);var $=M.node.key,ce=M.dragNode.key,he=M.node.pos.split("-"),Y=M.dropPosition-Number(he[he.length-1]),me=function U(z,oe,ge){for(var X=0;X<z.length;X++){if(z[X].key===oe)return ge(z[X],X,z);z[X].children&&U(z[X].children,oe,ge)}},se=j()(ee),le;if(me(se,ce,function(U,z,oe){oe.splice(z,1),le=U}),!M.dropToGap)me(se,$,function(U){U.children=U.children||[],U.children.unshift(le)});else if((M.node.props.children||[]).length>0&&M.node.props.expanded&&Y===1)me(se,$,function(U){U.children=U.children||[],U.children.unshift(le)});else{var Pe=[],Ee;me(se,$,function(U,z,oe){Pe=oe,Ee=z}),Y===-1?Pe.splice(Ee,0,le):Pe.splice(Ee+1,0,le)}var Ze={dragNodeKey:M.dragNodesKeys[0],node:M.node.key,dropToGap:M.dropToGap};(0,c.m6)(Ze).then(function(U){U.succeeded&&g.ZP.success("Saved!")}),F(se)},De=function(M){re(M),de(!1)},Me=function(M){var $;if(!M||M.length===0){g.ZP.warning("Can de-select");return}($=k.current)===null||$===void 0||$.setFieldValue("parentId",M[0]),i.history.push("/catalog/".concat(M[0]))},je=function(){var Q=o()(r()().mark(function M($){var ce;return r()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,(0,c.BP)($);case 2:ce=Y.sent,ce.succeeded&&(g.ZP.success("Saved!"),_e(!1));case 4:case"end":return Y.stop()}},M)}));return function($){return Q.apply(this,arguments)}}(),xe=function(){_e(!0)};return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(I,{}),(0,n.jsx)(C.Z,{type:"primary",icon:(0,n.jsx)(h.Z,{}),onClick:xe})]}),(0,n.jsx)("div",{className:"bg-white",children:(0,n.jsx)(Z.Z,{showLine:!0,showIcon:!0,treeData:ee,expandedKeys:ne,onExpand:De,autoExpandParent:te,draggable:!0,onSelect:Me,onDrop:Ce})}),(0,n.jsxs)(x.Y,{onOpenChange:_e,open:fe,onFinish:je,formRef:k,children:[(0,n.jsx)(p.Z,{name:"parentId",label:"Parrent Id",disabled:!0}),(0,n.jsx)(p.Z,{name:"name",label:"Name"}),(0,n.jsx)(p.Z,{name:"normalizedName",label:"Normalized Name"}),(0,n.jsx)(O.Z,{name:"active",label:"Active"})]})]})},K=G,y=e(55375),T=e(97269),l=e(90672),f=e(64317),D=e(96074),t=function(){var k=(0,i.useParams)(),q=k.id,H=(0,P.useRef)();(0,P.useEffect)(function(){(0,c.R4)(q).then(function(F){var N;(N=H.current)===null||N===void 0||N.setFields([{name:"id",value:F.id},{name:"name",value:F.name},{name:"normalizedName",value:F.normalizedName},{name:"title",value:F.setting.title},{name:"container",value:F.setting.container},{name:"type",value:F.type}])})},[q]);var ee=function(){var F=o()(r()().mark(function N(b){var ne,re;return r()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return ne={title:b.title,container:b.container},b.setting=ne,W.next=4,(0,c.BA)(b);case 4:re=W.sent,re.succeeded&&g.ZP.success("Saved!");case 6:case"end":return W.stop()}},N)}));return function(b){return F.apply(this,arguments)}}();return(0,n.jsxs)(T.A,{formRef:H,onFinish:ee,children:[(0,n.jsx)(p.Z,{name:"id",hidden:!0}),(0,n.jsx)(p.Z,{name:"name",label:"Name"}),(0,n.jsx)(p.Z,{name:"normalizedName",label:"Normalized name"}),(0,n.jsx)(l.Z,{name:"description",label:"Description"}),(0,n.jsx)(f.Z,{name:"type",label:"Type",options:[{label:"Page",value:y.H.Default},{label:"Setting",value:y.H.Setting},{label:"Home",value:y.H.Entry}]}),(0,n.jsx)(D.Z,{}),(0,n.jsx)(p.Z,{name:"title",label:"Title"}),(0,n.jsx)(O.Z,{name:"container",label:"Container"})]})},pe=t,ue=e(14027),ve=e(82826),S=e(62884),R=e(30029),v=e(71230),A=e(15746),B=e(32983),J=function(){var k=(0,i.useIntl)(),q=(0,P.useState)(!1),H=d()(q,2),ee=H[0],F=H[1],N=(0,P.useState)("tab1"),b=d()(N,2),ne=b[0],re=b[1],ie=function(){var W=o()(r()().mark(function te(de){return r()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:(0,c.BP)(de).then(function(fe){fe.succeeded&&(g.ZP.success("Saved!"),F(!1))});case 1:case"end":return ae.stop()}},te)}));return function(de){return W.apply(this,arguments)}}();return(0,n.jsx)(S._z,{extra:(0,n.jsx)(C.Z,{icon:(0,n.jsx)(ve.Z,{}),onClick:function(){return i.history.back()},children:(0,n.jsx)(i.FormattedMessage,{id:"general.back"})}),children:(0,n.jsxs)(v.Z,{gutter:16,children:[(0,n.jsx)(A.Z,{span:6,children:(0,n.jsx)(K,{})}),(0,n.jsxs)(A.Z,{span:12,children:[(0,n.jsx)(R.Z,{tabs:{tabPosition:"top",activeKey:ne,items:[{label:"Content",key:"tab1",children:(0,n.jsx)(ue.Z,{})},{label:k.formatMessage({id:"menu.settings"}),key:"tab2",children:(0,n.jsx)(pe,{})}],onChange:function(te){re(te)}}}),(0,n.jsxs)(x.Y,{onFinish:ie,open:ee,onOpenChange:F,children:[(0,n.jsx)(p.Z,{name:"name",label:"Name"}),(0,n.jsx)(p.Z,{name:"normalizedName",label:"Normalized Name"})]})]}),(0,n.jsx)(A.Z,{span:6,children:(0,n.jsx)(R.Z,{children:(0,n.jsx)(B.Z,{})})})]})})},L=J},61614:function(w,E,e){e.d(E,{A$:function(){return p},BA:function(){return Z},BP:function(){return h},R4:function(){return j},S8:function(){return g},_V:function(){return G},gY:function(){return y},j7:function(){return d},jr:function(){return i},m6:function(){return n}});var s=e(15009),r=e.n(s),_=e(99289),o=e.n(_),u=e(90905);function d(l){return m.apply(this,arguments)}function m(){return m=o()(r()().mark(function l(f){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("catalog/entry/".concat(f)));case 1:case"end":return t.stop()}},l)})),m.apply(this,arguments)}function j(l){return c.apply(this,arguments)}function c(){return c=o()(r()().mark(function l(f){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("catalog/".concat(f)));case 1:case"end":return t.stop()}},l)})),c.apply(this,arguments)}function h(l){return x.apply(this,arguments)}function x(){return x=o()(r()().mark(function l(f){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("catalog/add",{method:"POST",data:f}));case 1:case"end":return t.stop()}},l)})),x.apply(this,arguments)}function p(l){return O.apply(this,arguments)}function O(){return O=o()(r()().mark(function l(f){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("catalog/list",{method:"GET",params:f}));case 1:case"end":return t.stop()}},l)})),O.apply(this,arguments)}function i(){return a.apply(this,arguments)}function a(){return a=o()(r()().mark(function l(){return r()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",(0,u.request)("catalog/tree"));case 1:case"end":return D.stop()}},l)})),a.apply(this,arguments)}function g(l){return C.apply(this,arguments)}function C(){return C=o()(r()().mark(function l(f){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("catalog/delete/".concat(f),{method:"POST"}));case 1:case"end":return t.stop()}},l)})),C.apply(this,arguments)}function Z(l){return P.apply(this,arguments)}function P(){return P=o()(r()().mark(function l(f){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("catalog/save",{method:"POST",data:f}));case 1:case"end":return t.stop()}},l)})),P.apply(this,arguments)}function n(l){return I.apply(this,arguments)}function I(){return I=o()(r()().mark(function l(f){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("catalog/tree-drop",{method:"POST",data:f}));case 1:case"end":return t.stop()}},l)})),I.apply(this,arguments)}function G(){return K.apply(this,arguments)}function K(){return K=o()(r()().mark(function l(){return r()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",(0,u.request)("catalog/view-count"));case 1:case"end":return D.stop()}},l)})),K.apply(this,arguments)}function y(l){return T.apply(this,arguments)}function T(){return T=o()(r()().mark(function l(f){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("catalog/active/".concat(f),{method:"POST"}));case 1:case"end":return t.stop()}},l)})),T.apply(this,arguments)}}}]);
