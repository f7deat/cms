"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[690],{77171:function($,g,e){e.d(g,{Z:function(){return v}});var o=e(1413),r=e(62435),P={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]},name:"arrow-down",theme:"outlined"},s=P,p=e(84089),m=function(u,h){return r.createElement(p.Z,(0,o.Z)((0,o.Z)({},u),{},{ref:h,icon:s}))};m.displayName="ArrowDownOutlined";var v=r.forwardRef(m)},1912:function($,g,e){e.d(g,{Z:function(){return v}});var o=e(1413),r=e(62435),P={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"},s=P,p=e(84089),m=function(u,h){return r.createElement(p.Z,(0,o.Z)((0,o.Z)({},u),{},{ref:h,icon:s}))};m.displayName="ArrowUpOutlined";var v=r.forwardRef(m)},63434:function($,g,e){var o=e(1413),r=e(91),P=e(86074),s=e(22270),p=e(32808),m=e(62435),v=e(90789),x=e(15790),u=["options","fieldProps","proFieldProps","valueEnum"],h=m.forwardRef(function(l,a){var D=l.options,M=l.fieldProps,T=l.proFieldProps,_=l.valueEnum,n=(0,r.Z)(l,u);return(0,P.jsx)(x.Z,(0,o.Z)({ref:a,valueType:"checkbox",valueEnum:(0,s.h)(_,void 0),fieldProps:(0,o.Z)({options:D},M),lightProps:(0,o.Z)({labelFormatter:function(){return(0,P.jsx)(x.Z,(0,o.Z)({ref:a,valueType:"checkbox",mode:"read",valueEnum:(0,s.h)(_,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,o.Z)({options:D},M),proFieldProps:T},n))}},n.lightProps),proFieldProps:T},n))}),j=m.forwardRef(function(l,a){var D=l.fieldProps,M=l.children;return(0,P.jsx)(p.Z,(0,o.Z)((0,o.Z)({ref:a},D),{},{children:M}))}),i=(0,v.G)(j,{valuePropName:"checked"}),E=i;E.Group=h,g.Z=E},64317:function($,g,e){var o=e(1413),r=e(91),P=e(86074),s=e(22270),p=e(62435),m=e(66758),v=e(15790),x=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],u=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],h=p.forwardRef(function(a,D){var M=a.fieldProps,T=a.children,_=a.params,n=a.proFieldProps,U=a.mode,d=a.valueEnum,C=a.request,f=a.showSearch,t=a.options,V=(0,r.Z)(a,x),w=(0,p.useContext)(m.Z);return(0,P.jsx)(v.Z,(0,o.Z)((0,o.Z)({valueEnum:(0,s.h)(d),request:C,params:_,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,o.Z)({options:t,mode:U,showSearch:f,getPopupContainer:w.getPopupContainer},M),ref:D,proFieldProps:n},V),{},{children:T}))}),j=p.forwardRef(function(a,D){var M=a.fieldProps,T=a.children,_=a.params,n=a.proFieldProps,U=a.mode,d=a.valueEnum,C=a.request,f=a.options,t=(0,r.Z)(a,u),V=(0,o.Z)({options:f,mode:U||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},M),w=(0,p.useContext)(m.Z);return(0,P.jsx)(v.Z,(0,o.Z)((0,o.Z)({valueEnum:(0,s.h)(d),request:C,params:_,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,o.Z)({getPopupContainer:w.getPopupContainer},V),ref:D,proFieldProps:n},t),{},{children:T}))}),i=h,E=j,l=i;l.SearchSelect=E,l.displayName="ProFormComponent",g.Z=l},90672:function($,g,e){var o=e(1413),r=e(91),P=e(86074),s=e(62435),p=e(15790),m=["fieldProps","proFieldProps"],v=function(u,h){var j=u.fieldProps,i=u.proFieldProps,E=(0,r.Z)(u,m);return(0,P.jsx)(p.Z,(0,o.Z)({ref:h,valueType:"textarea",fieldProps:j,proFieldProps:i},E))};g.Z=s.forwardRef(v)},5966:function($,g,e){var o=e(1413),r=e(91),P=e(86074),s=e(15790),p=["fieldProps","proFieldProps"],m=["fieldProps","proFieldProps"],v="text",x=function(i){var E=i.fieldProps,l=i.proFieldProps,a=(0,r.Z)(i,p);return(0,P.jsx)(s.Z,(0,o.Z)({valueType:v,fieldProps:E,filedConfig:{valueType:v},proFieldProps:l},a))},u=function(i){var E=i.fieldProps,l=i.proFieldProps,a=(0,r.Z)(i,m);return(0,P.jsx)(s.Z,(0,o.Z)({valueType:"password",fieldProps:E,proFieldProps:l,filedConfig:{valueType:v}},a))},h=x;h.Password=u,h.displayName="ProFormComponent",g.Z=h},16507:function($,g,e){e.d(g,{Z:function(){return i}});var o=e(5574),r=e.n(o),P=e(90905);function s(){return(0,P.request)("component/list")}function p(E){return request("component/add",{method:"POST",data:E})}var m=e(99351),v=e(5966),x=e(64317),u=e(62435),h=e(86074),j=function(l){var a=(0,u.useState)(),D=r()(a,2),M=D[0],T=D[1];return(0,u.useEffect)(function(){s().then(function(_){T(_.map(function(n){return{label:n.name,value:n.id}}))})},[]),(0,h.jsxs)(m.Y,{open:l.visible,title:"Add component",onFinish:l.onFinish,onOpenChange:l.onVisibleChange,children:[(0,h.jsx)(v.Z,{name:"name",label:"Name"}),(0,h.jsx)(x.Z,{showSearch:!0,options:M,name:"componentId",label:"Component"})]})},i=j},14027:function($,g,e){var o=e(15009),r=e.n(o),P=e(99289),s=e.n(P),p=e(5574),m=e.n(p),v=e(66352),x=e(24969),u=e(86548),h=e(1912),j=e(77171),i=e(48689),E=e(22538),l=e(27790),a=e(71577),D=e(86738),M=e(90905),T=e(62435),_=e(16507),n=e(86074),U=function(){var C=(0,M.useParams)(),f=C.id,t=(0,T.useRef)(),V=(0,T.useState)(!1),w=m()(V,2),ce=w[0],te=w[1];(0,T.useEffect)(function(){var Z;(Z=t.current)===null||Z===void 0||Z.reload()},[f]);var me=function(){var Z=s()(r()().mark(function F(c){var S,L;return r()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,v.zt)(c,f);case 2:S=A.sent,S.succeeded&&(l.ZP.success("Deleted!"),(L=t.current)===null||L===void 0||L.reload());case 4:case"end":return A.stop()}},F)}));return function(c){return Z.apply(this,arguments)}}(),se=function(){var Z=s()(r()().mark(function F(c,S){var L,H;return r()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return c.sortOrder=S?c.sortOrder-1:c.sortOrder+1,I.next=3,(0,v.aN)(c.id,c.catalogId,c.sortOrder);case 3:L=I.sent,L.succeeded&&(l.ZP.success("Sorted!"),(H=t.current)===null||H===void 0||H.reload());case 5:case"end":return I.stop()}},F)}));return function(c,S){return Z.apply(this,arguments)}}(),pe=function(){var Z=s()(r()().mark(function F(c){var S,L;return r()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return c.catalogId=f,A.next=3,(0,v.yL)(c);case 3:S=A.sent,S.succeeded&&(l.ZP.success("Added!"),te(!1),(L=t.current)===null||L===void 0||L.reload());case 5:case"end":return A.stop()}},F)}));return function(c){return Z.apply(this,arguments)}}();return(0,n.jsxs)("div",{children:[(0,n.jsx)(E.Rs,{toolBarRender:function(){return[(0,n.jsx)(a.Z,{onClick:function(){return te(!0)},type:"primary",icon:(0,n.jsx)(x.Z,{}),children:(0,n.jsx)(M.FormattedMessage,{id:"general.new"})},0)]},rowSelection:{},actionRef:t,request:s()(r()().mark(function Z(){return r()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,v.KC)(f));case 1:case"end":return c.stop()}},Z)})),headerTitle:"Work items",metas:{title:{dataIndex:"name"},actions:{render:function(F,c){return[(0,n.jsx)(a.Z,{type:"primary",icon:(0,n.jsx)(u.Z,{}),onClick:function(){M.history.push("/works/".concat(c.normalizedName.toLocaleLowerCase(),"/").concat(c.id))}},1),(0,n.jsx)(a.Z,{icon:(0,n.jsx)(h.Z,{}),onClick:function(){return se(c,!0)}},2),(0,n.jsx)(a.Z,{icon:(0,n.jsx)(j.Z,{}),onClick:function(){return se(c,!1)}},3),(0,n.jsxs)(D.Z,{title:"Are you sure?",onConfirm:function(){return me(c.id)},children:[(0,n.jsx)(a.Z,{icon:(0,n.jsx)(i.Z,{}),danger:!0,type:"primary"}),","]},4)]}}}}),(0,n.jsx)(_.Z,{visible:ce,onVisibleChange:te,onFinish:pe})]})};g.Z=U},93658:function($,g,e){e.r(g),e.d(g,{default:function(){return H}});var o=e(15009),r=e.n(o),P=e(99289),s=e.n(P),p=e(5574),m=e.n(p),v=e(19632),x=e.n(v),u=e(12361),h=e(24969),j=e(99351),i=e(5966),E=e(63434),l=e(90905),a=e(69677),D=e(27790),M=e(71577),T=e(39890),_=e(62435),n=e(86074),U=a.Z.Search,d=function(){var I=(0,_.useRef)(),Q=(0,_.useState)([]),G=m()(Q,2),X=G[0],R=G[1],b=(0,_.useState)([]),B=m()(b,2),k=B[0],q=B[1],le=(0,_.useState)(!0),W=m()(le,2),ee=W[0],ue=W[1],Ee=(0,_.useState)(!1),ne=m()(Ee,2),ve=ne[0],_e=ne[1];(0,_.useEffect)(function(){(0,u.jr)().then(function(Y){R(Y)})},[]);var Oe=function(O){console.log(O);var K=O.node.key,ie=O.dragNode.key,fe=O.node.pos.split("-"),z=O.dropPosition-Number(fe[fe.length-1]),de=function y(N,re,Ce){for(var J=0;J<N.length;J++){if(N[J].key===re)return Ce(N[J],J,N);N[J].children&&y(N[J].children,re,Ce)}},ae=x()(X),oe;if(de(ae,ie,function(y,N,re){re.splice(N,1),oe=y}),!O.dropToGap)de(ae,K,function(y){y.children=y.children||[],y.children.unshift(oe)});else if((O.node.props.children||[]).length>0&&O.node.props.expanded&&z===1)de(ae,K,function(y){y.children=y.children||[],y.children.unshift(oe)});else{var Pe=[],he;de(ae,K,function(y,N,re){Pe=re,he=N}),z===-1?Pe.splice(he,0,oe):Pe.splice(he+1,0,oe)}var xe={dragNodeKey:O.dragNodesKeys[0],node:O.node.key,dropToGap:O.dropToGap};(0,u.m6)(xe).then(function(y){y.succeeded&&D.ZP.success("Saved!")}),R(ae)},ge=function(O){q(O),ue(!1)},De=function(O){var K;if(!O||O.length===0){D.ZP.warning("Can de-select");return}(K=I.current)===null||K===void 0||K.setFieldValue("parentId",O[0]),l.history.push("/catalog/".concat(O[0]))},Me=function(){var Y=s()(r()().mark(function O(K){var ie;return r()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,(0,u.BP)(K);case 2:ie=z.sent,ie.succeeded&&(D.ZP.success("Saved!"),_e(!1));case 4:case"end":return z.stop()}},O)}));return function(K){return Y.apply(this,arguments)}}(),je=function(){_e(!0)};return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(U,{}),(0,n.jsx)(M.Z,{type:"primary",icon:(0,n.jsx)(h.Z,{}),onClick:je})]}),(0,n.jsx)("div",{className:"bg-white",children:(0,n.jsx)(T.Z,{showLine:!0,showIcon:!0,treeData:X,expandedKeys:k,onExpand:ge,autoExpandParent:ee,draggable:!0,onSelect:De,onDrop:Oe})}),(0,n.jsxs)(j.Y,{onOpenChange:_e,open:ve,onFinish:Me,formRef:I,children:[(0,n.jsx)(i.Z,{name:"parentId",label:"Parrent Id",disabled:!0}),(0,n.jsx)(i.Z,{name:"name",label:"Name"}),(0,n.jsx)(i.Z,{name:"normalizedName",label:"Normalized Name"}),(0,n.jsx)(E.Z,{name:"active",label:"Active"})]})]})},C=d,f=e(55375),t=e(97269),V=e(90672),w=e(64317),ce=e(96074),te=function(){var I=(0,l.useParams)(),Q=I.id,G=(0,_.useRef)();(0,_.useEffect)(function(){(0,u.R4)(Q).then(function(R){var b;(b=G.current)===null||b===void 0||b.setFields([{name:"id",value:R.id},{name:"name",value:R.name},{name:"normalizedName",value:R.normalizedName},{name:"title",value:R.setting.title},{name:"container",value:R.setting.container},{name:"type",value:R.type}])})},[Q]);var X=function(){var R=s()(r()().mark(function b(B){var k,q;return r()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return k={title:B.title,container:B.container},B.setting=k,W.next=4,(0,u.BA)(B);case 4:q=W.sent,q.succeeded&&D.ZP.success("Saved!");case 6:case"end":return W.stop()}},b)}));return function(B){return R.apply(this,arguments)}}();return(0,n.jsxs)(t.A,{formRef:G,onFinish:X,children:[(0,n.jsx)(i.Z,{name:"id",hidden:!0}),(0,n.jsx)(i.Z,{name:"name",label:"Name"}),(0,n.jsx)(i.Z,{name:"normalizedName",label:"Normalized name"}),(0,n.jsx)(V.Z,{name:"description",label:"Description"}),(0,n.jsx)(w.Z,{name:"type",label:"Type",options:[{label:"Page",value:f.H.Default},{label:"Setting",value:f.H.Setting},{label:"Home",value:f.H.Entry}]}),(0,n.jsx)(ce.Z,{}),(0,n.jsx)(i.Z,{name:"title",label:"Title"}),(0,n.jsx)(E.Z,{name:"container",label:"Container"})]})},me=te,se=e(14027),pe=e(62884),Z=e(30029),F=e(71230),c=e(15746),S=e(32983),L=function(){var I=(0,l.useIntl)(),Q=(0,_.useState)(!1),G=m()(Q,2),X=G[0],R=G[1],b=(0,_.useState)("tab1"),B=m()(b,2),k=B[0],q=B[1],le=function(){var W=s()(r()().mark(function ee(ue){return r()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:(0,u.BP)(ue).then(function(ve){ve.succeeded&&(D.ZP.success("Saved!"),R(!1))});case 1:case"end":return ne.stop()}},ee)}));return function(ue){return W.apply(this,arguments)}}();return(0,n.jsx)(pe._z,{children:(0,n.jsxs)(F.Z,{gutter:16,children:[(0,n.jsx)(c.Z,{span:6,children:(0,n.jsx)(C,{})}),(0,n.jsxs)(c.Z,{span:12,children:[(0,n.jsx)(Z.Z,{tabs:{tabPosition:"top",activeKey:k,items:[{label:"Content",key:"tab1",children:(0,n.jsx)(se.Z,{child:!1})},{label:I.formatMessage({id:"menu.settings"}),key:"tab2",children:(0,n.jsx)(me,{})}],onChange:function(ee){q(ee)}}}),(0,n.jsxs)(j.Y,{onFinish:le,open:X,onOpenChange:R,children:[(0,n.jsx)(i.Z,{name:"name",label:"Name"}),(0,n.jsx)(i.Z,{name:"normalizedName",label:"Normalized Name"})]})]}),(0,n.jsx)(c.Z,{span:6,children:(0,n.jsx)(Z.Z,{children:(0,n.jsx)(S.Z,{})})})]})})},H=L},12361:function($,g,e){e.d(g,{A$:function(){return i},BA:function(){return T},BP:function(){return h},R4:function(){return x},j7:function(){return m},jr:function(){return l},m6:function(){return n}});var o=e(15009),r=e.n(o),P=e(99289),s=e.n(P),p=e(90905);function m(d){return v.apply(this,arguments)}function v(){return v=s()(r()().mark(function d(C){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,p.request)("catalog/entry/".concat(C)));case 1:case"end":return t.stop()}},d)})),v.apply(this,arguments)}function x(d){return u.apply(this,arguments)}function u(){return u=s()(r()().mark(function d(C){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,p.request)("catalog/".concat(C)));case 1:case"end":return t.stop()}},d)})),u.apply(this,arguments)}function h(d){return j.apply(this,arguments)}function j(){return j=s()(r()().mark(function d(C){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,p.request)("catalog/add",{method:"POST",data:C}));case 1:case"end":return t.stop()}},d)})),j.apply(this,arguments)}function i(d){return E.apply(this,arguments)}function E(){return E=s()(r()().mark(function d(C){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,p.request)("catalog/list",{method:"GET",params:C}));case 1:case"end":return t.stop()}},d)})),E.apply(this,arguments)}function l(){return a.apply(this,arguments)}function a(){return a=s()(r()().mark(function d(){return r()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,p.request)("catalog/tree"));case 1:case"end":return f.stop()}},d)})),a.apply(this,arguments)}function D(d){return M.apply(this,arguments)}function M(){return M=_asyncToGenerator(_regeneratorRuntime().mark(function d(C){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("catalog/delete/".concat(C),{method:"POST"}));case 1:case"end":return t.stop()}},d)})),M.apply(this,arguments)}function T(d){return _.apply(this,arguments)}function _(){return _=s()(r()().mark(function d(C){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,p.request)("catalog/save",{method:"POST",data:C}));case 1:case"end":return t.stop()}},d)})),_.apply(this,arguments)}function n(d){return U.apply(this,arguments)}function U(){return U=s()(r()().mark(function d(C){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,p.request)("catalog/tree-drop",{method:"POST",data:C}));case 1:case"end":return t.stop()}},d)})),U.apply(this,arguments)}}}]);
