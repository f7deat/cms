"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5690],{76131:function(pe,Z,e){var U=e(37476),n=e(5966),W=e(65675),u=e(86074),f=function(M){return(0,u.jsxs)(U.Y,{open:M.open,title:"Component",onFinish:M.onFinish,onOpenChange:M.onOpenChange,children:[(0,u.jsx)(n.Z,{name:"name",label:"Name"}),(0,u.jsx)(W.Z,{name:"componentId",label:"Component"})]})};Z.Z=f},1913:function(pe,Z,e){var U=e(15009),n=e.n(U),W=e(99289),u=e.n(W),f=e(5574),v=e.n(f),M=e(20385),T=e(64082),L=e(16596),te=e(65419),_=e(58301),ae=e(98366),A=e(71577),ee=e(96074),w=e(96365),V=e(62435),p=e(86074),X=te.Z.Dragger,B=function(o){var a=(0,V.useState)(""),s=v()(a,2),g=s[0],_e=s[1];function k(ne){var D;try{D=new URL(ne)}catch(se){return!1}return D.protocol==="https:"}var j=function(){var ne=u()(n()().mark(function D(se){var G;return n()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(k(se)){J.next=3;break}return _.ZP.error("Sorry, URL failed to upload."),J.abrupt("return");case 3:return J.next=5,(0,M.tg)(se);case 5:G=J.sent,G.succeeded&&_.ZP.success("Uploaded!");case 7:case"end":return J.stop()}},D)}));return function(se){return ne.apply(this,arguments)}}(),ge=function(){var ne=u()(n()().mark(function D(){return n()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(k(g)){G.next=3;break}return _.ZP.error("Sorry, URL failed to upload."),G.abrupt("return");case 3:o.onFinish(g),o.onCancel();case 5:case"end":return G.stop()}},D)}));return function(){return ne.apply(this,arguments)}}();return(0,p.jsxs)(ae.Z,{open:o.open,onCancel:o.onCancel,centered:!0,title:"Upload",onOk:ge,children:[(0,p.jsx)("div",{className:"mb-4",children:(0,p.jsxs)(X,{children:[(0,p.jsx)("p",{className:"ant-upload-drag-icon",children:(0,p.jsx)(T.Z,{})}),(0,p.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),(0,p.jsx)("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibited from uploading company data or other banned files."})]})}),(0,p.jsx)("div",{className:"text-center",children:(0,p.jsx)(A.ZP,{icon:(0,p.jsx)(L.Z,{}),type:"link",size:"large",children:(0,p.jsx)("b",{children:"Choose from your computer"})})}),(0,p.jsx)(ee.Z,{children:"or"}),(0,p.jsx)(w.Z,{placeholder:"Paste image or URL",onChange:function(D){return _e(D.currentTarget.value)}})]})};Z.Z=B},65675:function(pe,Z,e){var U=e(98364),n=e(64317),W=e(86074),u=function(v){return(0,W.jsx)(n.Z,{showSearch:!0,request:U.Ef,name:v.name,label:v.label})};Z.Z=u},26652:function(pe,Z,e){e.r(Z),e.d(Z,{default:function(){return we}});var U=e(15009),n=e.n(U),W=e(99289),u=e.n(W),f=e(5574),v=e.n(f),M=e(97857),T=e.n(M),L=e(13769),te=e.n(L),_=e(66352),ae=e(53682),A=e(47389),ee=e(82061),w=e(37446),V=e(51042),p=e(37476),X=e(5966),B=e(64317),t=e(58301),o=e(93421),a=e(71577),s=e(86738),g=e(85418),_e=e(95840),k=e(35312),j=e(62435),ge=e(76131),ne=e(60887),D=e(45587),se=e(32339),G=e(24285),r=e(86074),J=["children"],De=function(z){var E=z.children,K=te()(z,J),h=(0,D.nB)({id:K["data-row-key"]}),F=h.attributes,$=h.listeners,ue=h.setNodeRef,Y=h.setActivatorNodeRef,I=h.transform,Q=h.transition,oe=h.isDragging,H=T()(T()({},K.style),{},{transform:G.ux.Transform.toString(I&&T()(T()({},I),{},{scaleY:1})),transition:Q},oe?{position:"relative"}:{});return(0,r.jsx)("tr",T()(T()(T()({},K),{},{ref:ue,style:H},F),{},{children:j.Children.map(E,function(re){return re.key==="sort"?j.cloneElement(re,{children:(0,r.jsx)(ae.Z,T()({ref:Y,style:{touchAction:"none",cursor:"move"}},$))}):re})}))},ye=function(){var z=(0,k.useParams)(),E=z.id,K=(0,j.useState)([]),h=v()(K,2),F=h[0],$=h[1],ue=(0,j.useState)(!1),Y=v()(ue,2),I=Y[0],Q=Y[1],oe=(0,j.useState)(!1),H=v()(oe,2),re=H[0],ie=H[1],ve=(0,j.useState)(),le=v()(ve,2),ce=le[0],R=le[1],x=function(){(0,_.KC)(E).then(function(c){$(c.data)})};(0,j.useEffect)(function(){E&&x()},[E]);var me=function(){var i=u()(n()().mark(function c(d){var l;return n()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,_.zt)(d,E);case 2:l=m.sent,l.succeeded?(t.ZP.success("Deleted!"),x()):t.ZP.error(l.errors[0].description);case 4:case"end":return m.stop()}},c)}));return function(d){return i.apply(this,arguments)}}(),q=function(){var i=u()(n()().mark(function c(d){var l;return n()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return d.catalogId=E,m.next=3,(0,_.yL)(d);case 3:l=m.sent,l.succeeded&&(t.ZP.success("Added!"),Q(!1),x());case 5:case"end":return m.stop()}},c)}));return function(d){return i.apply(this,arguments)}}(),de=function(){var i=u()(n()().mark(function c(){var d;return n()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,_.x)();case 2:d=C.sent,R(d),ie(!0);case 5:case"end":return C.stop()}},c)}));return function(){return i.apply(this,arguments)}}(),y=function(){var i=u()(n()().mark(function c(d){var l;return n()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,_.jX)(d);case 2:l=m.sent,l.succeeded&&(t.ZP.success("Saved"),ie(!1),x());case 4:case"end":return m.stop()}},c)}));return function(d){return i.apply(this,arguments)}}(),b=[{key:"1",label:"Show / Hide"}],P=function(){var i=u()(n()().mark(function c(d,l){var C;return n()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(d.key!=="1"){S.next=5;break}return S.next=3,(0,_.Wv)(l);case 3:C=S.sent,C.succeeded&&(t.ZP.success("Actived!"),x());case 5:case"end":return S.stop()}},c)}));return function(d,l){return i.apply(this,arguments)}}(),N=function(c,d,l){var C=c.findIndex(function(S){return S.id===d.id}),m=c.findIndex(function(S){return S.id===(l==null?void 0:l.id)});return(0,D.Rp)(c,C,m).map(function(S){return S.id})},O=function(c){var d=c.active,l=c.over;if(d.id!==(l==null?void 0:l.id)){$(function(m){var S=m.findIndex(function(Ee){return Ee.id===d.id}),Be=m.findIndex(function(Ee){return Ee.id===(l==null?void 0:l.id)});return(0,D.Rp)(m,S,Be)});var C=N(F,d,l);(0,_.P0)(C).then(function(m){m.succeeded&&t.ZP.success("Saved!")})}},Pe=[{key:"sort"},{title:"Name",dataIndex:"name"},{title:"Action",render:function(c,d){return(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(a.ZP,{type:"primary",icon:(0,r.jsx)(A.Z,{}),onClick:function(){k.history.push("/works/".concat(d.normalizedName.toLocaleLowerCase(),"/").concat(d.id))}},1),(0,r.jsx)(s.Z,{title:"Are you sure?",onConfirm:function(){return me(d.id)},children:(0,r.jsx)(a.ZP,{icon:(0,r.jsx)(ee.Z,{}),danger:!0,type:"primary"})},4),(0,r.jsx)(g.Z,{menu:{items:b,onClick:function(C){return P(C,d.id)}},children:(0,r.jsx)(a.ZP,{icon:(0,r.jsx)(w.Z,{}),type:"dashed"})},"more")]})}}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-2 flex justify-end gap-2",children:[(0,r.jsx)(a.ZP,{onClick:function(){return Q(!0)},type:"primary",icon:(0,r.jsx)(V.Z,{}),children:(0,r.jsx)(k.FormattedMessage,{id:"general.new"})},0),(0,r.jsx)(a.ZP,{onClick:de,icon:(0,r.jsx)(V.Z,{}),children:"Ch\u1ECDn"},1)]}),(0,r.jsx)(ne.LB,{modifiers:[se.DL],onDragEnd:O,children:(0,r.jsx)(D.Fo,{items:F.map(function(i){return i.id}),strategy:D.qw,children:(0,r.jsx)(_e.Z,{components:{body:{row:De}},columns:Pe,rowKey:"id",dataSource:F})})}),(0,r.jsx)(ge.Z,{open:I,onOpenChange:Q,onFinish:q}),(0,r.jsxs)(p.Y,{open:re,onOpenChange:ie,onFinish:y,children:[(0,r.jsx)(X.Z,{name:"catalogId",initialValue:E,hidden:!0}),(0,r.jsx)(B.Z,{showSearch:!0,name:"workContentId",options:ce,label:"Work"})]})]})},Oe=ye,Me=e(78710),fe=e(12361),xe=e(63386),je=e(28199),Se=e(71230),Ce=e(15746),Te=e(35003),Ze=e(74653),Ie=e(1913),Re=e(32545),be=function(z){return new Promise(function(E,K){var h=new FileReader;h.readAsDataURL(z),h.onload=function(){return E(h.result)},h.onerror=function(F){return K(F)}})},Ue=function(){var z=(0,k.useParams)(),E=z.id,K=(0,j.useState)(!1),h=v()(K,2),F=h[0],$=h[1],ue=(0,j.useState)(""),Y=v()(ue,2),I=Y[0],Q=Y[1],oe=(0,j.useState)(""),H=v()(oe,2),re=H[0],ie=H[1],ve=(0,j.useState)([]),le=v()(ve,2),ce=le[0],R=le[1];(0,j.useEffect)(function(){(0,fe.NU)(E).then(function(y){R(y.images)})},[]);var x=function(){return $(!1)},me=function(){var y=u()(n()().mark(function b(P){return n()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(!(!P.url&&!P.preview)){O.next=4;break}return O.next=3,be(P.originFileObj);case 3:P.preview=O.sent;case 4:Q(P.url||P.preview),$(!0),ie(P.name||P.url.substring(P.url.lastIndexOf("/")+1));case 7:case"end":return O.stop()}},b)}));return function(P){return y.apply(this,arguments)}}(),q=function(){var y=u()(n()().mark(function b(P){var N,O;return n()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return N=ce,N.push(P),i.next=4,(0,fe.kn)(N,E);case 4:O=i.sent,O.succeeded?(R(N),t.ZP.success("Saved!")):t.ZP.error(O.errors[0].description);case 6:case"end":return i.stop()}},b)}));return function(P){return y.apply(this,arguments)}}(),de=function(){var y=u()(n()().mark(function b(P){var N,O;return n()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return N=ce.filter(function(c){return c!==P}),i.next=3,(0,fe.kn)(N,E);case 3:O=i.sent,O.succeeded?(R(N),t.ZP.success("Saved!")):t.ZP.error(O.errors[0].description);case 5:case"end":return i.stop()}},b)}));return function(P){return y.apply(this,arguments)}}();return(0,r.jsxs)(je.Z,{children:[(0,r.jsxs)("div",{className:"flex gap-4",children:[ce.map(function(y,b){return(0,r.jsxs)("div",{className:"btn-upload p-2",children:[(0,r.jsx)(Re.Z,{src:y,alt:"IMG"}),(0,r.jsx)(a.ZP,{icon:(0,r.jsx)(ee.Z,{}),size:"small",danger:!0,onClick:function(){return de(y)},style:{position:"absolute",right:6}})]},b)}),(0,r.jsxs)("button",{type:"button",className:"btn-upload",onClick:function(){return $(!0)},children:[(0,r.jsx)(V.Z,{}),(0,r.jsx)("div",{style:{marginTop:8},children:"Upload"})]})]}),(0,r.jsx)(Ie.Z,{open:F,onCancel:x,onFinish:q})]})},We=Ue,Le=e(55375),Ae=function(){var z=(0,k.useParams)(),E=z.id,K=(0,j.useState)(!1),h=v()(K,2),F=h[0],$=h[1],ue=(0,j.useState)(),Y=v()(ue,2),I=Y[0],Q=Y[1],oe=(0,j.useState)("content"),H=v()(oe,2),re=H[0],ie=H[1];(0,j.useEffect)(function(){(0,fe.R4)(E).then(function(R){return Q(R)})},[E]);var ve=function(){var R=u()(n()().mark(function x(me){return n()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:(0,fe.BP)(me).then(function(y){y.succeeded&&(t.ZP.success("Saved!"),$(!1))});case 1:case"end":return de.stop()}},x)}));return function(me){return R.apply(this,arguments)}}(),le=function(){var R=u()(n()().mark(function x(){return n()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,(0,Me.W)(E);case 2:case"end":return q.stop()}},x)}));return function(){return R.apply(this,arguments)}}(),ce=function(x){ie(x)};return(0,r.jsx)(xe._z,{title:I==null?void 0:I.name,children:(0,r.jsxs)(Se.Z,{gutter:16,children:[(0,r.jsxs)(Ce.Z,{span:18,children:[(0,r.jsx)(je.Z,{tabs:{tabPosition:"top",activeKey:re,items:[{label:"Content",key:"content",children:(0,r.jsx)(Oe,{})},{label:(0,r.jsx)(k.FormattedMessage,{id:"menu.settings"}),key:"setting",children:(0,r.jsx)(Te.Z,{})},{label:(0,r.jsx)(k.FormattedMessage,{id:"pages.catalog.productImage"}),key:"product-image",children:(0,r.jsx)(We,{}),disabled:(I==null?void 0:I.type)!==Le.H.Product}],onChange:ce},extra:(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(a.ZP,{type:"primary",onClick:le,children:"Export"}),(0,r.jsx)(a.ZP,{type:"primary",danger:!0,children:"Import"})]})}),(0,r.jsxs)(p.Y,{onFinish:ve,open:F,onOpenChange:$,children:[(0,r.jsx)(X.Z,{name:"name",label:"Name"}),(0,r.jsx)(X.Z,{name:"normalizedName",label:"Normalized Name"})]})]}),(0,r.jsx)(Ce.Z,{span:6,children:(0,r.jsx)(Ze.Z,{})})]})})},we=Ae},78710:function(pe,Z,e){e.d(Z,{Jx:function(){return ae},W:function(){return X},_O:function(){return T},_s:function(){return te},dk:function(){return V},gn:function(){return ee},rZ:function(){return v}});var U=e(15009),n=e.n(U),W=e(99289),u=e.n(W),f=e(35312);function v(){return M.apply(this,arguments)}function M(){return M=u()(n()().mark(function t(){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,f.request)("backup/statistic"));case 1:case"end":return a.stop()}},t)})),M.apply(this,arguments)}function T(){return L.apply(this,arguments)}function L(){return L=u()(n()().mark(function t(){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,f.request)("backup/export",{method:"POST"}));case 1:case"end":return a.stop()}},t)})),L.apply(this,arguments)}function te(){return _.apply(this,arguments)}function _(){return _=u()(n()().mark(function t(){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,f.request)("backup/upgrade",{method:"POST"}));case 1:case"end":return a.stop()}},t)})),_.apply(this,arguments)}function ae(){return A.apply(this,arguments)}function A(){return A=u()(n()().mark(function t(){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,f.request)("backup/upgrade/list"));case 1:case"end":return a.stop()}},t)})),A.apply(this,arguments)}function ee(t){return w.apply(this,arguments)}function w(){return w=u()(n()().mark(function t(o){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,f.request)(o,{method:"POST"}));case 1:case"end":return s.stop()}},t)})),w.apply(this,arguments)}function V(t){return p.apply(this,arguments)}function p(){return p=u()(n()().mark(function t(o){var a;return n()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return a=new FormData,a.append("file",o),g.abrupt("return",(0,f.request)("backup/import",{method:"POST",data:a}));case 3:case"end":return g.stop()}},t)})),p.apply(this,arguments)}function X(t){return B.apply(this,arguments)}function B(){return B=u()(n()().mark(function t(o){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,f.request)("backup/export/catalog/".concat(o),{method:"POST"}));case 1:case"end":return s.stop()}},t)})),B.apply(this,arguments)}},98364:function(pe,Z,e){e.d(Z,{CO:function(){return ae},Ef:function(){return X},KL:function(){return te},Xr:function(){return v},Z:function(){return ee},v7:function(){return V}});var U=e(15009),n=e.n(U),W=e(99289),u=e.n(W),f=e(35312);function v(t){return M.apply(this,arguments)}function M(){return M=u()(n()().mark(function t(o){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,f.request)("component/".concat(o)));case 1:case"end":return s.stop()}},t)})),M.apply(this,arguments)}function T(t){return L.apply(this,arguments)}function L(){return L=_asyncToGenerator(_regeneratorRuntime().mark(function t(o){return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",request("component/add",{method:"POST",data:o}));case 1:case"end":return s.stop()}},t)})),L.apply(this,arguments)}function te(t){return _.apply(this,arguments)}function _(){return _=u()(n()().mark(function t(o){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,f.request)("component/update",{method:"POST",data:o}));case 1:case"end":return s.stop()}},t)})),_.apply(this,arguments)}function ae(t){return A.apply(this,arguments)}function A(){return A=u()(n()().mark(function t(o){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,f.request)("component/list",{params:o}));case 1:case"end":return s.stop()}},t)})),A.apply(this,arguments)}function ee(t,o){return w.apply(this,arguments)}function w(){return w=u()(n()().mark(function t(o,a){return n()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,f.request)("component/list-work/".concat(a),{params:o}));case 1:case"end":return g.stop()}},t)})),w.apply(this,arguments)}function V(t){return p.apply(this,arguments)}function p(){return p=u()(n()().mark(function t(o){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,f.request)("component/delete/".concat(o),{method:"POST"}));case 1:case"end":return s.stop()}},t)})),p.apply(this,arguments)}function X(t){return B.apply(this,arguments)}function B(){return B=u()(n()().mark(function t(o){var a;return n()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return a={searchTerm:o.keyWords},g.abrupt("return",(0,f.request)("component/form-select",{params:a}));case 2:case"end":return g.stop()}},t)})),B.apply(this,arguments)}}}]);
