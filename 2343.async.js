"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2343],{88484:function(V,U,e){e.d(U,{Z:function(){return f}});var g=e(1413),n=e(62435),y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},i=y,d=e(84089),p=function(O,R){return n.createElement(d.Z,(0,g.Z)((0,g.Z)({},O),{},{ref:R,icon:i}))};p.displayName="UploadOutlined";var f=n.forwardRef(p)},64317:function(V,U,e){var g=e(1413),n=e(91),y=e(86074),i=e(22270),d=e(62435),p=e(66758),f=e(25338),L=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],O=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],R=d.forwardRef(function(s,Z){var M=s.fieldProps,B=s.children,b=s.params,A=s.proFieldProps,m=s.mode,l=s.valueEnum,h=s.request,c=s.showSearch,u=s.options,P=(0,n.Z)(s,L),S=(0,d.useContext)(p.Z);return(0,y.jsx)(f.Z,(0,g.Z)((0,g.Z)({valueEnum:(0,i.h)(l),request:h,params:b,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,g.Z)({options:u,mode:m,showSearch:c,getPopupContainer:S.getPopupContainer},M),ref:Z,proFieldProps:A},P),{},{children:B}))}),D=d.forwardRef(function(s,Z){var M=s.fieldProps,B=s.children,b=s.params,A=s.proFieldProps,m=s.mode,l=s.valueEnum,h=s.request,c=s.options,u=(0,n.Z)(s,O),P=(0,g.Z)({options:c,mode:m||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},M),S=(0,d.useContext)(p.Z);return(0,y.jsx)(f.Z,(0,g.Z)((0,g.Z)({valueEnum:(0,i.h)(l),request:h,params:b,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,g.Z)({getPopupContainer:S.getPopupContainer},P),ref:Z,proFieldProps:A},u),{},{children:B}))}),C=R,T=D,I=C;I.SearchSelect=T,I.displayName="ProFormComponent",U.Z=I},5966:function(V,U,e){var g=e(1413),n=e(91),y=e(86074),i=e(25338),d=["fieldProps","proFieldProps"],p=["fieldProps","proFieldProps"],f="text",L=function(C){var T=C.fieldProps,I=C.proFieldProps,s=(0,n.Z)(C,d);return(0,y.jsx)(i.Z,(0,g.Z)({valueType:f,fieldProps:T,filedConfig:{valueType:f},proFieldProps:I},s))},O=function(C){var T=C.fieldProps,I=C.proFieldProps,s=(0,n.Z)(C,p);return(0,y.jsx)(i.Z,(0,g.Z)({valueType:"password",fieldProps:T,proFieldProps:I,filedConfig:{valueType:f}},s))},R=L;R.Password=O,R.displayName="ProFormComponent",U.Z=R},2343:function(V,U,e){e.d(U,{Z:function(){return t}});var g=e(15009),n=e.n(g),y=e(97857),i=e.n(y),d=e(99289),p=e.n(d),f=e(5574),L=e.n(f),O=e(55375),R=e(99270),D=e(61614),C=e(5251),T=e(86548),I=e(48689),s=e(30029),Z=e(27790),M=e(26713),B=e(71577),b=e(32983),A=e(78613),m=e(96074),l=e(27511),h=e(22850),c=e(62435),u=e(66352),P=e(24969),S=e(99351),Y=e(64317),N=e(5966),x=e(90905),E=e(51904),a=e(86074),$=function(){var o=(0,x.useParams)(),r=o.id,v=(0,c.useState)(),re=L()(v,2),G=re[0],Q=re[1],te=(0,c.useState)(!1),X=L()(te,2),ae=X[0],J=X[1],k=function(){(0,D.m_)(r).then(function(K){Q(K)})};(0,c.useEffect)(function(){k()},[]);var ne=function(){var W=p()(n()().mark(function K(j){var w;return n()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(j.type=O.H.Tag,w=void 0,!j.id){F.next=9;break}return F.next=5,(0,u.jX)({workId:r,catalogId:j.id});case 5:w=F.sent,k(),F.next=13;break;case 9:return j.active=!0,F.next=12,(0,D.BP)(j);case 12:w=F.sent;case 13:w.succeeded?(Z.ZP.success("Saved!"),J(!1)):Z.ZP.error(w.errors[0].description);case 14:case"end":return F.stop()}},K)}));return function(j){return W.apply(this,arguments)}}(),q=function(){var W=p()(n()().mark(function K(j){var w,se;return n()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,(0,u.wz)({catalogId:r,workId:j});case 2:w=ee.sent,w.succeeded?(se=G==null?void 0:G.filter(function(ue){return ue.id!==j}),Q(se),Z.ZP.success("Deleted")):Z.ZP.error(w.errors[0].description);case 4:case"end":return ee.stop()}},K)}));return function(j){return W.apply(this,arguments)}}();return(0,a.jsxs)("div",{children:[G==null?void 0:G.map(function(W){return(0,a.jsx)(E.Z,{closable:!0,onClose:function(){return q(W.id)},children:W.name},W.id)}),(0,a.jsx)(B.Z,{icon:(0,a.jsx)(P.Z,{}),size:"small",type:"dashed",onClick:function(){return J(!0)},children:"New tag"}),(0,a.jsxs)(S.Y,{open:ae,onOpenChange:J,onFinish:ne,children:[(0,a.jsx)(Y.Z,{showSearch:!0,request:D.wu,name:"id",label:"Select"}),(0,a.jsx)(m.Z,{children:"Or"}),(0,a.jsx)(N.Z,{label:"New",name:"name"})]})]})},z=$,H=function(o){var r,v=o.catalog,re=o.setCatalog,G=(0,c.useState)(!1),Q=L()(G,2),te=Q[0],X=Q[1],ae=function(){var J=p()(n()().mark(function k(ne){var q,W;return n()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(!v){j.next=7;break}return q=i()(i()({},v),{},{thumbnail:ne.url}),j.next=4,(0,D.r5)(q);case 4:W=j.sent,W.succeeded&&(Z.ZP.success("Saved!"),re(q)),X(!1);case 7:case"end":return j.stop()}},k)}));return function(ne){return J.apply(this,arguments)}}();return(0,a.jsxs)(s.Z,{title:"Summary",children:[(0,a.jsxs)(M.Z,{children:[(0,a.jsx)(B.Z,{icon:(0,a.jsx)(T.Z,{}),onClick:function(){return X(!0)}}),(0,a.jsx)(B.Z,{icon:(0,a.jsx)(I.Z,{}),danger:!0,type:"primary"})]}),(0,a.jsx)("div",{className:"flex items-center justify-center mt-4",children:v!=null&&v.thumbnail?(0,a.jsx)(A.Z,{src:(0,C.Er)(v==null?void 0:v.thumbnail),height:200,className:"object-fit-cover"}):(0,a.jsx)(b.Z,{})}),(0,a.jsx)(m.Z,{}),(0,a.jsxs)(l.Z,{title:"Information",column:1,children:[(0,a.jsx)(l.Z.Item,{label:"L\u01B0\u1EE3t xem",children:v==null?void 0:v.viewCount}),(0,a.jsx)(l.Z.Item,{label:"Created date",children:(0,C.p6)(v==null?void 0:v.createdDate)}),(0,a.jsx)(l.Z.Item,{label:"Modified date",children:(0,C.p6)(v==null?void 0:v.modifiedDate)})]}),((r=o.catalog)===null||r===void 0?void 0:r.type)===O.H.Tag?(0,a.jsx)("div",{}):(0,a.jsxs)("div",{children:[(0,a.jsx)(m.Z,{}),(0,a.jsx)(h.Z.Title,{level:5,children:"Tags"}),(0,a.jsx)(z,{})]}),(0,a.jsx)(R.Z,{open:te,onOpenChange:X,onSelect:ae})]})},t=H},99270:function(V,U,e){var g=e(97857),n=e.n(g),y=e(15009),i=e.n(y),d=e(99289),p=e.n(d),f=e(20385),L=e(5251),O=e(88484),R=e(97269),D=e(5966),C=e(99351),T=e(22538),I=e(90905),s=e(27790),Z=e(31365),M=e(71577),B=e(55241),b=e(78613),A=e(62435),m=e(86074),l=function(c){var u=(0,I.useIntl)(),P=(0,A.useRef)(),S={name:"file",action:f.kE,accept:"image/png, image/jpeg",onChange:function(E){if(E.file.status!=="uploading"&&console.log(E.file,E.fileList),E.file.status==="done"){var a;s.ZP.success("".concat(E.file.name," file uploaded successfully")),(a=P.current)===null||a===void 0||a.reload()}else E.file.status==="error"&&s.ZP.error("".concat(E.file.name," file upload failed."))}},Y=function(){var x=p()(i()().mark(function E(a){var $,z;return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,f.tg)(a.url);case 2:$=t.sent,$.succeeded&&(s.ZP.success("Uploaded!"),(z=P.current)===null||z===void 0||z.reload());case 4:case"end":return t.stop()}},E)}));return function(a){return x.apply(this,arguments)}}(),N=(0,m.jsx)(R.A,{onFinish:Y,children:(0,m.jsx)(D.Z,{name:"url",rules:[{required:!0}],placeholder:"URL"})});return(0,m.jsx)(C.Y,{open:c.open,onOpenChange:c.onOpenChange,children:(0,m.jsx)(T.Rs,{ghost:!0,toolBarRender:function(){return[(0,A.createElement)(Z.Z,n()(n()({},S),{},{key:0}),(0,m.jsx)(M.Z,{icon:(0,m.jsx)(O.Z,{}),type:"primary",children:"Upload"})),(0,m.jsx)(B.Z,{trigger:"click",content:N,title:"Upload Via URL",children:(0,m.jsx)(M.Z,{icon:(0,m.jsx)(O.Z,{}),onClick:Y,children:"Via URL"})},2)]},headerTitle:u.formatMessage({id:"menu.fileManager"}),request:function(E){return(0,f.V6)(n()({},E),[".png",".jpg",".jpeg","image/jpeg"])},search:{layout:"vertical"},pagination:{pageSize:6},grid:{column:3},onItem:function(E){return{onClick:function(){c.onSelect(E)}}},metas:{content:{dataIndex:"name",title:"Name",render:function(E,a){return(0,m.jsx)(b.Z,{src:(0,L.Er)(a.url),height:100,preview:!1})}}},actionRef:P})})};U.Z=l},61614:function(V,U,e){e.d(U,{A$:function(){return R},BA:function(){return Z},BP:function(){return L},M0:function(){return z},R4:function(){return p},S8:function(){return I},Z9:function(){return Y},_V:function(){return A},gY:function(){return l},m_:function(){return x},r5:function(){return P},wu:function(){return a},zo:function(){return c}});var g=e(15009),n=e.n(g),y=e(99289),i=e.n(y),d=e(90905);function p(t){return f.apply(this,arguments)}function f(){return f=i()(n()().mark(function t(_){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.request)("catalog/".concat(_)));case 1:case"end":return r.stop()}},t)})),f.apply(this,arguments)}function L(t){return O.apply(this,arguments)}function O(){return O=i()(n()().mark(function t(_){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.request)("catalog/add",{method:"POST",data:_}));case 1:case"end":return r.stop()}},t)})),O.apply(this,arguments)}function R(t){return D.apply(this,arguments)}function D(){return D=i()(n()().mark(function t(_){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.request)("catalog/list",{method:"GET",params:_}));case 1:case"end":return r.stop()}},t)})),D.apply(this,arguments)}function C(){return T.apply(this,arguments)}function T(){return T=_asyncToGenerator(_regeneratorRuntime().mark(function t(){return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",request("catalog/tree"));case 1:case"end":return o.stop()}},t)})),T.apply(this,arguments)}function I(t){return s.apply(this,arguments)}function s(){return s=i()(n()().mark(function t(_){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.request)("catalog/delete/".concat(_),{method:"POST"}));case 1:case"end":return r.stop()}},t)})),s.apply(this,arguments)}function Z(t){return M.apply(this,arguments)}function M(){return M=i()(n()().mark(function t(_){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.request)("catalog/save",{method:"POST",data:_}));case 1:case"end":return r.stop()}},t)})),M.apply(this,arguments)}function B(t){return b.apply(this,arguments)}function b(){return b=_asyncToGenerator(_regeneratorRuntime().mark(function t(_){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("catalog/tree-drop",{method:"POST",data:_}));case 1:case"end":return r.stop()}},t)})),b.apply(this,arguments)}function A(){return m.apply(this,arguments)}function m(){return m=i()(n()().mark(function t(){return n()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,d.request)("catalog/view-count"));case 1:case"end":return o.stop()}},t)})),m.apply(this,arguments)}function l(t){return h.apply(this,arguments)}function h(){return h=i()(n()().mark(function t(_){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.request)("catalog/active/".concat(_),{method:"POST"}));case 1:case"end":return r.stop()}},t)})),h.apply(this,arguments)}function c(t){return u.apply(this,arguments)}function u(){return u=i()(n()().mark(function t(_){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.request)("catalog/article/save",{method:"POST",data:_}));case 1:case"end":return r.stop()}},t)})),u.apply(this,arguments)}function P(t){return S.apply(this,arguments)}function S(){return S=i()(n()().mark(function t(_){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.request)("catalog/update-thumbnail",{method:"POST",data:_}));case 1:case"end":return r.stop()}},t)})),S.apply(this,arguments)}function Y(){return N.apply(this,arguments)}function N(){return N=i()(n()().mark(function t(){return n()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,d.request)("catalog/types"));case 1:case"end":return o.stop()}},t)})),N.apply(this,arguments)}function x(t){return E.apply(this,arguments)}function E(){return E=i()(n()().mark(function t(_){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.request)("catalog/list-tag/".concat(_)));case 1:case"end":return r.stop()}},t)})),E.apply(this,arguments)}function a(t){return $.apply(this,arguments)}function $(){return $=i()(n()().mark(function t(_){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.request)("catalog/list-tag-select",{params:_}));case 1:case"end":return r.stop()}},t)})),$.apply(this,arguments)}function z(t,_){return H.apply(this,arguments)}function H(){return H=i()(n()().mark(function t(_,o){return n()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,d.request)("catalog/list-by-tag/".concat(_),{params:o}));case 1:case"end":return v.stop()}},t)})),H.apply(this,arguments)}},20385:function(V,U,e){e.d(U,{Ah:function(){return R},Cq:function(){return I},V6:function(){return L},kE:function(){return B},tg:function(){return A},z3:function(){return Z}});var g=e(15009),n=e.n(g),y=e(97857),i=e.n(y),d=e(99289),p=e.n(d),f=e(90905);function L(l,h,c){return O.apply(this,arguments)}function O(){return O=p()(n()().mark(function l(h,c,u){return n()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",(0,f.request)("fileExplorer/list",i()({method:"GET",params:i()({type:Object.keys(c!=null?c:[]).length>0?c==null?void 0:c.join(","):""},h)},u||{})));case 1:case"end":return S.stop()}},l)})),O.apply(this,arguments)}function R(l){return D.apply(this,arguments)}function D(){return D=p()(n()().mark(function l(h){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,f.request)("fileExplorer/delete-file-content/".concat(h),{method:"POST"}));case 1:case"end":return u.stop()}},l)})),D.apply(this,arguments)}function C(l){return T.apply(this,arguments)}function T(){return T=_asyncToGenerator(_regeneratorRuntime().mark(function l(h){return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",request("fileExplorer/delete-file-item",{method:"POST",data:h}));case 1:case"end":return u.stop()}},l)})),T.apply(this,arguments)}function I(l){return s.apply(this,arguments)}function s(){return s=p()(n()().mark(function l(h){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,f.request)("fileExplorer/".concat(h)));case 1:case"end":return u.stop()}},l)})),s.apply(this,arguments)}function Z(l,h){return M.apply(this,arguments)}function M(){return M=p()(n()().mark(function l(h,c){return n()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,f.request)("fileExplorer/file-items/".concat(c.id)));case 1:case"end":return P.stop()}},l)})),M.apply(this,arguments)}function B(l){return b.apply(this,arguments)}function b(){return b=p()(n()().mark(function l(h){var c;return n()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return c=new FormData,c.append("file",h),P.abrupt("return",(0,f.request)("fileExplorer/upload",{method:"POST",data:c}));case 3:case"end":return P.stop()}},l)})),b.apply(this,arguments)}function A(l){return m.apply(this,arguments)}function m(){return m=p()(n()().mark(function l(h){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,f.request)("fileexplorer/upload-from-url",{method:"POST",data:{url:h}}));case 1:case"end":return u.stop()}},l)})),m.apply(this,arguments)}},5251:function(V,U,e){e.d(U,{Er:function(){return i},p6:function(){return d}});var g=e(27484),n=e.n(g);function y(p){return p.trim()}function i(p){return new URL(p||"",localStorage.getItem("wf_URL")||"").href}function d(p){return p?n()(p).format("DD/MM/YYYY hh:mm:ss"):"-"}}}]);
