"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1816],{77198:function(Q,C,e){var R=e(97857),n=e.n(R),I=e(5574),_=e.n(I),v=e(20385),h=e(15245),m=e(89050),A=e(55555),x=e(55287),L=e(82061),Z=e(14361),k=e(73403),B=e(88484),w=e(80527),T=e(35312),P=e(58301),D=e(85418),S=e(93421),p=e(86738),y=e(71577),W=e(98366),c=e(71230),d=e(15746),u=e(85673),l=e(96365),g=e(65419),O=e(62435),s=e(86074),F=function(E){var U=(0,T.useIntl)(),r=(0,O.useRef)(),H=(0,O.useState)(),G=_()(H,2),a=G[0],o=G[1],i={name:"file",action:v.kE,onChange:function(j){if(j.file.status!=="uploading"&&console.log(j.file,j.fileList),j.file.status==="done"){var z;P.ZP.success("".concat(j.file.name," file uploaded successfully")),(z=r.current)===null||z===void 0||z.reload()}else j.file.status==="error"&&P.ZP.error("".concat(j.file.name," file upload failed."))}},t=[{key:"images",name:"Images",icon:(0,s.jsx)(h.Z,{twoToneColor:"#eb2f96"})},{key:"videos",name:"Videos",icon:(0,s.jsx)(m.Z,{})},{key:"text",name:"Documents",icon:(0,s.jsx)(A.Z,{twoToneColor:"#52c41a"})}],N=[{title:"#",valueType:"indexBorder"},{title:"Name",dataIndex:"name"},{title:"Date modified",dataIndex:"modifiedDate"},{title:"Type",dataIndex:"type"},{title:"Size",dataIndex:"size"},{title:"Action",render:function(j,z){return(0,s.jsx)(D.Z,{menu:{items:[{key:1,label:(0,s.jsxs)(S.Z,{onClick:function(){return T.history.push("/files/center/".concat(z.id))},children:[(0,s.jsx)(x.Z,{}),(0,s.jsx)(T.FormattedMessage,{id:"general.preview"})]})},{key:2,label:(0,s.jsx)(p.Z,{title:"Are you sure?",children:(0,s.jsxs)(S.Z,{children:[(0,s.jsx)(L.Z,{}),"Delete"]})}),danger:!0}]},children:(0,s.jsx)(y.ZP,{icon:(0,s.jsx)(Z.Z,{}),type:"link",size:"small"})})}}];return(0,s.jsxs)(W.Z,{title:"File Explorer",open:E.open,onCancel:function(){return E.onOpenChange()},centered:!0,width:1100,footer:!1,children:[(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsxs)(c.Z,{gutter:16,children:[(0,s.jsx)(d.Z,{span:4}),(0,s.jsx)(d.Z,{span:20,children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(u.Z,{children:[(0,s.jsx)(u.Z.Item,{href:"",children:(0,s.jsx)(k.Z,{})}),(0,s.jsx)(u.Z.Item,{href:"",children:"Home"})]}),(0,s.jsx)("div",{children:(0,s.jsx)(l.Z.Search,{placeholder:"Search"})})]})})]})}),(0,s.jsxs)(c.Z,{gutter:16,children:[(0,s.jsx)(d.Z,{span:4,style:{borderRight:"1px solid #d1d1d1"},children:t.map(function(K){return(0,s.jsx)("div",{className:"hover-light",children:(0,s.jsx)(y.ZP,{type:"link",icon:K.icon,children:K.name})},K.key)})}),(0,s.jsx)(d.Z,{span:20,children:(0,s.jsx)(w.Z,{rowSelection:{},toolBarRender:function(){return[(0,O.createElement)(g.Z,n()(n()({},i),{},{key:0}),(0,s.jsx)(y.ZP,{icon:(0,s.jsx)(B.Z,{}),type:"primary",children:"Upload"}))]},search:!1,columns:N,request:function(j){return(0,v.V6)(n()({},j),E.type)},pagination:{defaultPageSize:8},actionRef:r})})]})]})};C.Z=F},84697:function(Q,C,e){var R=e(12361),n=e(64317),I=e(86074),_=function(h){return(0,I.jsx)(n.Z,{request:R.Z9,label:h.label,name:h.name,initialValue:h.initialValue,rules:[{required:!0}]})};C.Z=_},37097:function(Q,C,e){e.d(C,{l:function(){return v}});var R=e(12361),n=e(64317),I=e(86074),_=function(A){return(0,I.jsx)(n.Z,{showSearch:!0,request:R.wu,label:A.label,name:A.name})},v=_,h=e(84697)},35003:function(Q,C,e){var R=e(15009),n=e.n(R),I=e(99289),_=e.n(I),v=e(5574),h=e.n(v),m=e(12361),A=e(55725),x=e(34994),L=e(5966),Z=e(90672),k=e(63434),B=e(35312),w=e(58301),T=e(71577),P=e(62435),D=e(84697),S=e(77198),p=e(86074),y=function(){var c=(0,B.useParams)(),d=c.id,u=(0,P.useRef)(),l=(0,P.useState)(!1),g=h()(l,2),O=g[0],s=g[1];(0,P.useEffect)(function(){(0,m.R4)(d).then(function(E){var U;(U=u.current)===null||U===void 0||U.setFields([{name:"id",value:E.id},{name:"name",value:E.name},{name:"normalizedName",value:E.normalizedName},{name:"description",value:E.description},{name:"thumbnail",value:E.thumbnail},{name:"type",value:E.type.toString()},{name:"active",value:E.active}])})},[d]);var F=function(){var E=_()(n()().mark(function U(r){var H;return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r.type=Number(r.type),a.next=3,(0,m.BA)(r);case 3:H=a.sent,H.succeeded&&w.ZP.success("Saved!");case 5:case"end":return a.stop()}},U)}));return function(r){return E.apply(this,arguments)}}(),q=function(U){var r;(r=u.current)===null||r===void 0||r.setFieldValue("thumbnail",U.url),s(!1)};return(0,p.jsxs)("div",{children:[(0,p.jsxs)(x.A,{formRef:u,onFinish:F,children:[(0,p.jsx)(L.Z,{name:"id",hidden:!0}),(0,p.jsx)(L.Z,{name:"name",label:"Name",rules:[{required:!0}]}),(0,p.jsx)(L.Z,{name:"normalizedName",label:"Normalized name",rules:[{required:!0}]}),(0,p.jsx)(Z.Z,{name:"description",label:"Description"}),(0,p.jsx)(L.Z,{name:"thumbnail",label:"Thumbnail",width:"lg",addonAfter:(0,p.jsx)(T.ZP,{icon:(0,p.jsx)(A.Z,{}),onClick:function(){return s(!0)},children:"File explorer"})}),(0,p.jsx)(D.Z,{name:"type",label:"Type"}),(0,p.jsx)(k.Z,{name:"active",label:"Active"})]}),(0,p.jsx)(S.Z,{open:O,onOpenChange:s,onSelect:q})]})};C.Z=y},74653:function(Q,C,e){e.d(C,{Z:function(){return t}});var R=e(15009),n=e.n(R),I=e(99289),_=e.n(I),v=e(5574),h=e.n(v),m=e(55287),A=e(43425),x=e(47389),L=e(3471),Z=e(51042),k=e(28199),B=e(37476),w=e(5966),T=e(31199),P=e(62435),D=e(55375),S=e(35312),p=e(12361),y=e(58301),W=e(83062),c=e(32983),d=e(32545),u=e(96074),l=e(26412),g=e(25514),O=e(71577),s=e(93421),F=e(5251),q=e(37097),E=e(66352),U=e(66309),r=e(86074),H=function(){var K=(0,S.useParams)(),j=K.id,z=(0,P.useState)(),ee=h()(z,2),Y=ee[0],ne=ee[1],ie=(0,P.useState)(!1),re=h()(ie,2),f=re[0],ae=re[1],le=function(){(0,p.m_)(j).then(function(b){ne(b)})};(0,P.useEffect)(function(){le()},[]);var ue=function(){var M=_()(n()().mark(function b($){var J;return n()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,(0,E.jX)({workId:j,catalogId:$.id,sortOrder:$.sortOrder});case 2:J=te.sent,J.succeeded?(y.ZP.success("Saved!"),ae(!1),le()):y.ZP.error(J.errors[0].description);case 4:case"end":return te.stop()}},b)}));return function($){return M.apply(this,arguments)}}(),X=function(){var M=_()(n()().mark(function b($){var J,V;return n()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,(0,E.wz)({catalogId:$,workId:j,sortOrder:0});case 2:J=se.sent,J.succeeded?(V=Y==null?void 0:Y.filter(function(oe){return oe.id!==$}),ne(V),y.ZP.success("Deleted")):y.ZP.error(J.errors[0].description);case 4:case"end":return se.stop()}},b)}));return function($){return M.apply(this,arguments)}}();return(0,r.jsxs)("div",{children:[Y==null?void 0:Y.map(function(M){return(0,r.jsx)(U.Z,{closable:!0,onClose:function(){return X(M.id)},children:M.name},M.id)}),(0,r.jsx)(O.ZP,{size:"small",type:"dashed",onClick:function(){return ae(!0)},children:(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(Z.Z,{}),(0,r.jsx)(S.FormattedMessage,{id:"general.new"})]})}),(0,r.jsxs)(B.Y,{open:f,onOpenChange:ae,onFinish:ue,title:"Th\xEAm m\u1EDBi",children:[(0,r.jsx)(q.l,{label:"Tag",name:"id"}),(0,r.jsx)(T.Z,{label:"Sort order",name:"sortOrder"})]})]})},G=H,a=function(){return localStorage.getItem("wf_URL")},o=a(),i=function(){var K=(0,S.useParams)(),j=K.id,z=(0,P.useState)(!1),ee=h()(z,2),Y=ee[0],ne=ee[1],ie=(0,P.useState)(),re=h()(ie,2),f=re[0],ae=re[1];(0,P.useEffect)(function(){(0,p.R4)(j).then(function(X){return ae(X)})},[j]);var le=function(){var X=_()(n()().mark(function M(b){var $;return n()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return b.active=!0,V.next=3,(0,p.BP)(b);case 3:$=V.sent,$.succeeded?(y.ZP.success("Added!"),ne(!1)):y.ZP.error($.errors[0].description);case 5:case"end":return V.stop()}},M)}));return function(b){return X.apply(this,arguments)}}(),ue=function(){var M="leaf";switch(f==null?void 0:f.type){case D.H.Article:M="article";break;case D.H.Location:M="locations";break;case D.H.Video:M="videos";break}return"".concat(o).concat(M,"/").concat(f==null?void 0:f.normalizedName)};return(0,r.jsxs)(k.Z,{title:"Summary",actions:[(0,r.jsx)(W.Z,{title:"Preview",children:(0,r.jsx)(m.Z,{onClick:function(){return window.open(ue())}})},"view"),(0,r.jsx)(A.Z,{},"setting"),(0,r.jsx)(x.Z,{},"edit"),(0,r.jsx)(L.Z,{},"ellipsis")],children:[(0,r.jsx)("div",{className:"flex items-center justify-center mt-4",children:f!=null&&f.thumbnail?(0,r.jsx)(d.Z,{src:(0,F.Er)(f==null?void 0:f.thumbnail),height:200,className:"object-fit-cover"}):(0,r.jsx)(c.Z,{})}),(0,r.jsx)(u.Z,{}),(0,r.jsxs)(l.Z,{title:"Information",column:1,children:[(0,r.jsx)(l.Z.Item,{label:"L\u01B0\u1EE3t xem",children:f==null?void 0:f.viewCount}),(0,r.jsx)(l.Z.Item,{label:"Created date",children:(0,F.p6)(f==null?void 0:f.createdDate)}),(0,r.jsx)(l.Z.Item,{label:"Modified date",children:(0,F.p6)(f==null?void 0:f.modifiedDate)})]}),((f==null?void 0:f.type)||D.H.Entry)===D.H.Tag?(0,r.jsx)(P.Fragment,{}):(0,r.jsxs)("div",{children:[(0,r.jsx)(u.Z,{}),(0,r.jsx)(g.Z.Title,{level:5,children:"Tags"}),(0,r.jsx)(G,{}),(0,r.jsx)(u.Z,{dashed:!0}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(O.ZP,{size:"small",type:"dashed",onClick:function(){return ne(!0)},children:(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(Z.Z,{}),"T\u1EA1o tag"]})})})]}),(0,r.jsxs)(B.Y,{open:Y,onOpenChange:ne,onFinish:le,title:"Create tag",children:[(0,r.jsx)(w.Z,{name:"name",rules:[{required:!0}],label:"Name"}),(0,r.jsx)(T.Z,{name:"type",initialValue:D.H.Tag,hidden:!0})]})]})},t=i},12361:function(Q,C,e){e.d(C,{A$:function(){return L},BA:function(){return P},BP:function(){return A},M0:function(){return U},R4:function(){return h},S8:function(){return w},Z9:function(){return g},_V:function(){return y},m_:function(){return s},tD:function(){return H},wu:function(){return q}});var R=e(15009),n=e.n(R),I=e(99289),_=e.n(I),v=e(35312);function h(a){return m.apply(this,arguments)}function m(){return m=_()(n()().mark(function a(o){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,v.request)("catalog/".concat(o)));case 1:case"end":return t.stop()}},a)})),m.apply(this,arguments)}function A(a){return x.apply(this,arguments)}function x(){return x=_()(n()().mark(function a(o){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,v.request)("catalog/add",{method:"POST",data:o}));case 1:case"end":return t.stop()}},a)})),x.apply(this,arguments)}function L(a){return Z.apply(this,arguments)}function Z(){return Z=_()(n()().mark(function a(o){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,v.request)("catalog/list",{method:"GET",params:o}));case 1:case"end":return t.stop()}},a)})),Z.apply(this,arguments)}function k(){return B.apply(this,arguments)}function B(){return B=_asyncToGenerator(_regeneratorRuntime().mark(function a(){return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",request("catalog/tree"));case 1:case"end":return i.stop()}},a)})),B.apply(this,arguments)}function w(a){return T.apply(this,arguments)}function T(){return T=_()(n()().mark(function a(o){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,v.request)("catalog/delete/".concat(o),{method:"POST"}));case 1:case"end":return t.stop()}},a)})),T.apply(this,arguments)}function P(a){return D.apply(this,arguments)}function D(){return D=_()(n()().mark(function a(o){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,v.request)("catalog/save",{method:"POST",data:o}));case 1:case"end":return t.stop()}},a)})),D.apply(this,arguments)}function S(a){return p.apply(this,arguments)}function p(){return p=_asyncToGenerator(_regeneratorRuntime().mark(function a(o){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("catalog/tree-drop",{method:"POST",data:o}));case 1:case"end":return t.stop()}},a)})),p.apply(this,arguments)}function y(){return W.apply(this,arguments)}function W(){return W=_()(n()().mark(function a(){return n()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,v.request)("catalog/view-count"));case 1:case"end":return i.stop()}},a)})),W.apply(this,arguments)}function c(a){return d.apply(this,arguments)}function d(){return d=_asyncToGenerator(_regeneratorRuntime().mark(function a(o){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("catalog/active/".concat(o),{method:"POST"}));case 1:case"end":return t.stop()}},a)})),d.apply(this,arguments)}function u(a){return l.apply(this,arguments)}function l(){return l=_asyncToGenerator(_regeneratorRuntime().mark(function a(o){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("catalog/update-thumbnail",{method:"POST",data:o}));case 1:case"end":return t.stop()}},a)})),l.apply(this,arguments)}function g(){return O.apply(this,arguments)}function O(){return O=_()(n()().mark(function a(){return n()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,v.request)("catalog/types"));case 1:case"end":return i.stop()}},a)})),O.apply(this,arguments)}function s(a){return F.apply(this,arguments)}function F(){return F=_()(n()().mark(function a(o){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,v.request)("catalog/list-tag/".concat(o)));case 1:case"end":return t.stop()}},a)})),F.apply(this,arguments)}function q(a){return E.apply(this,arguments)}function E(){return E=_()(n()().mark(function a(o){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,v.request)("catalog/list-tag-select",{params:o}));case 1:case"end":return t.stop()}},a)})),E.apply(this,arguments)}function U(a,o){return r.apply(this,arguments)}function r(){return r=_()(n()().mark(function a(o,i){return n()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.abrupt("return",(0,v.request)("catalog/list-by-tag/".concat(o),{params:i}));case 1:case"end":return N.stop()}},a)})),r.apply(this,arguments)}function H(){return G.apply(this,arguments)}function G(){return G=_()(n()().mark(function a(){return n()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,v.request)("catalog/pie-chart"));case 1:case"end":return i.stop()}},a)})),G.apply(this,arguments)}},20385:function(Q,C,e){e.d(C,{Ah:function(){return L},Cq:function(){return w},V6:function(){return A},kE:function(){return S},tg:function(){return y},z3:function(){return P}});var R=e(15009),n=e.n(R),I=e(97857),_=e.n(I),v=e(99289),h=e.n(v),m=e(35312);function A(c,d,u){return x.apply(this,arguments)}function x(){return x=h()(n()().mark(function c(d,u,l){return n()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",(0,m.request)("fileExplorer/list",_()({method:"GET",params:_()({type:Object.keys(u!=null?u:[]).length>0?u==null?void 0:u.join(","):""},d)},l||{})));case 1:case"end":return O.stop()}},c)})),x.apply(this,arguments)}function L(c){return Z.apply(this,arguments)}function Z(){return Z=h()(n()().mark(function c(d){return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,m.request)("fileExplorer/delete-file-content/".concat(d),{method:"POST"}));case 1:case"end":return l.stop()}},c)})),Z.apply(this,arguments)}function k(c){return B.apply(this,arguments)}function B(){return B=_asyncToGenerator(_regeneratorRuntime().mark(function c(d){return _regeneratorRuntime().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",request("fileExplorer/delete-file-item",{method:"POST",data:d}));case 1:case"end":return l.stop()}},c)})),B.apply(this,arguments)}function w(c){return T.apply(this,arguments)}function T(){return T=h()(n()().mark(function c(d){return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,m.request)("fileExplorer/".concat(d)));case 1:case"end":return l.stop()}},c)})),T.apply(this,arguments)}function P(c,d){return D.apply(this,arguments)}function D(){return D=h()(n()().mark(function c(d,u){return n()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,m.request)("fileExplorer/file-items/".concat(u.id)));case 1:case"end":return g.stop()}},c)})),D.apply(this,arguments)}function S(c){return p.apply(this,arguments)}function p(){return p=h()(n()().mark(function c(d){var u;return n()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return u=new FormData,u.append("file",d),g.abrupt("return",(0,m.request)("fileExplorer/upload",{method:"POST",data:u}));case 3:case"end":return g.stop()}},c)})),p.apply(this,arguments)}function y(c){return W.apply(this,arguments)}function W(){return W=h()(n()().mark(function c(d){return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,m.request)("fileexplorer/upload-from-url",{method:"POST",data:{url:d}}));case 1:case"end":return l.stop()}},c)})),W.apply(this,arguments)}},5251:function(Q,C,e){e.d(C,{Er:function(){return _},p6:function(){return v}});var R=e(27484),n=e.n(R);function I(m){return m.trim()}function _(m){return new URL(m||"",localStorage.getItem("wf_URL")||"").href}function v(m){return m?n()(m).format("DD/MM/YYYY hh:mm:ss"):"-"}var h=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(x){setTimeout(function(){x(!0)},A)})}}}]);
