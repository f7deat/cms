"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4350],{88484:function(q,T,e){e.d(T,{Z:function(){return a}});var P=e(1413),t=e(62435),I={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},v=I,x=e(84089),m=function(p,W){return t.createElement(x.Z,(0,P.Z)((0,P.Z)({},p),{},{ref:W,icon:v}))};m.displayName="UploadOutlined";var a=t.forwardRef(m)},74350:function(q,T,e){e.d(T,{Z:function(){return ce}});var P=e(5574),t=e.n(P),I=e(42952),v=e(86548),x=e(89705),m=e(30029),a=e(90905),_=e(62435),p=e(35003),W=e(15009),h=e.n(W),ee=e(97857),Z=e.n(ee),Y=e(99289),O=e.n(Y),G=e(55375),L=e(99270),R=e(61614),y=e(5251),$=e(48689),o=e(27790),s=e(26713),i=e(71577),l=e(32983),r=e(78613),c=e(96074),j=e(27511),ne=e(22850),te=e(66352),A=e(24969),d=e(99351),D=e(64317),re=e(5966),H=e(51904),n=e(86074),K=function(){var X=(0,a.useParams)(),B=X.id,V=(0,_.useState)(),b=t()(V,2),C=b[0],F=b[1],J=(0,_.useState)(!1),Q=t()(J,2),u=Q[0],z=Q[1],w=function(){(0,R.m_)(B).then(function(g){F(g)})};(0,_.useEffect)(function(){w()},[]);var N=function(){var E=O()(h()().mark(function g(f){var M;return h()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(f.type=G.H.Tag,M=void 0,!f.id){U.next=9;break}return U.next=5,(0,te.jX)({workId:B,catalogId:f.id});case 5:M=U.sent,w(),U.next=13;break;case 9:return f.active=!0,U.next=12,(0,R.BP)(f);case 12:M=U.sent;case 13:M.succeeded?(o.ZP.success("Saved!"),w(),z(!1)):o.ZP.error(M.errors[0].description);case 14:case"end":return U.stop()}},g)}));return function(f){return E.apply(this,arguments)}}(),ae=function(){var E=O()(h()().mark(function g(f){var M,S;return h()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,te.wz)({catalogId:B,workId:f});case 2:M=k.sent,M.succeeded?(S=C==null?void 0:C.filter(function(de){return de.id!==f}),F(S),o.ZP.success("Deleted")):o.ZP.error(M.errors[0].description);case 4:case"end":return k.stop()}},g)}));return function(f){return E.apply(this,arguments)}}();return(0,n.jsxs)("div",{children:[C==null?void 0:C.map(function(E){return(0,n.jsx)(H.Z,{closable:!0,onClose:function(){return ae(E.id)},children:E.name},E.id)}),(0,n.jsx)(i.Z,{icon:(0,n.jsx)(A.Z,{}),size:"small",type:"dashed",onClick:function(){return z(!0)},children:"New tag"}),(0,n.jsxs)(d.Y,{open:u,onOpenChange:z,onFinish:N,children:[(0,n.jsx)(D.Z,{showSearch:!0,request:R.wu,name:"id",label:"Select"}),(0,n.jsx)(c.Z,{children:"Or"}),(0,n.jsx)(re.Z,{label:"New",name:"name"})]})]})},le=K,ue=function(){var X=(0,a.useParams)(),B=X.id,V=(0,_.useState)(!1),b=t()(V,2),C=b[0],F=b[1],J=(0,_.useState)(),Q=t()(J,2),u=Q[0],z=Q[1];(0,_.useEffect)(function(){(0,R.R4)(B).then(function(N){return z(N)})},[B]);var w=function(){var N=O()(h()().mark(function ae(E){var g,f;return h()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!u){S.next=7;break}return g=Z()(Z()({},u),{},{thumbnail:E.url}),S.next=4,(0,R.r5)(g);case 4:f=S.sent,f.succeeded&&(o.ZP.success("Saved!"),z(g)),F(!1);case 7:case"end":return S.stop()}},ae)}));return function(E){return N.apply(this,arguments)}}();return(0,n.jsxs)("div",{children:[(0,n.jsxs)(s.Z,{children:[(0,n.jsx)(i.Z,{icon:(0,n.jsx)(v.Z,{}),onClick:function(){return F(!0)}}),(0,n.jsx)(i.Z,{icon:(0,n.jsx)($.Z,{}),danger:!0,type:"primary"})]}),(0,n.jsx)("div",{className:"flex items-center justify-center mt-4",children:u!=null&&u.thumbnail?(0,n.jsx)(r.Z,{src:(0,y.Er)(u==null?void 0:u.thumbnail),height:200,className:"object-fit-cover"}):(0,n.jsx)(l.Z,{})}),(0,n.jsx)(c.Z,{}),(0,n.jsxs)(j.Z,{title:"Information",column:1,children:[(0,n.jsx)(j.Z.Item,{label:"L\u01B0\u1EE3t xem",children:u==null?void 0:u.viewCount}),(0,n.jsx)(j.Z.Item,{label:"Created date",children:(0,y.p6)(u==null?void 0:u.createdDate)}),(0,n.jsx)(j.Z.Item,{label:"Modified date",children:(0,y.p6)(u==null?void 0:u.modifiedDate)})]}),(u==null?void 0:u.type)===G.H.Tag?(0,n.jsx)("div",{}):(0,n.jsxs)("div",{children:[(0,n.jsx)(c.Z,{}),(0,n.jsx)(ne.Z.Title,{level:5,children:"Tags"}),(0,n.jsx)(le,{})]}),(0,n.jsx)(L.Z,{open:C,onOpenChange:F,onSelect:w})]})},oe=ue,ie=function(){var X=(0,a.useIntl)(),B=(0,_.useState)("content"),V=t()(B,2),b=V[0],C=V[1];return(0,n.jsx)(m.Z,{title:"Summary",actions:[(0,n.jsx)(I.Z,{},"setting"),(0,n.jsx)(v.Z,{},"edit"),(0,n.jsx)(x.Z,{},"ellipsis")],tabs:{tabPosition:"top",activeKey:b,items:[{label:"Content",key:"content",children:(0,n.jsx)(oe,{})},{label:X.formatMessage({id:"menu.settings"}),key:"setting",children:(0,n.jsx)(p.Z,{})}],onChange:function(J){C(J)}}})},ce=ie},99270:function(q,T,e){var P=e(97857),t=e.n(P),I=e(15009),v=e.n(I),x=e(99289),m=e.n(x),a=e(20385),_=e(5251),p=e(88484),W=e(97269),h=e(5966),ee=e(99351),Z=e(22538),Y=e(90905),O=e(27790),G=e(31365),L=e(71577),R=e(55241),y=e(78613),$=e(62435),o=e(86074),s=function(l){var r=(0,Y.useIntl)(),c=(0,$.useRef)(),j={name:"file",action:a.kE,accept:"image/png, image/jpeg",onChange:function(d){if(d.file.status!=="uploading"&&console.log(d.file,d.fileList),d.file.status==="done"){var D;O.ZP.success("".concat(d.file.name," file uploaded successfully")),(D=c.current)===null||D===void 0||D.reload()}else d.file.status==="error"&&O.ZP.error("".concat(d.file.name," file upload failed."))}},ne=function(){var A=m()(v()().mark(function d(D){var re,H;return v()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,a.tg)(D.url);case 2:re=K.sent,re.succeeded&&(O.ZP.success("Uploaded!"),(H=c.current)===null||H===void 0||H.reload());case 4:case"end":return K.stop()}},d)}));return function(D){return A.apply(this,arguments)}}(),te=(0,o.jsx)(W.A,{onFinish:ne,children:(0,o.jsx)(h.Z,{name:"url",rules:[{required:!0}],placeholder:"URL"})});return(0,o.jsx)(ee.Y,{open:l.open,onOpenChange:l.onOpenChange,children:(0,o.jsx)(Z.Rs,{ghost:!0,toolBarRender:function(){return[(0,$.createElement)(G.Z,t()(t()({},j),{},{key:0}),(0,o.jsx)(L.Z,{icon:(0,o.jsx)(p.Z,{}),type:"primary",children:"Upload"})),(0,o.jsx)(R.Z,{trigger:"click",content:te,title:"Upload Via URL",children:(0,o.jsx)(L.Z,{icon:(0,o.jsx)(p.Z,{}),onClick:ne,children:"Via URL"})},2)]},headerTitle:r.formatMessage({id:"menu.fileManager"}),request:function(d){return(0,a.V6)(t()({},d),[".png",".jpg",".jpeg","image/jpeg"])},search:{layout:"vertical"},pagination:{pageSize:6},grid:{column:3},onItem:function(d){return{onClick:function(){!l.onSelect||l.onSelect(d)}}},metas:{content:{dataIndex:"name",title:"Name",render:function(d,D){return(0,o.jsx)(y.Z,{src:(0,_.Er)(D.url),height:100,preview:!1})}}},actionRef:c})})};T.Z=s},20385:function(q,T,e){e.d(T,{Ah:function(){return W},Cq:function(){return Y},V6:function(){return _},kE:function(){return R},tg:function(){return $},z3:function(){return G}});var P=e(15009),t=e.n(P),I=e(97857),v=e.n(I),x=e(99289),m=e.n(x),a=e(90905);function _(s,i,l){return p.apply(this,arguments)}function p(){return p=m()(t()().mark(function s(i,l,r){return t()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",(0,a.request)("fileExplorer/list",v()({method:"GET",params:v()({type:Object.keys(l!=null?l:[]).length>0?l==null?void 0:l.join(","):""},i)},r||{})));case 1:case"end":return j.stop()}},s)})),p.apply(this,arguments)}function W(s){return h.apply(this,arguments)}function h(){return h=m()(t()().mark(function s(i){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,a.request)("fileExplorer/delete-file-content/".concat(i),{method:"POST"}));case 1:case"end":return r.stop()}},s)})),h.apply(this,arguments)}function ee(s){return Z.apply(this,arguments)}function Z(){return Z=_asyncToGenerator(_regeneratorRuntime().mark(function s(i){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("fileExplorer/delete-file-item",{method:"POST",data:i}));case 1:case"end":return r.stop()}},s)})),Z.apply(this,arguments)}function Y(s){return O.apply(this,arguments)}function O(){return O=m()(t()().mark(function s(i){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,a.request)("fileExplorer/".concat(i)));case 1:case"end":return r.stop()}},s)})),O.apply(this,arguments)}function G(s,i){return L.apply(this,arguments)}function L(){return L=m()(t()().mark(function s(i,l){return t()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,a.request)("fileExplorer/file-items/".concat(l.id)));case 1:case"end":return c.stop()}},s)})),L.apply(this,arguments)}function R(s){return y.apply(this,arguments)}function y(){return y=m()(t()().mark(function s(i){var l;return t()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return l=new FormData,l.append("file",i),c.abrupt("return",(0,a.request)("fileExplorer/upload",{method:"POST",data:l}));case 3:case"end":return c.stop()}},s)})),y.apply(this,arguments)}function $(s){return o.apply(this,arguments)}function o(){return o=m()(t()().mark(function s(i){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,a.request)("fileexplorer/upload-from-url",{method:"POST",data:{url:i}}));case 1:case"end":return r.stop()}},s)})),o.apply(this,arguments)}},5251:function(q,T,e){e.d(T,{Er:function(){return v},p6:function(){return x}});var P=e(27484),t=e.n(P);function I(a){return a.trim()}function v(a){return new URL(a||"",localStorage.getItem("wf_URL")||"").href}function x(a){return a?t()(a).format("DD/MM/YYYY hh:mm:ss"):"-"}var m=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(p){setTimeout(function(){p(!0)},_)})}}}]);
